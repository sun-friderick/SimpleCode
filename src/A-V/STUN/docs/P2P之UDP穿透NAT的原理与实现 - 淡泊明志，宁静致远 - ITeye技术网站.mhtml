From: <Saved by Blink>
Subject: P2P?UDP??NAT?????? - ????????? - ITeye????
Date: Wed, 10 Nov 2015 10:07:24 -0000
MIME-Version: 1.0
Content-Type: multipart/related;
	type="text/html";
	boundary="----=_NextPart_000_1F57_C38508DB.8A6136C5"

------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: text/html
Content-Transfer-Encoding: quoted-printable
Content-Location: http://andylin02.iteye.com/blog/444643

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.=
w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns=3D"http://www.w3.=
org/1999/xhtml" xml:lang=3D"zh-CN" dir=3D"ltr" version=3D"g42dymwpi--nx" cl=
ass=3D""><head><meta http-equiv=3D"Content-Type" content=3D"text/html; char=
set=3DUTF-8">
   =20
    <title>P2P=E4=B9=8BUDP=E7=A9=BF=E9=80=8FNAT=E7=9A=84=E5=8E=9F=E7=90=86=
=E4=B8=8E=E5=AE=9E=E7=8E=B0 - =E6=B7=A1=E6=B3=8A=E6=98=8E=E5=BF=97=EF=BC=8C=
=E5=AE=81=E9=9D=99=E8=87=B4=E8=BF=9C - ITeye=E6=8A=80=E6=9C=AF=E7=BD=91=E7=
=AB=99</title>
    <meta name=3D"description" content=3D"P2P =E4=B9=8B UDP=E7=A9=BF=E9=80=
=8FNAT=E7=9A=84=E5=8E=9F=E7=90=86=E4=B8=8E=E5=AE=9E=E7=8E=B0  =E5=8E=9F=E5=
=88=9B=EF=BC=9Ashootingstars  =E5=8F=82=E8=80=83=EF=BC=9Ahttp://midcom-p2p.=
sourceforge.net/draft-ford-midcom-p2p-01.txt  =E5=B7=A5=E7=A8=8B=E4=B8=8B=
=E8=BD=BD=E5=9C=B0=E5=9D=80:upload/2004_05/04052509317298.rar  &nbsp;  =E8=
=AE=BA=E5=9D=9B=E4=B8=8A=E7=BB=8F=E5=B8=B8=E6=9C=89=E5=AF=B9P2P=E5=8E=9F=E7=
=90=86=E7=9A=84=E8=AE=A8=E8=AE=BA=EF=BC=8C=E4=BD=86=E6=98=AF=E8=AE=A8=E8=AE=
=BA=E5=BD=92=E8=AE=A8=E8=AE=BA=EF=BC=8C=E5=BE=88=E5=B0=91=E6=9C=89=E5=AE=9E=
=E8=B4=A8=E7=9A=84=E4=B8=9C=E8=A5=BF=E4=BA=A7=E7=94=9F=EF=BC=88=E6=BA=90=E4=
=BB=A3=E7=A0=81=EF=BC=89=E3=80=82=E5=91=B5=E5=91=B5=EF=BC=8C=E5=9C=A8=E8=BF=
=99=E9=87=8C=E6=88=91=E5=B0=B1=E7=94=A8 ...">
    <meta name=3D"keywords" content=3D"Socket, =E7=BD=91=E7=BB=9C=E5=8D=8F=
=E8=AE=AE, Windows, =E4=BA=92=E8=81=94=E7=BD=91, =E8=BD=AF=E4=BB=B6=E6=B5=
=8B=E8=AF=95 P2P=E4=B9=8BUDP=E7=A9=BF=E9=80=8FNAT=E7=9A=84=E5=8E=9F=E7=90=
=86=E4=B8=8E=E5=AE=9E=E7=8E=B0">
    <link rel=3D"shortcut icon" href=3D"http://andylin02.iteye.com/images/f=
avicon.ico" type=3D"image/x-icon">
    <link rel=3D"search" type=3D"application/opensearchdescription+xml" hre=
f=3D"http://andylin02.iteye.com/open_search.xml" title=3D"ITeye">
    <link href=3D"http://andylin02.iteye.com/rss" rel=3D"alternate" title=
=3D"=E6=B7=A1=E6=B3=8A=E6=98=8E=E5=BF=97=EF=BC=8C=E5=AE=81=E9=9D=99=E8=87=
=B4=E8=BF=9C" type=3D"application/rss+xml">
    <link href=3D"http://www.iteye.com/stylesheets/blog.css?1446798272" med=
ia=3D"screen" rel=3D"stylesheet" type=3D"text/css">
<link href=3D"http://www.iteye.com/stylesheets/themes/blog/blue.css?1326191=
326" media=3D"screen" rel=3D"stylesheet" type=3D"text/css">
   =20
   =20


      <link href=3D"http://www.iteye.com/javascripts/syntaxhighlighter/Synt=
axHighlighter.css?1348819953" media=3D"screen" rel=3D"stylesheet" type=3D"t=
ext/css">
 =20

 =20

  <style type=3D"text/css">.dp-cpp .datatypes { color: #2E8B57; font-weight=
: bold; }</style><style type=3D"text/css">.dp-cpp .datatypes { color: #2E8B=
57; font-weight: bold; }</style><style type=3D"text/css">.dp-cpp .datatypes=
 { color: #2E8B57; font-weight: bold; }</style><style id=3D"style-1-cropbar=
-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style><style id=3D"clearly_highlighting_css" type=3D"text/css">/* selecti=
on */ html.clearly_highlighting_enabled ::-moz-selection { background: rgba=
(246, 238, 150, 0.99); } html.clearly_highlighting_enabled ::selection { ba=
ckground: rgba(246, 238, 150, 0.99); } /* cursor */ html.clearly_highlighti=
ng_enabled {    /* cursor and hot-spot position -- requires a default curso=
r, after the URL one */    cursor: url("chrome-extension://pioclpoplcdbaefi=
hamjohnefbikjilc/clearly/images/highlight--cursor.png") 14 16, text; } /* h=
ighlight tag */ em.clearly_highlight_element {    font-style: inherit !impo=
rtant; font-weight: inherit !important;    background-image: url("chrome-ex=
tension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--yellow=
.png");    background-repeat: repeat-x; background-position: top left; back=
ground-size: 100% 100%; } /* the delete-buttons are positioned relative to =
this */ em.clearly_highlight_element.clearly_highlight_first { position: re=
lative; } /* delete buttons */ em.clearly_highlight_element a.clearly_highl=
ight_delete_element {    display: none; cursor: pointer;    padding: 0; mar=
gin: 0; line-height: 0;    position: absolute; width: 34px; height: 34px; l=
eft: -17px; top: -17px;    background-image: url("chrome-extension://pioclp=
oplcdbaefihamjohnefbikjilc/clearly/images/highlight--delete-sprite.png"); b=
ackground-repeat: no-repeat; background-position: 0px 0px; } em.clearly_hig=
hlight_element a.clearly_highlight_delete_element:hover { background-positi=
on: -34px 0px; } /* retina */ @media (min--moz-device-pixel-ratio: 2), (-we=
bkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {    em.clearl=
y_highlight_element { background-image: url("chrome-extension://pioclpoplcd=
baefihamjohnefbikjilc/clearly/images/highlight--yellow@2x.png"); }    em.cl=
early_highlight_element a.clearly_highlight_delete_element { background-ima=
ge: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images=
/highlight--delete-sprite@2x.png"); background-size: 68px 34px; } } </style=
></head>
  <body style=3D"">
    <div id=3D"header">
      <div id=3D"blog_site_nav">
  <a href=3D"http://www.iteye.com/" class=3D"homepage">=E9=A6=96=E9=A1=B5</=
a>
  <a href=3D"http://www.iteye.com/news">=E8=B5=84=E8=AE=AF</a>
  <a href=3D"http://www.iteye.com/magazines">=E7=B2=BE=E5=8D=8E</a>
  <a href=3D"http://www.iteye.com/forums">=E8=AE=BA=E5=9D=9B</a>
  <a href=3D"http://www.iteye.com/ask">=E9=97=AE=E7=AD=94</a>
  <a href=3D"http://www.iteye.com/blogs">=E5=8D=9A=E5=AE=A2</a>
  <a href=3D"http://www.iteye.com/blogs/subjects">=E4=B8=93=E6=A0=8F</a>
  <a href=3D"http://www.iteye.com/groups">=E7=BE=A4=E7=BB=84</a>
  <a href=3D"http://andylin02.iteye.com/blog/444643#" onclick=3D"return fal=
se;" id=3D"msna"><u>=E6=9B=B4=E5=A4=9A</u> <small>=E2=96=BC</small></a>
  <div class=3D"quick_menu" style=3D"display:none;">
    <a target=3D"_blank" href=3D"http://job.iteye.com/iteye">=E6=8B=9B=E8=
=81=98</a>
    <a href=3D"http://www.iteye.com/search">=E6=90=9C=E7=B4=A2</a>
  </div>
</div>

      <div id=3D"user_nav">
      <a href=3D"http://andylin02.iteye.com/login" class=3D"welcome" title=
=3D"=E7=99=BB=E5=BD=95">=E6=82=A8=E8=BF=98=E6=9C=AA=E7=99=BB=E5=BD=95 !</a>
    <a href=3D"http://andylin02.iteye.com/login">=E7=99=BB=E5=BD=95</a>
    <a href=3D"http://andylin02.iteye.com/signup" class=3D"nobg">=E6=B3=A8=
=E5=86=8C</a>
  </div>

    </div>

    <div id=3D"page">
      <div id=3D"branding" class=3D"clearfix">
        <div id=3D"blog_name">
          <h1><a href=3D"http://andylin02.iteye.com/">=E6=B7=A1=E6=B3=8A=E6=
=98=8E=E5=BF=97=EF=BC=8C=E5=AE=81=E9=9D=99=E8=87=B4=E8=BF=9C</a></h1>
        </div>
        <div id=3D"fd"></div>
        <div id=3D"blog_navbar">
          <ul>
            <li class=3D"blog_navbar_for"><a href=3D"http://andylin02.iteye=
.com/"><strong>=E5=8D=9A=E5=AE=A2</strong></a></li>
            <li><a href=3D"http://andylin02.iteye.com/weibo">=E5=BE=AE=E5=
=8D=9A</a></li>
            <li><a href=3D"http://andylin02.iteye.com/album">=E7=9B=B8=E5=
=86=8C</a></li>
            <li><a href=3D"http://andylin02.iteye.com/link">=E6=94=B6=E8=97=
=8F</a></li>
            <li><a href=3D"http://andylin02.iteye.com/blog/guest_book">=E7=
=95=99=E8=A8=80</a></li>
            <li><a href=3D"http://andylin02.iteye.com/blog/profile">=E5=85=
=B3=E4=BA=8E=E6=88=91</a></li>
          </ul>
   =20
          <div class=3D"search">
            <form action=3D"http://andylin02.iteye.com/blog/search" method=
=3D"get">
              <input class=3D"search_text" id=3D"query" name=3D"query" styl=
e=3D"margin-left: 10px;width: 110px;" type=3D"text" value=3D"">
              <input class=3D"submit_search" type=3D"submit" value=3D"">
            </form>
          </div>=20
          <div id=3D"fd"></div>        =20
        </div>
      </div>
     =20
      <div id=3D"content" class=3D"clearfix">
        <div id=3D"main">
         =20



         =20


<div class=3D"h-entry" style=3D"display:none">
  <a href=3D"http://andylin02.iteye.com/" class=3D"p-author" target=3D"_bla=
nk">andylin02</a>
</div>


<div class=3D"blog_main">
  <div class=3D"blog_title">
    <h3>
      <a href=3D"http://andylin02.iteye.com/blog/444643">P2P=E4=B9=8BUDP=E7=
=A9=BF=E9=80=8FNAT=E7=9A=84=E5=8E=9F=E7=90=86=E4=B8=8E=E5=AE=9E=E7=8E=B0</a=
>
      <em class=3D"actions">      </em>
    </h3>
    <ul class=3D"blog_categories"><strong>=E5=8D=9A=E5=AE=A2=E5=88=86=E7=B1=
=BB=EF=BC=9A</strong> <li><a href=3D"http://andylin02.iteye.com/category/75=
628">P2P</a></li> </ul>
        <div class=3D"news_tag"><a href=3D"http://www.iteye.com/blogs/tag/S=
ocket">Socket</a><a href=3D"http://www.iteye.com/blogs/tag/%E7%BD%91%E7%BB%=
9C%E5%8D%8F%E8%AE%AE">=E7=BD=91=E7=BB=9C=E5=8D=8F=E8=AE=AE</a><a href=3D"ht=
tp://www.iteye.com/blogs/tag/Windows">Windows</a><a href=3D"http://www.itey=
e.com/blogs/tag/%E4%BA%92%E8%81%94%E7%BD%91">=E4=BA=92=E8=81=94=E7=BD=91</a=
><a href=3D"http://www.iteye.com/blogs/tag/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%A=
F%95">=E8=BD=AF=E4=BB=B6=E6=B5=8B=E8=AF=95</a>&nbsp;</div>
  </div>

  <div id=3D"blog_content" class=3D"blog_content">
    <p><span style=3D"color: #333399;"><span style=3D"font-size: large;">P2=
P =E4=B9=8B UDP=E7=A9=BF=E9=80=8FNAT=E7=9A=84=E5=8E=9F=E7=90=86=E4=B8=8E=E5=
=AE=9E=E7=8E=B0</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">=E5=8E=
=9F=E5=88=9B=EF=BC=9Ashootingstars</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">=E5=8F=
=82=E8=80=83=EF=BC=9Ahttp://midcom-p2p.sourceforge.net/draft-ford-midcom-p2=
p-01.txt</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;"><span>=
<span style=3D"color: #ff0000;"><strong>=E5=B7=A5=E7=A8=8B=E4=B8=8B=E8=BD=
=BD=E5=9C=B0=E5=9D=80:</strong></span><a href=3D"http://www.ppcn.net/upload=
/2004_05/04052509317298.rar" style=3D"color: #b32bd5; text-decoration: unde=
rline;" target=3D"_blank">upload/2004_05/04052509317298.rar</a></span></spa=
n></span></p>
<p>&nbsp;</p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">=E8=AE=
=BA=E5=9D=9B=E4=B8=8A=E7=BB=8F=E5=B8=B8=E6=9C=89=E5=AF=B9P2P=E5=8E=9F=E7=90=
=86=E7=9A=84=E8=AE=A8=E8=AE=BA=EF=BC=8C=E4=BD=86=E6=98=AF=E8=AE=A8=E8=AE=BA=
=E5=BD=92=E8=AE=A8=E8=AE=BA=EF=BC=8C=E5=BE=88=E5=B0=91=E6=9C=89=E5=AE=9E=E8=
=B4=A8=E7=9A=84=E4=B8=9C=E8=A5=BF=E4=BA=A7=E7=94=9F=EF=BC=88=E6=BA=90=E4=BB=
=A3=E7=A0=81=EF=BC=89=E3=80=82=E5=91=B5=E5=91=B5=EF=BC=8C=E5=9C=A8=E8=BF=99=
=E9=87=8C=E6=88=91=E5=B0=B1=E7=94=A8=E8=87=AA=E5=B7=B1=E5=AE=9E=E7=8E=B0=E7=
=9A=84=E4=B8=80=E4=B8=AA=E6=BA=90=E4=BB=A3=E7=A0=81=E6=9D=A5=E8=AF=B4=E6=98=
=8EUDP=E7=A9=BF=E8=B6=8ANAT=E7=9A=84=E5=8E=9F=E7=90=86=E3=80=82</span></spa=
n></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;"><br></=
span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">=E9=A6=
=96=E5=85=88=E5=85=88=E4=BB=8B=E7=BB=8D=E4=B8=80=E4=BA=9B=E5=9F=BA=E6=9C=AC=
=E6=A6=82=E5=BF=B5=EF=BC=9A</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;NAT(Network Address Translators)=EF=BC=8C=E7=BD=91=E7=BB=9C=E5=
=9C=B0=E5=9D=80=E8=BD=AC=E6=8D=A2=EF=BC=9A=E7=BD=91=E7=BB=9C=E5=9C=B0=E5=9D=
=80=E8=BD=AC=E6=8D=A2=E6=98=AF=E5=9C=A8IP=E5=9C=B0=E5=9D=80=E6=97=A5=E7=9B=
=8A=E7=BC=BA=E4=B9=8F=E7=9A=84=E6=83=85=E5=86=B5=E4=B8=8B=E4=BA=A7=E7=94=9F=
=E7=9A=84=EF=BC=8C=E5=AE=83=E7=9A=84=E4=B8=BB=E8=A6=81=E7=9B=AE=E7=9A=84=E5=
=B0=B1=E6=98=AF=E4=B8=BA=E4=BA=86=E8=83=BD=E5=A4=9F=E5=9C=B0=E5=9D=80=E9=87=
=8D=E7=94=A8=E3=80=82NAT=E5=88=86=E4=B8=BA=E4=B8=A4=E5=A4=A7=E7=B1=BB=EF=BC=
=8C=E5=9F=BA=E6=9C=AC=E7=9A=84NAT=E5=92=8CNAPT(Network Address/Port Transla=
tor)=E3=80=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E6=9C=80=E5=BC=80=E5=A7=8BNAT=E6=98=AF=E8=BF=90=E8=A1=8C=E5=
=9C=A8=E8=B7=AF=E7=94=B1=E5=99=A8=E4=B8=8A=E7=9A=84=E4=B8=80=E4=B8=AA=E5=8A=
=9F=E8=83=BD=E6=A8=A1=E5=9D=97=E3=80=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E6=9C=80=E5=85=88=E6=8F=90=E5=87=BA=E7=9A=84=E6=98=AF=E5=9F=
=BA=E6=9C=AC=E7=9A=84NAT=EF=BC=8C=E5=AE=83=E7=9A=84=E4=BA=A7=E7=94=9F=E5=9F=
=BA=E4=BA=8E=E5=A6=82=E4=B8=8B=E4=BA=8B=E5=AE=9E=EF=BC=9A=E4=B8=80=E4=B8=AA=
=E7=A7=81=E6=9C=89=E7=BD=91=E7=BB=9C=EF=BC=88=E5=9F=9F=EF=BC=89=E4=B8=AD=E7=
=9A=84=E8=8A=82=E7=82=B9=E4=B8=AD=E5=8F=AA=E6=9C=89=E5=BE=88=E5=B0=91=E7=9A=
=84=E8=8A=82=E7=82=B9=E9=9C=80=E8=A6=81=E4=B8=8E=E5=A4=96=E7=BD=91=E8=BF=9E=
=E6=8E=A5=EF=BC=88=E5=91=B5=E5=91=B5=EF=BC=8C=E8=BF=99=E6=98=AF=E5=9C=A8=E4=
=B8=8A=E4=B8=96=E7=BA=AA90=E5=B9=B4=E4=BB=A3=E4=B8=AD=E6=9C=9F=E6=8F=90=E5=
=87=BA=E7=9A=84=EF=BC=89=E3=80=82=E9=82=A3=E4=B9=88=E8=BF=99=E4=B8=AA=E5=AD=
=90=E7=BD=91=E4=B8=AD=E5=85=B6=E5=AE=9E=E5=8F=AA=E6=9C=89=E5=B0=91=E6=95=B0=
=E7=9A=84=E8=8A=82=E7=82=B9=E9=9C=80=E8=A6=81=E5=85=A8=E7=90=83=E5=94=AF=E4=
=B8=80=E7=9A=84IP=E5=9C=B0=E5=9D=80=EF=BC=8C=E5=85=B6=E4=BB=96=E7=9A=84=E8=
=8A=82=E7=82=B9=E7=9A=84IP=E5=9C=B0=E5=9D=80=E5=BA=94=E8=AF=A5=E6=98=AF=E5=
=8F=AF=E4=BB=A5=E9=87=8D=E7=94=A8=E7=9A=84=E3=80=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E5=9B=A0=E6=AD=A4=EF=BC=8C=E5=9F=BA=E6=9C=AC=E7=9A=84NAT=E5=
=AE=9E=E7=8E=B0=E7=9A=84=E5=8A=9F=E8=83=BD=E5=BE=88=E7=AE=80=E5=8D=95=EF=BC=
=8C=E5=9C=A8=E5=AD=90=E7=BD=91=E5=86=85=E4=BD=BF=E7=94=A8=E4=B8=80=E4=B8=AA=
=E4=BF=9D=E7=95=99=E7=9A=84IP=E5=AD=90=E7=BD=91=E6=AE=B5=EF=BC=8C=E8=BF=99=
=E4=BA=9BIP=E5=AF=B9=E5=A4=96=E6=98=AF=E4=B8=8D=E5=8F=AF=E8=A7=81=E7=9A=84=
=E3=80=82=E5=AD=90=E7=BD=91=E5=86=85=E5=8F=AA=E6=9C=89=E5=B0=91=E6=95=B0=E4=
=B8=80=E4=BA=9BIP=E5=9C=B0=E5=9D=80=E5=8F=AF=E4=BB=A5=E5=AF=B9=E5=BA=94=E5=
=88=B0=E7=9C=9F=E6=AD=A3=E5=85=A8=E7=90=83=E5=94=AF=E4=B8=80=E7=9A=84IP=E5=
=9C=B0=E5=9D=80=E3=80=82=E5=A6=82=E6=9E=9C=E8=BF=99=E4=BA=9B=E8=8A=82=E7=82=
=B9=E9=9C=80=E8=A6=81=E8=AE=BF=E9=97=AE=E5=A4=96=E9=83=A8=E7=BD=91=E7=BB=9C=
=EF=BC=8C=E9=82=A3=E4=B9=88=E5=9F=BA=E6=9C=ACNAT=E5=B0=B1=E8=B4=9F=E8=B4=A3=
=E5=B0=86=E8=BF=99=E4=B8=AA=E8=8A=82=E7=82=B9=E7=9A=84=E5=AD=90=E7=BD=91=E5=
=86=85IP=E8=BD=AC=E5=8C=96=E4=B8=BA=E4=B8=80=E4=B8=AA=E5=85=A8=E7=90=83=E5=
=94=AF=E4=B8=80=E7=9A=84IP=E7=84=B6=E5=90=8E=E5=8F=91=E9=80=81=E5=87=BA=E5=
=8E=BB=E3=80=82(=E5=9F=BA=E6=9C=AC=E7=9A=84NAT=E4=BC=9A=E6=94=B9=E5=8F=98IP=
=E5=8C=85=E4=B8=AD=E7=9A=84=E5=8E=9FIP=E5=9C=B0=E5=9D=80=EF=BC=8C=E4=BD=86=
=E6=98=AF=E4=B8=8D=E4=BC=9A=E6=94=B9=E5=8F=98IP=E5=8C=85=E4=B8=AD=E7=9A=84=
=E7=AB=AF=E5=8F=A3)</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E5=85=B3=E4=BA=8E=E5=9F=BA=E6=9C=AC=E7=9A=84NAT=E5=8F=AF=E4=
=BB=A5=E5=8F=82=E7=9C=8BRFC 1631</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E5=8F=A6=E5=A4=96=E4=B8=80=E7=A7=8DNAT=E5=8F=AB=E5=81=9ANAPT=
=EF=BC=8C=E4=BB=8E=E5=90=8D=E7=A7=B0=E4=B8=8A=E6=88=91=E4=BB=AC=E4=B9=9F=E5=
=8F=AF=E4=BB=A5=E7=9C=8B=E5=BE=97=E5=87=BA=EF=BC=8CNAPT=E4=B8=8D=E4=BD=86=
=E4=BC=9A=E6=94=B9=E5=8F=98=E7=BB=8F=E8=BF=87=E8=BF=99=E4=B8=AANAT=E8=AE=BE=
=E5=A4=87=E7=9A=84IP=E6=95=B0=E6=8D=AE=E6=8A=A5=E7=9A=84IP=E5=9C=B0=E5=9D=
=80=EF=BC=8C=E8=BF=98=E4=BC=9A=E6=94=B9=E5=8F=98IP=E6=95=B0=E6=8D=AE=E6=8A=
=A5=E7=9A=84TCP/UDP=E7=AB=AF=E5=8F=A3=E3=80=82=E5=9F=BA=E6=9C=ACNAT=E7=9A=
=84=E8=AE=BE=E5=A4=87=E5=8F=AF=E8=83=BD=E6=88=91=E4=BB=AC=E8=A7=81=E7=9A=84=
=E4=B8=8D=E5=A4=9A=EF=BC=88=E5=91=B5=E5=91=B5=EF=BC=8C=E6=88=91=E6=B2=A1=E6=
=9C=89=E8=A7=81=E5=88=B0=E8=BF=87=EF=BC=89=EF=BC=8CNAPT=E6=89=8D=E6=98=AF=
=E6=88=91=E4=BB=AC=E7=9C=9F=E6=AD=A3=E8=AE=A8=E8=AE=BA=E7=9A=84=E4=B8=BB=E8=
=A7=92=E3=80=82=E7=9C=8B=E4=B8=8B=E5=9B=BE=EF=BC=9A</span></span></p>
<p><span style=3D"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Server S1&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 18.18=
1.0.31:1235&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp; |<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp; ^&nbsp; Session 1 (A-S1)&nbsp; ^&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&=
nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 18.=
181.0.31:1235&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;<br>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; v 155.99.25.11:62000=
 v&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NAT<br>&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 155.99.25.11<br>&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^&nbsp; Session 1 (A-S1)&nbsp; ^&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; |&nbsp; 18.181.0.31:1235&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp; |&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 v&nbsp;&nbsp; 10.0.0.1:1234&nbsp;&nbsp;&nbsp; v&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp; |&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp; |<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp; Client A<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.0.0.1:1234</span></=
p>
<p>&nbsp;</p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E6=9C=89=E4=B8=80=E4=B8=AA=E7=A7=81=E6=9C=89=E7=BD=91=E7=BB=
=9C10.*.*.*=EF=BC=8CClient A=E6=98=AF=E5=85=B6=E4=B8=AD=E7=9A=84=E4=B8=80=
=E5=8F=B0=E8=AE=A1=E7=AE=97=E6=9C=BA=EF=BC=8C=E8=BF=99=E4=B8=AA=E7=BD=91=E7=
=BB=9C=E7=9A=84=E7=BD=91=E5=85=B3=EF=BC=88=E4=B8=80=E4=B8=AANAT=E8=AE=BE=E5=
=A4=87=EF=BC=89=E7=9A=84=E5=A4=96=E7=BD=91IP=E6=98=AF155.99.25.11(=E5=BA=94=
=E8=AF=A5=E8=BF=98=E6=9C=89=E4=B8=80=E4=B8=AA=E5=86=85=E7=BD=91=E7=9A=84IP=
=E5=9C=B0=E5=9D=80=EF=BC=8C=E6=AF=94=E5=A6=8210.0.0.10)=E3=80=82=E5=A6=82=
=E6=9E=9CClient A=E4=B8=AD=E7=9A=84=E6=9F=90=E4=B8=AA=E8=BF=9B=E7=A8=8B=EF=
=BC=88=E8=BF=99=E4=B8=AA=E8=BF=9B=E7=A8=8B=E5=88=9B=E5=BB=BA=E4=BA=86=E4=B8=
=80=E4=B8=AAUDP Socket,=E8=BF=99=E4=B8=AASocket=E7=BB=91=E5=AE=9A1234=E7=AB=
=AF=E5=8F=A3=EF=BC=89=E6=83=B3=E8=AE=BF=E9=97=AE=E5=A4=96=E7=BD=91=E4=B8=BB=
=E6=9C=BA18.181.0.31=E7=9A=841235=E7=AB=AF=E5=8F=A3=EF=BC=8C=E9=82=A3=E4=B9=
=88=E5=BD=93=E6=95=B0=E6=8D=AE=E5=8C=85=E9=80=9A=E8=BF=87NAT=E6=97=B6=E4=BC=
=9A=E5=8F=91=E7=94=9F=E4=BB=80=E4=B9=88=E4=BA=8B=E6=83=85=E5=91=A2=EF=BC=9F=
</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E9=A6=96=E5=85=88NAT=E4=BC=9A=E6=94=B9=E5=8F=98=E8=BF=99=E4=
=B8=AA=E6=95=B0=E6=8D=AE=E5=8C=85=E7=9A=84=E5=8E=9FIP=E5=9C=B0=E5=9D=80=EF=
=BC=8C=E6=94=B9=E4=B8=BA155.99.25.11=E3=80=82=E6=8E=A5=E7=9D=80NAT=E4=BC=9A=
=E4=B8=BA=E8=BF=99=E4=B8=AA=E4=BC=A0=E8=BE=93=E5=88=9B=E5=BB=BA=E4=B8=80=E4=
=B8=AASession=EF=BC=88Session=E6=98=AF=E4=B8=80=E4=B8=AA=E6=8A=BD=E8=B1=A1=
=E7=9A=84=E6=A6=82=E5=BF=B5=EF=BC=8C=E5=A6=82=E6=9E=9C=E6=98=AFTCP=EF=BC=8C=
=E4=B9=9F=E8=AE=B8Session=E6=98=AF=E7=94=B1=E4=B8=80=E4=B8=AASYN=E5=8C=85=
=E5=BC=80=E5=A7=8B=EF=BC=8C=E4=BB=A5=E4=B8=80=E4=B8=AAFIN=E5=8C=85=E7=BB=93=
=E6=9D=9F=E3=80=82=E8=80=8CUDP=E5=91=A2=EF=BC=8C=E4=BB=A5=E8=BF=99=E4=B8=AA=
IP=E7=9A=84=E8=BF=99=E4=B8=AA=E7=AB=AF=E5=8F=A3=E7=9A=84=E7=AC=AC=E4=B8=80=
=E4=B8=AAUDP=E5=BC=80=E5=A7=8B=EF=BC=8C=E7=BB=93=E6=9D=9F=E5=91=A2=EF=BC=8C=
=E5=91=B5=E5=91=B5=EF=BC=8C=E4=B9=9F=E8=AE=B8=E6=98=AF=E5=87=A0=E5=88=86=E9=
=92=9F=EF=BC=8C=E4=B9=9F=E8=AE=B8=E6=98=AF=E5=87=A0=E5=B0=8F=E6=97=B6=EF=BC=
=8C=E8=BF=99=E8=A6=81=E7=9C=8B=E5=85=B7=E4=BD=93=E7=9A=84=E5=AE=9E=E7=8E=B0=
=E4=BA=86=EF=BC=89=E5=B9=B6=E4=B8=94=E7=BB=99=E8=BF=99=E4=B8=AASession=E5=
=88=86=E9=85=8D=E4=B8=80=E4=B8=AA=E7=AB=AF=E5=8F=A3=EF=BC=8C=E6=AF=94=E5=A6=
=8262000=EF=BC=8C=E7=84=B6=E5=90=8E=E6=94=B9=E5=8F=98=E8=BF=99=E4=B8=AA=E6=
=95=B0=E6=8D=AE=E5=8C=85=E7=9A=84=E6=BA=90=E7=AB=AF=E5=8F=A3=E4=B8=BA62000=
=E3=80=82=E6=89=80=E4=BB=A5=E6=9C=AC=E6=9D=A5=E6=98=AF=EF=BC=8810.0.0.1:123=
4-&gt;18.181.0.31:1235=EF=BC=89=E7=9A=84=E6=95=B0=E6=8D=AE=E5=8C=85=E5=88=
=B0=E4=BA=86=E4=BA=92=E8=81=94=E7=BD=91=E4=B8=8A=E5=8F=98=E4=B8=BA=E4=BA=86=
=EF=BC=88155.99.25.11:62000-&gt;18.181.0.31:1235=EF=BC=89=E3=80=82</span></=
span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E4=B8=80=E6=97=A6NAT=E5=88=9B=E5=BB=BA=E4=BA=86=E4=B8=80=E4=
=B8=AASession=E5=90=8E=EF=BC=8CNAT=E4=BC=9A=E8=AE=B0=E4=BD=8F62000=E7=AB=AF=
=E5=8F=A3=E5=AF=B9=E5=BA=94=E7=9A=84=E6=98=AF10.0.0.1=E7=9A=841234=E7=AB=AF=
=E5=8F=A3=EF=BC=8C=E4=BB=A5=E5=90=8E=E4=BB=8E18.181.0.31=E5=8F=91=E9=80=81=
=E5=88=B062000=E7=AB=AF=E5=8F=A3=E7=9A=84=E6=95=B0=E6=8D=AE=E4=BC=9A=E8=A2=
=ABNAT=E8=87=AA=E5=8A=A8=E7=9A=84=E8=BD=AC=E5=8F=91=E5=88=B010.0.0.1=E4=B8=
=8A=E3=80=82=EF=BC=88=E6=B3=A8=E6=84=8F=EF=BC=9A=E8=BF=99=E9=87=8C=E6=98=AF=
=E8=AF=B418.181.0.31=E5=8F=91=E9=80=81=E5=88=B062000=E7=AB=AF=E5=8F=A3=E7=
=9A=84=E6=95=B0=E6=8D=AE=E4=BC=9A=E8=A2=AB=E8=BD=AC=E5=8F=91=EF=BC=8C=E5=85=
=B6=E4=BB=96=E7=9A=84IP=E5=8F=91=E9=80=81=E5=88=B0=E8=BF=99=E4=B8=AA=E7=AB=
=AF=E5=8F=A3=E7=9A=84=E6=95=B0=E6=8D=AE=E5=B0=86=E8=A2=ABNAT=E6=8A=9B=E5=BC=
=83=EF=BC=89=E8=BF=99=E6=A0=B7Client A=E5=B0=B1=E4=B8=8EServer S1=E5=BB=BA=
=E7=AB=8B=E4=BB=A5=E4=BA=86=E4=B8=80=E4=B8=AA=E8=BF=9E=E6=8E=A5=E3=80=82</s=
pan></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;"><br></=
span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E5=91=B5=E5=91=B5=EF=BC=8C=E4=B8=8A=E9=9D=A2=E7=9A=84=E5=9F=
=BA=E7=A1=80=E7=9F=A5=E8=AF=86=E5=8F=AF=E8=83=BD=E5=BE=88=E5=A4=9A=E4=BA=BA=
=E9=83=BD=E7=9F=A5=E9=81=93=E4=BA=86=EF=BC=8C=E9=82=A3=E4=B9=88=E4=B8=8B=E9=
=9D=A2=E6=98=AF=E5=85=B3=E9=94=AE=E7=9A=84=E9=83=A8=E5=88=86=E4=BA=86=E3=80=
=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E7=9C=8B=E7=9C=8B=E4=B8=8B=E9=9D=A2=E7=9A=84=E6=83=85=E5=86=
=B5=EF=BC=9A</span></span></p>
<p><span style=3D"">&nbsp;&nbsp; &nbsp;Server S1&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Server S2<br>&nbsp;18.181.0.31:1235=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp; 138.76.29.7:1235<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +----------------------+----------=
------------+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>&nbsp;&nbsp; ^&nbsp; S=
ession 1 (A-S1)&nbsp; ^&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp; ^&nbsp; Session 2 (A-S2)&nbsp; ^<br>&nbsp;&nbsp; |&nbsp; 18.181.=
0.31:1235&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp; |&nbsp; 138.76.29.7:1235&nbsp; |<br>&nbsp;&nbsp; v 155.99.25.11:62000 =
v&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; v 155.99.25=
.11:62000 v<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cone NAT<br=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
; 155.99.25.11<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>&nbsp;&nbsp; ^&nbsp; =
Session 1 (A-S1)&nbsp; ^&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; ^&nbsp; Session 2 (A-S2)&nbsp; ^<br>&nbsp;&nbsp; |&nbsp; 18.181=
.0.31:1235&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp; |&nbsp; 138.76.29.7:1235&nbsp; |<br>&nbsp;&nbsp; v&nbsp;&nbsp; 10.0.0=
.1:1234&nbsp;&nbsp;&nbsp; v&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; v&nbsp;&nbsp; 10.0.0.1:1234&nbsp;&nbsp;&nbsp; v<br>&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp; |<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Client A<br>&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.0.0.1:1234</span></p>
<p>&nbsp;</p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E6=8E=A5=E4=B8=8A=E9=9D=A2=E7=9A=84=E4=BE=8B=E5=AD=90=EF=BC=
=8C=E5=A6=82=E6=9E=9CClient A=E7=9A=84=E5=8E=9F=E6=9D=A5=E9=82=A3=E4=B8=AAS=
ocket(=E7=BB=91=E5=AE=9A=E4=BA=861234=E7=AB=AF=E5=8F=A3=E7=9A=84=E9=82=A3=
=E4=B8=AAUDP Socket)=E5=8F=88=E6=8E=A5=E7=9D=80=E5=90=91=E5=8F=A6=E5=A4=96=
=E4=B8=80=E4=B8=AAServer S2=E5=8F=91=E9=80=81=E4=BA=86=E4=B8=80=E4=B8=AAUDP=
=E5=8C=85=EF=BC=8C=E9=82=A3=E4=B9=88=E8=BF=99=E4=B8=AAUDP=E5=8C=85=E5=9C=A8=
=E9=80=9A=E8=BF=87NAT=E6=97=B6=E4=BC=9A=E6=80=8E=E4=B9=88=E6=A0=B7=E5=91=A2=
=EF=BC=9F</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E8=BF=99=E6=97=B6=E5=8F=AF=E8=83=BD=E4=BC=9A=E6=9C=89=E4=B8=
=A4=E7=A7=8D=E6=83=85=E5=86=B5=E5=8F=91=E7=94=9F=EF=BC=8C=E4=B8=80=E7=A7=8D=
=E6=98=AFNAT=E5=86=8D=E6=AC=A1=E5=88=9B=E5=BB=BA=E4=B8=80=E4=B8=AASession=
=EF=BC=8C=E5=B9=B6=E4=B8=94=E5=86=8D=E6=AC=A1=E4=B8=BA=E8=BF=99=E4=B8=AASes=
sion=E5=88=86=E9=85=8D=E4=B8=80=E4=B8=AA=E7=AB=AF=E5=8F=A3=E5=8F=B7=EF=BC=
=88=E6=AF=94=E5=A6=82=EF=BC=9A62001=EF=BC=89=E3=80=82=E5=8F=A6=E5=A4=96=E4=
=B8=80=E7=A7=8D=E6=98=AFNAT=E5=86=8D=E6=AC=A1=E5=88=9B=E5=BB=BA=E4=B8=80=E4=
=B8=AASession=EF=BC=8C=E4=BD=86=E6=98=AF=E4=B8=8D=E4=BC=9A=E6=96=B0=E5=88=
=86=E9=85=8D=E4=B8=80=E4=B8=AA=E7=AB=AF=E5=8F=A3=E5=8F=B7=EF=BC=8C=E8=80=8C=
=E6=98=AF=E7=94=A8=E5=8E=9F=E6=9D=A5=E5=88=86=E9=85=8D=E7=9A=84=E7=AB=AF=E5=
=8F=A3=E5=8F=B762000=E3=80=82=E5=89=8D=E4=B8=80=E7=A7=8DNAT=E5=8F=AB=E5=81=
=9ASymmetric NAT=EF=BC=8C=E5=90=8E=E4=B8=80=E7=A7=8D=E5=8F=AB=E5=81=9ACone =
NAT=E3=80=82=E6=88=91=E4=BB=AC=E6=9C=9F=E6=9C=9B=E6=88=91=E4=BB=AC=E7=9A=84=
NAT=E6=98=AF=E7=AC=AC=E4=BA=8C=E7=A7=8D=EF=BC=8C=E5=91=B5=E5=91=B5=EF=BC=8C=
=E5=A6=82=E6=9E=9C=E4=BD=A0=E7=9A=84NAT=E5=88=9A=E5=A5=BD=E6=98=AF=E7=AC=AC=
=E4=B8=80=E7=A7=8D=EF=BC=8C=E9=82=A3=E4=B9=88=E5=BE=88=E5=8F=AF=E8=83=BD=E4=
=BC=9A=E6=9C=89=E5=BE=88=E5=A4=9AP2P=E8=BD=AF=E4=BB=B6=E5=A4=B1=E7=81=B5=E3=
=80=82=EF=BC=88=E5=8F=AF=E4=BB=A5=E5=BA=86=E5=B9=B8=E7=9A=84=E6=98=AF=EF=BC=
=8C=E7=8E=B0=E5=9C=A8=E7=BB=9D=E5=A4=A7=E5=A4=9A=E6=95=B0=E7=9A=84NAT=E5=B1=
=9E=E4=BA=8E=E5=90=8E=E8=80=85=EF=BC=8C=E5=8D=B3Cone NAT=EF=BC=89</span></s=
pan></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp;&nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E5=A5=BD=E4=BA=86=EF=BC=8C=E6=88=91=E4=BB=AC=E7=9C=8B=E5=88=
=B0=EF=BC=8C=E9=80=9A=E8=BF=87NAT,=E5=AD=90=E7=BD=91=E5=86=85=E7=9A=84=E8=
=AE=A1=E7=AE=97=E6=9C=BA=E5=90=91=E5=A4=96=E8=BF=9E=E7=BB=93=E6=98=AF=E5=BE=
=88=E5=AE=B9=E6=98=93=E7=9A=84=EF=BC=88NAT=E7=9B=B8=E5=BD=93=E4=BA=8E=E9=80=
=8F=E6=98=8E=E7=9A=84=EF=BC=8C=E5=AD=90=E7=BD=91=E5=86=85=E7=9A=84=E5=92=8C=
=E5=A4=96=E7=BD=91=E7=9A=84=E8=AE=A1=E7=AE=97=E6=9C=BA=E4=B8=8D=E7=94=A8=E7=
=9F=A5=E9=81=93NAT=E7=9A=84=E6=83=85=E5=86=B5=EF=BC=89=E3=80=82</span></spa=
n></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E4=BD=86=E6=98=AF=E5=A6=82=E6=9E=9C=E5=A4=96=E9=83=A8=E7=9A=
=84=E8=AE=A1=E7=AE=97=E6=9C=BA=E6=83=B3=E8=AE=BF=E9=97=AE=E5=AD=90=E7=BD=91=
=E5=86=85=E7=9A=84=E8=AE=A1=E7=AE=97=E6=9C=BA=E5=B0=B1=E6=AF=94=E8=BE=83=E5=
=9B=B0=E9=9A=BE=E4=BA=86=EF=BC=88=E8=80=8C=E8=BF=99=E6=AD=A3=E6=98=AFP2P=E6=
=89=80=E9=9C=80=E8=A6=81=E7=9A=84=EF=BC=89=E3=80=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E9=82=A3=E4=B9=88=E6=88=91=E4=BB=AC=E5=A6=82=E6=9E=9C=E6=83=
=B3=E4=BB=8E=E5=A4=96=E9=83=A8=E5=8F=91=E9=80=81=E4=B8=80=E4=B8=AA=E6=95=B0=
=E6=8D=AE=E6=8A=A5=E7=BB=99=E5=86=85=E7=BD=91=E7=9A=84=E8=AE=A1=E7=AE=97=E6=
=9C=BA=E6=9C=89=E4=BB=80=E4=B9=88=E5=8A=9E=E6=B3=95=E5=91=A2=EF=BC=9F=E9=A6=
=96=E5=85=88=EF=BC=8C=E6=88=91=E4=BB=AC=E5=BF=85=E9=A1=BB=E5=9C=A8=E5=86=85=
=E7=BD=91=E7=9A=84NAT=E4=B8=8A=E6=89=93=E4=B8=8A=E4=B8=80=E4=B8=AA=E2=80=9C=
=E6=B4=9E=E2=80=9D=EF=BC=88=E4=B9=9F=E5=B0=B1=E6=98=AF=E5=89=8D=E9=9D=A2=E6=
=88=91=E4=BB=AC=E8=AF=B4=E7=9A=84=E5=9C=A8NAT=E4=B8=8A=E5=BB=BA=E7=AB=8B=E4=
=B8=80=E4=B8=AASession=EF=BC=89=EF=BC=8C=E8=BF=99=E4=B8=AA=E6=B4=9E=E4=B8=
=8D=E8=83=BD=E7=94=B1=E5=A4=96=E9=83=A8=E6=9D=A5=E6=89=93=EF=BC=8C=E5=8F=AA=
=E8=83=BD=E7=94=B1=E5=86=85=E7=BD=91=E5=86=85=E7=9A=84=E4=B8=BB=E6=9C=BA=E6=
=9D=A5=E6=89=93=E3=80=82=E8=80=8C=E4=B8=94=E8=BF=99=E4=B8=AA=E6=B4=9E=E6=98=
=AF=E6=9C=89=E6=96=B9=E5=90=91=E7=9A=84=EF=BC=8C=E6=AF=94=E5=A6=82=E4=BB=8E=
=E5=86=85=E9=83=A8=E6=9F=90=E5=8F=B0=E4=B8=BB=E6=9C=BA=EF=BC=88=E6=AF=94=E5=
=A6=82=EF=BC=9A192.168.0.10=EF=BC=89=E5=90=91=E5=A4=96=E9=83=A8=E7=9A=84=E6=
=9F=90=E4=B8=AAIP(=E6=AF=94=E5=A6=82=EF=BC=9A219.237.60.1)=E5=8F=91=E9=80=
=81=E4=B8=80=E4=B8=AAUDP=E5=8C=85=EF=BC=8C=E9=82=A3=E4=B9=88=E5=B0=B1=E5=9C=
=A8=E8=BF=99=E4=B8=AA=E5=86=85=E7=BD=91=E7=9A=84NAT=E8=AE=BE=E5=A4=87=E4=B8=
=8A=E6=89=93=E4=BA=86=E4=B8=80=E4=B8=AA=E6=96=B9=E5=90=91=E4=B8=BA219.237.6=
0.1=E7=9A=84=E2=80=9C=E6=B4=9E=E2=80=9D=EF=BC=8C=EF=BC=88=E8=BF=99=E5=B0=B1=
=E6=98=AF=E7=A7=B0=E4=B8=BAUDP Hole Punching=E7=9A=84=E6=8A=80=E6=9C=AF=EF=
=BC=89=E4=BB=A5=E5=90=8E219.237.60.1=E5=B0=B1=E5=8F=AF=E4=BB=A5=E9=80=9A=E8=
=BF=87=E8=BF=99=E4=B8=AA=E6=B4=9E=E4=B8=8E=E5=86=85=E7=BD=91=E7=9A=84192.16=
8.0.10=E8=81=94=E7=B3=BB=E4=BA=86=E3=80=82=EF=BC=88=E4=BD=86=E6=98=AF=E5=85=
=B6=E4=BB=96=E7=9A=84IP=E4=B8=8D=E8=83=BD=E5=88=A9=E7=94=A8=E8=BF=99=E4=B8=
=AA=E6=B4=9E=EF=BC=89=E3=80=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E5=91=B5=E5=91=B5=EF=BC=8C=E7=8E=B0=E5=9C=A8=E8=AF=A5=E8=BD=
=AE=E5=88=B0=E6=88=91=E4=BB=AC=E7=9A=84=E6=AD=A3=E9=A2=98P2P=E4=BA=86=E3=80=
=82=E6=9C=89=E4=BA=86=E4=B8=8A=E9=9D=A2=E7=9A=84=E7=90=86=E8=AE=BA=EF=BC=8C=
=E5=AE=9E=E7=8E=B0=E4=B8=A4=E4=B8=AA=E5=86=85=E7=BD=91=E7=9A=84=E4=B8=BB=E6=
=9C=BA=E9=80=9A=E8=AE=AF=E5=B0=B1=E5=B7=AE=E6=9C=80=E5=90=8E=E4=B8=80=E6=AD=
=A5=E4=BA=86=EF=BC=9A=E9=82=A3=E5=B0=B1=E6=98=AF=E9=B8=A1=E7=94=9F=E8=9B=8B=
=E8=BF=98=E6=98=AF=E8=9B=8B=E7=94=9F=E9=B8=A1=E7=9A=84=E9=97=AE=E9=A2=98=E4=
=BA=86=EF=BC=8C=E4=B8=A4=E8=BE=B9=E9=83=BD=E6=97=A0=E6=B3=95=E4=B8=BB=E5=8A=
=A8=E5=8F=91=E5=87=BA=E8=BF=9E=E6=8E=A5=E8=AF=B7=E6=B1=82=EF=BC=8C=E8=B0=81=
=E4=B9=9F=E4=B8=8D=E7=9F=A5=E9=81=93=E8=B0=81=E7=9A=84=E5=85=AC=E7=BD=91=E5=
=9C=B0=E5=9D=80=EF=BC=8C=E9=82=A3=E6=88=91=E4=BB=AC=E5=A6=82=E4=BD=95=E6=9D=
=A5=E6=89=93=E8=BF=99=E4=B8=AA=E6=B4=9E=E5=91=A2=EF=BC=9F=E6=88=91=E4=BB=AC=
=E9=9C=80=E8=A6=81=E4=B8=80=E4=B8=AA=E4=B8=AD=E9=97=B4=E4=BA=BA=E6=9D=A5=E8=
=81=94=E7=B3=BB=E8=BF=99=E4=B8=A4=E4=B8=AA=E5=86=85=E7=BD=91=E4=B8=BB=E6=9C=
=BA=E3=80=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E7=8E=B0=E5=9C=A8=E6=88=91=E4=BB=AC=E6=9D=A5=E7=9C=8B=E7=9C=
=8B=E4=B8=80=E4=B8=AAP2P=E8=BD=AF=E4=BB=B6=E7=9A=84=E6=B5=81=E7=A8=8B=EF=BC=
=8C=E4=BB=A5=E4=B8=8B=E5=9B=BE=E4=B8=BA=E4=BE=8B=EF=BC=9A</span></span></p>
<p><span style=3D"">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; Server S =EF=BC=88219.237.60.1=EF=BC=89<br>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<b=
r>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p; |<br>&nbsp;&nbsp; +----------------------+----------------------+<br>&nb=
sp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>&nbsp;NAT A (=E5=A4=
=96=E7=BD=91IP:202.187.45.3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NAT B (=E5=A4=96=E7=BD=91=
IP:187.34.1.56)<br>&nbsp;&nbsp; |&nbsp;&nbsp; (=E5=86=85=E7=BD=91IP:192.168=
.0.1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | (=E5=86=85=E7=BD=
=91IP:192.168.0.1)<br>&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 |<br>Client A&nbsp; (192.168.0.20:4000)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Client B (192.168.0.10:40000)</span><=
/p>
<p>&nbsp;</p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;"><br></=
span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E9=A6=96=E5=85=88=EF=BC=8CClient A=E7=99=BB=E5=BD=95=E6=9C=8D=
=E5=8A=A1=E5=99=A8=EF=BC=8CNAT A=E4=B8=BA=E8=BF=99=E6=AC=A1=E7=9A=84Session=
=E5=88=86=E9=85=8D=E4=BA=86=E4=B8=80=E4=B8=AA=E7=AB=AF=E5=8F=A360000=EF=BC=
=8C=E9=82=A3=E4=B9=88Server S=E6=94=B6=E5=88=B0=E7=9A=84Client A=E7=9A=84=
=E5=9C=B0=E5=9D=80=E6=98=AF202.187.45.3:60000=EF=BC=8C=E8=BF=99=E5=B0=B1=E6=
=98=AFClient A=E7=9A=84=E5=A4=96=E7=BD=91=E5=9C=B0=E5=9D=80=E4=BA=86=E3=80=
=82=E5=90=8C=E6=A0=B7=EF=BC=8CClient B=E7=99=BB=E5=BD=95Server S=EF=BC=8CNA=
T B=E7=BB=99=E6=AD=A4=E6=AC=A1Session=E5=88=86=E9=85=8D=E7=9A=84=E7=AB=AF=
=E5=8F=A3=E6=98=AF40000=EF=BC=8C=E9=82=A3=E4=B9=88Server S=E6=94=B6=E5=88=
=B0=E7=9A=84B=E7=9A=84=E5=9C=B0=E5=9D=80=E6=98=AF187.34.1.56:40000=E3=80=82=
</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E6=AD=A4=E6=97=B6=EF=BC=8CClient A=E4=B8=8EClient B=E9=83=BD=
=E5=8F=AF=E4=BB=A5=E4=B8=8EServer S=E9=80=9A=E4=BF=A1=E4=BA=86=E3=80=82=E5=
=A6=82=E6=9E=9CClient A=E6=AD=A4=E6=97=B6=E6=83=B3=E7=9B=B4=E6=8E=A5=E5=8F=
=91=E9=80=81=E4=BF=A1=E6=81=AF=E7=BB=99Client B=EF=BC=8C=E9=82=A3=E4=B9=88=
=E4=BB=96=E5=8F=AF=E4=BB=A5=E4=BB=8EServer S=E9=82=A3=E5=84=BF=E8=8E=B7=E5=
=BE=97B=E7=9A=84=E5=85=AC=E7=BD=91=E5=9C=B0=E5=9D=80187.34.1.56:40000=EF=BC=
=8C=E6=98=AF=E4=B8=8D=E6=98=AFClient A=E5=90=91=E8=BF=99=E4=B8=AA=E5=9C=B0=
=E5=9D=80=E5=8F=91=E9=80=81=E4=BF=A1=E6=81=AFClient B=E5=B0=B1=E8=83=BD=E6=
=94=B6=E5=88=B0=E4=BA=86=E5=91=A2=EF=BC=9F=E7=AD=94=E6=A1=88=E6=98=AF=E4=B8=
=8D=E8=A1=8C=EF=BC=8C=E5=9B=A0=E4=B8=BA=E5=A6=82=E6=9E=9C=E8=BF=99=E6=A0=B7=
=E5=8F=91=E9=80=81=E4=BF=A1=E6=81=AF=EF=BC=8CNAT B=E4=BC=9A=E5=B0=86=E8=BF=
=99=E4=B8=AA=E4=BF=A1=E6=81=AF=E4=B8=A2=E5=BC=83=EF=BC=88=E5=9B=A0=E4=B8=BA=
=E8=BF=99=E6=A0=B7=E7=9A=84=E4=BF=A1=E6=81=AF=E6=98=AF=E4=B8=8D=E8=AF=B7=E8=
=87=AA=E6=9D=A5=E7=9A=84=EF=BC=8C=E4=B8=BA=E4=BA=86=E5=AE=89=E5=85=A8=EF=BC=
=8C=E5=A4=A7=E5=A4=9A=E6=95=B0NAT=E9=83=BD=E4=BC=9A=E6=89=A7=E8=A1=8C=E4=B8=
=A2=E5=BC=83=E5=8A=A8=E4=BD=9C=EF=BC=89=E3=80=82=E7=8E=B0=E5=9C=A8=E6=88=91=
=E4=BB=AC=E9=9C=80=E8=A6=81=E7=9A=84=E6=98=AF=E5=9C=A8NAT B=E4=B8=8A=E6=89=
=93=E4=B8=80=E4=B8=AA=E6=96=B9=E5=90=91=E4=B8=BA202.187.45.3=EF=BC=88=E5=8D=
=B3Client A=E7=9A=84=E5=A4=96=E7=BD=91=E5=9C=B0=E5=9D=80=EF=BC=89=E7=9A=84=
=E6=B4=9E=EF=BC=8C=E9=82=A3=E4=B9=88Client A=E5=8F=91=E9=80=81=E5=88=B0187.=
34.1.56:40000=E7=9A=84=E4=BF=A1=E6=81=AF,Client B=E5=B0=B1=E8=83=BD=E6=94=
=B6=E5=88=B0=E4=BA=86=E3=80=82=E8=BF=99=E4=B8=AA=E6=89=93=E6=B4=9E=E5=91=BD=
=E4=BB=A4=E7=94=B1=E8=B0=81=E6=9D=A5=E5=8F=91=E5=91=A2=EF=BC=8C=E5=91=B5=E5=
=91=B5=EF=BC=8C=E5=BD=93=E7=84=B6=E6=98=AFServer S=E3=80=82</span></span></=
p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E6=80=BB=E7=BB=93=E4=B8=80=E4=B8=8B=E8=BF=99=E4=B8=AA=E8=BF=
=87=E7=A8=8B=EF=BC=9A=E5=A6=82=E6=9E=9CClient A=E6=83=B3=E5=90=91Client B=
=E5=8F=91=E9=80=81=E4=BF=A1=E6=81=AF=EF=BC=8C=E9=82=A3=E4=B9=88Client A=E5=
=8F=91=E9=80=81=E5=91=BD=E4=BB=A4=E7=BB=99Server S=EF=BC=8C=E8=AF=B7=E6=B1=
=82Server S=E5=91=BD=E4=BB=A4Client B=E5=90=91Client A=E6=96=B9=E5=90=91=E6=
=89=93=E6=B4=9E=E3=80=82=E5=91=B5=E5=91=B5=EF=BC=8C=E6=98=AF=E4=B8=8D=E6=98=
=AF=E5=BE=88=E7=BB=95=E5=8F=A3=EF=BC=8C=E4=B8=8D=E8=BF=87=E6=B2=A1=E5=85=B3=
=E7=B3=BB=EF=BC=8C=E6=83=B3=E4=B8=80=E6=83=B3=E5=B0=B1=E5=BE=88=E6=B8=85=E6=
=A5=9A=E4=BA=86=EF=BC=8C=E4=BD=95=E5=86=B5=E8=BF=98=E6=9C=89=E6=BA=90=E4=BB=
=A3=E7=A0=81=E5=91=A2=EF=BC=88=E4=BE=AF=E8=80=81=E5=B8=88=E8=AF=B4=E8=BF=87=
=EF=BC=9A=E5=9C=A8=E6=BA=90=E4=BB=A3=E7=A0=81=E9=9D=A2=E5=89=8D=E6=B2=A1=E6=
=9C=89=E7=A7=98=E5=AF=86 8=EF=BC=89=EF=BC=89=EF=BC=8C=E7=84=B6=E5=90=8EClie=
nt A=E5=B0=B1=E5=8F=AF=E4=BB=A5=E9=80=9A=E8=BF=87Client B=E7=9A=84=E5=A4=96=
=E7=BD=91=E5=9C=B0=E5=9D=80=E4=B8=8EClient B=E9=80=9A=E4=BF=A1=E4=BA=86=E3=
=80=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E6=B3=A8=E6=84=8F=EF=BC=9A=E4=BB=A5=E4=B8=8A=E8=BF=87=E7=A8=
=8B=E5=8F=AA=E9=80=82=E5=90=88=E4=BA=8ECone NAT=E7=9A=84=E6=83=85=E5=86=B5=
=EF=BC=8C=E5=A6=82=E6=9E=9C=E6=98=AFSymmetric NAT=EF=BC=8C=E9=82=A3=E4=B9=
=88=E5=BD=93Client B=E5=90=91Client A=E6=89=93=E6=B4=9E=E7=9A=84=E7=AB=AF=
=E5=8F=A3=E5=B7=B2=E7=BB=8F=E9=87=8D=E6=96=B0=E5=88=86=E9=85=8D=E4=BA=86=EF=
=BC=8CClient B=E5=B0=86=E6=97=A0=E6=B3=95=E7=9F=A5=E9=81=93=E8=BF=99=E4=B8=
=AA=E7=AB=AF=E5=8F=A3=EF=BC=88=E5=A6=82=E6=9E=9CSymmetric NAT=E7=9A=84=E7=
=AB=AF=E5=8F=A3=E6=98=AF=E9=A1=BA=E5=BA=8F=E5=88=86=E9=85=8D=E7=9A=84=EF=BC=
=8C=E9=82=A3=E4=B9=88=E6=88=91=E4=BB=AC=E6=88=96=E8=AE=B8=E5=8F=AF=E4=BB=A5=
=E7=8C=9C=E6=B5=8B=E8=BF=99=E4=B8=AA=E7=AB=AF=E5=8F=A3=E5=8F=B7=EF=BC=8C=E5=
=8F=AF=E6=98=AF=E7=94=B1=E4=BA=8E=E5=8F=AF=E8=83=BD=E5=AF=BC=E8=87=B4=E5=A4=
=B1=E8=B4=A5=E7=9A=84=E5=9B=A0=E7=B4=A0=E5=A4=AA=E5=A4=9A=EF=BC=8C=E6=88=91=
=E4=BB=AC=E4=B8=8D=E6=8E=A8=E8=8D=90=E8=BF=99=E7=A7=8D=E7=8C=9C=E6=B5=8B=E7=
=AB=AF=E5=8F=A3=E7=9A=84=E6=96=B9=E6=B3=95=EF=BC=89=E3=80=82</span></span><=
/p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E4=B8=8B=E9=9D=A2=E6=98=AF=E4=B8=80=E4=B8=AA=E6=A8=A1=E6=8B=
=9FP2P=E8=81=8A=E5=A4=A9=E7=9A=84=E8=BF=87=E7=A8=8B=E7=9A=84=E6=BA=90=E4=BB=
=A3=E7=A0=81=EF=BC=8C=E8=BF=87=E7=A8=8B=E5=BE=88=E7=AE=80=E5=8D=95=EF=BC=8C=
P2PServer=E8=BF=90=E8=A1=8C=E5=9C=A8=E4=B8=80=E4=B8=AA=E6=8B=A5=E6=9C=89=E5=
=85=AC=E7=BD=91IP=E7=9A=84=E8=AE=A1=E7=AE=97=E6=9C=BA=E4=B8=8A=EF=BC=8CP2PC=
lient=E8=BF=90=E8=A1=8C=E5=9C=A8=E4=B8=A4=E4=B8=AA=E4=B8=8D=E5=90=8C=E7=9A=
=84NAT=E5=90=8E=EF=BC=88=E6=B3=A8=E6=84=8F=EF=BC=8C=E5=A6=82=E6=9E=9C=E4=B8=
=A4=E4=B8=AA=E5=AE=A2=E6=88=B7=E7=AB=AF=E8=BF=90=E8=A1=8C=E5=9C=A8=E4=B8=80=
=E4=B8=AANAT=E5=90=8E=EF=BC=8C=E6=9C=AC=E7=A8=8B=E5=BA=8F=E5=BE=88=E5=8F=AF=
=E8=83=BD=E4=B8=8D=E8=83=BD=E8=BF=90=E8=A1=8C=E6=AD=A3=E5=B8=B8=EF=BC=8C=E8=
=BF=99=E5=8F=96=E5=86=B3=E4=BA=8E=E4=BD=A0=E7=9A=84NAT=E6=98=AF=E5=90=A6=E6=
=94=AF=E6=8C=81loopback translation=EF=BC=8C=E8=AF=A6=E8=A7=81http://midcom=
-p2p.sourceforge.net/draft-ford-midcom-p2p-01.txt=EF=BC=8C=E5=BD=93=E7=84=
=B6=EF=BC=8C=E6=AD=A4=E9=97=AE=E9=A2=98=E5=8F=AF=E4=BB=A5=E9=80=9A=E8=BF=87=
=E5=8F=8C=E6=96=B9=E5=85=88=E5=B0=9D=E8=AF=95=E8=BF=9E=E6=8E=A5=E5=AF=B9=E6=
=96=B9=E7=9A=84=E5=86=85=E7=BD=91IP=E6=9D=A5=E8=A7=A3=E5=86=B3=EF=BC=8C=E4=
=BD=86=E6=98=AF=E8=BF=99=E4=B8=AA=E4=BB=A3=E7=A0=81=E5=8F=AA=E6=98=AF=E4=B8=
=BA=E4=BA=86=E9=AA=8C=E8=AF=81=E5=8E=9F=E7=90=86=EF=BC=8C=E5=B9=B6=E6=B2=A1=
=E6=9C=89=E5=A4=84=E7=90=86=E8=BF=99=E4=BA=9B=E9=97=AE=E9=A2=98=EF=BC=89=EF=
=BC=8C=E5=90=8E=E7=99=BB=E5=BD=95=E7=9A=84=E8=AE=A1=E7=AE=97=E6=9C=BA=E5=8F=
=AF=E4=BB=A5=E8=8E=B7=E5=BE=97=E5=85=88=E7=99=BB=E5=BD=95=E8=AE=A1=E7=AE=97=
=E6=9C=BA=E7=9A=84=E7=94=A8=E6=88=B7=E5=90=8D=EF=BC=8C=E5=90=8E=E7=99=BB=E5=
=BD=95=E7=9A=84=E8=AE=A1=E7=AE=97=E6=9C=BA=E9=80=9A=E8=BF=87send username m=
essage=E7=9A=84=E6=A0=BC=E5=BC=8F=E6=9D=A5=E5=8F=91=E9=80=81=E6=B6=88=E6=81=
=AF=E3=80=82=E5=A6=82=E6=9E=9C=E5=8F=91=E9=80=81=E6=88=90=E5=8A=9F=EF=BC=8C=
=E8=AF=B4=E6=98=8E=E4=BD=A0=E5=B7=B2=E5=8F=96=E5=BE=97=E4=BA=86=E7=9B=B4=E6=
=8E=A5=E4=B8=8E=E5=AF=B9=E6=96=B9=E8=BF=9E=E6=8E=A5=E7=9A=84=E6=88=90=E5=8A=
=9F=E3=80=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E7=A8=8B=E5=BA=8F=E7=8E=B0=E5=9C=A8=E6=94=AF=E6=8C=81=E4=B8=
=89=E4=B8=AA=E5=91=BD=E4=BB=A4=EF=BC=9Asend , getu , exit</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;send=E6=A0=BC=E5=BC=8F=EF=BC=9Asend username message</span></s=
pan></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E5=8A=9F=E8=83=BD=EF=BC=9A=E5=8F=91=E9=80=81=E4=BF=A1=E6=81=
=AF=E7=BB=99username</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;getu=E6=A0=BC=E5=BC=8F=EF=BC=9Agetu</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E5=8A=9F=E8=83=BD=EF=BC=9A=E8=8E=B7=E5=BE=97=E5=BD=93=E5=89=
=8D=E6=9C=8D=E5=8A=A1=E5=99=A8=E7=94=A8=E6=88=B7=E5=88=97=E8=A1=A8</span></=
span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;exit=E6=A0=BC=E5=BC=8F=EF=BC=9Aexit</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E5=8A=9F=E8=83=BD=EF=BC=9A=E6=B3=A8=E9=94=80=E4=B8=8E=E6=9C=
=8D=E5=8A=A1=E5=99=A8=E7=9A=84=E8=BF=9E=E6=8E=A5=EF=BC=88=E6=9C=8D=E5=8A=A1=
=E5=99=A8=E4=B8=8D=E4=BC=9A=E8=87=AA=E5=8A=A8=E7=9B=91=E6=B5=8B=E5=AE=A2=E6=
=88=B7=E6=98=AF=E5=90=A6=E5=90=8A=E7=BA=BF=EF=BC=89</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp; &nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E4=BB=A3=E7=A0=81=E5=BE=88=E7=9F=AD=EF=BC=8C=E7=9B=B8=E4=BF=
=A1=E5=BE=88=E5=AE=B9=E6=98=93=E6=87=82=EF=BC=8C=E5=A6=82=E6=9E=9C=E6=9C=89=
=E4=BB=80=E4=B9=88=E9=97=AE=E9=A2=98=EF=BC=8C=E5=8F=AF=E4=BB=A5=E7=BB=99=E6=
=88=91=E5=8F=91=E9=82=AE=E4=BB=B6zhouhuis22@sina.com &nbsp;=E6=88=96=E8=80=
=85=E5=9C=A8CSDN=E4=B8=8A=E5=8F=91=E9=80=81=E7=9F=AD=E6=B6=88=E6=81=AF=E3=
=80=82=E5=90=8C=E6=97=B6=EF=BC=8C=E6=AC=A2=E8=BF=8E=E8=BD=AC=E5=8F=91=E6=AD=
=A4=E6=96=87=EF=BC=8C=E4=BD=86=E5=B8=8C=E6=9C=9B=E4=BF=9D=E7=95=99=E4=BD=9C=
=E8=80=85=E7=89=88=E6=9D=838-=EF=BC=89=E3=80=82</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;</span></span></p>
<p><span style=3D"font-size: small;"><span style=3D"color: #333399;">&nbsp;=
&nbsp; &nbsp;=E6=9C=80=E5=90=8E=E6=84=9F=E8=B0=A2CSDN=E7=BD=91=E5=8F=8B Pig=
gyXP =E5=92=8C Seilfer=E7=9A=84=E6=B5=8B=E8=AF=95=E5=B8=AE=E5=8A=A9</span><=
/span></p>
<p>&nbsp;</p>
<div class=3D"dp-highlighter" id=3D""><div class=3D"bar"><div class=3D"tool=
s">Cpp=E4=BB=A3=E7=A0=81 <embed wmode=3D"transparent" src=3D"http://andylin=
02.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width=3D"14" =
height=3D"15" flashvars=3D"clipboard=3D%2F%2FP2PServer.c%0A%2F*%20P2P%20%E7=
%A8%8B%E5%BA%8F%E6%9C%8D%E5%8A%A1%E7%AB%AF%0A*%20%0A*%20%E6%96%87%E4%BB%B6%=
E5%90%8D%EF%BC%9AP2PServer.c%0A*%0A*%20%E6%97%A5%E6%9C%9F%EF%BC%9A2004-5-21=
%0A*%0A*%20%E4%BD%9C%E8%80%85%EF%BC%9Ashootingstars(zhouhuis22%40sina.com)%=
0A*%0A*%2F%0A%23pragma%20comment(lib%2C%20%22ws2_32.lib%22)%0A%0A%23include=
%20%22windows.h%22%0A%23include%20%22..%5Cproto.h%22%0A%23include%20%22..%5=
CException.h%22%0A%0AUserList%20ClientList%3B%0A%0Avoid%20InitWinSock()%0A%=
7B%0A%09WSADATA%20wsaData%3B%0A%0A%09if%20(WSAStartup(MAKEWORD(2%2C%202)%2C=
%20%26wsaData)%20!%3D%200)%0A%09%7B%0A%09%09printf(%22Windows%20sockets%202=
.2%20startup%22)%3B%0A%09%09throw%20Exception(%22%22)%3B%0A%09%7D%0A%09else=
%7B%0A%09%09printf(%22Using%20%25s%20(Status%3A%20%25s)%5Cn%22%2C%0A%09%09%=
09wsaData.szDescription%2C%20wsaData.szSystemStatus)%3B%0A%09%09printf(%22w=
ith%20API%20versions%20%25d.%25d%20to%20%25d.%25d%5Cn%5Cn%22%2C%0A%09%09%09=
LOBYTE(wsaData.wVersion)%2C%20HIBYTE(wsaData.wVersion)%2C%0A%09%09%09LOBYTE=
(wsaData.wHighVersion)%2C%20HIBYTE(wsaData.wHighVersion))%3B%0A%0A%09%7D%0A=
%7D%0A%0ASOCKET%20mksock(int%20type)%0A%7B%0A%09SOCKET%20sock%20%3D%20socke=
t(AF_INET%2C%20type%2C%200)%3B%0A%09if%20(sock%20%3C%200)%0A%09%7B%0A%09%09=
printf(%22create%20socket%20error%22)%3B%0A%09%09throw%20Exception(%22%22)%=
3B%0A%09%7D%0A%09return%20sock%3B%0A%7D%0A%0AstUserListNode%20GetUser(char%=
20*username)%0A%7B%0A%09for(UserList%3A%3Aiterator%20UserIterator%3DClientL=
ist.begin()%3B%0A%09%09UserIterator!%3DClientList.end()%3B%0A%09%09%2B%2BUs=
erIterator)%0A%09%7B%0A%09%09if(%20strcmp(%20((*UserIterator)-%3EuserName)%=
2C%20username)%20%3D%3D%200%20)%0A%09%09%09return%20*(*UserIterator)%3B%0A%=
09%7D%0A%09throw%20Exception(%22not%20find%20this%20user%22)%3B%0A%7D%0A%0A=
int%20main(int%20argc%2C%20char*%20argv%5B%5D)%0A%7B%0A%09try%7B%0A%09%09In=
itWinSock()%3B%0A%0A%09%09SOCKET%20PrimaryUDP%3B%0A%09%09PrimaryUDP%20%3D%2=
0mksock(SOCK_DGRAM)%3B%0A%0A%09%09sockaddr_in%20local%3B%0A%09%09local.sin_=
family%3DAF_INET%3B%0A%09%09local.sin_port%3D%20htons(SERVER_PORT)%3B%20%0A=
%09%09local.sin_addr.s_addr%20%3D%20htonl(INADDR_ANY)%3B%0A%09%09int%20nRes=
ult%3Dbind(PrimaryUDP%2C(sockaddr*)%26local%2Csizeof(sockaddr))%3B%0A%09%09=
if(nResult%3D%3DSOCKET_ERROR)%0A%09%09%09throw%20Exception(%22bind%20error%=
22)%3B%0A%0A%09%09sockaddr_in%20sender%3B%0A%09%09stMessage%20recvbuf%3B%0A=
%09%09memset(%26recvbuf%2C0%2Csizeof(stMessage))%3B%0A%0A%09%09%2F%2F%20%E5=
%BC%80%E5%A7%8B%E4%B8%BB%E5%BE%AA%E7%8E%AF.%0A%09%09%2F%2F%20%E4%B8%BB%E5%B=
E%AA%E7%8E%AF%E8%B4%9F%E8%B4%A3%E4%B8%8B%E9%9D%A2%E5%87%A0%E4%BB%B6%E4%BA%8=
B%E6%83%85%3A%0A%09%09%2F%2F%20%E4%B8%80%3A%E8%AF%BB%E5%8F%96%E5%AE%A2%E6%8=
8%B7%E7%AB%AF%E7%99%BB%E9%99%86%E5%92%8C%E7%99%BB%E5%87%BA%E6%B6%88%E6%81%A=
F%2C%E8%AE%B0%E5%BD%95%E5%AE%A2%E6%88%B7%E5%88%97%E8%A1%A8%0A%09%09%2F%2F%2=
0%E4%BA%8C%3A%E8%BD%AC%E5%8F%91%E5%AE%A2%E6%88%B7p2p%E8%AF%B7%E6%B1%82%0A%0=
9%09for(%3B%3B)%0A%09%09%7B%0A%09%09%09int%20dwSender%20%3D%20sizeof(sender=
)%3B%0A%09%09%09int%20ret%20%3D%20recvfrom(PrimaryUDP%2C%20(char%20*)%26rec=
vbuf%2C%20sizeof(stMessage)%2C%200%2C%20(sockaddr%20*)%26sender%2C%20%26dwS=
ender)%3B%0A%09%09%09if(ret%20%3C%3D%200)%0A%09%09%09%7B%0A%09%09%09%09prin=
tf(%22recv%20error%22)%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%09%09=
%09else%0A%09%09%09%7B%0A%09%09%09%09int%20messageType%20%3D%20recvbuf.iMes=
sageType%3B%0A%09%09%09%09switch(messageType)%7B%0A%09case%20LOGIN%3A%0A%09=
%09%7B%0A%09%09%09%2F%2F%20%20%E5%B0%86%E8%BF%99%E4%B8%AA%E7%94%A8%E6%88%B7=
%E7%9A%84%E4%BF%A1%E6%81%AF%E8%AE%B0%E5%BD%95%E5%88%B0%E7%94%A8%E6%88%B7%E5=
%88%97%E8%A1%A8%E4%B8%AD%0A%09%09%09printf(%22has%20a%20user%20login%20%3A%=
20%25s%5Cn%22%2C%20recvbuf.message.loginmember.userName)%3B%0A%09%09%09stUs=
erListNode%20*currentuser%20%3D%20new%20stUserListNode()%3B%0A%09%09%09strc=
py(currentuser-%3EuserName%2C%20recvbuf.message.loginmember.userName)%3B%0A=
%09%09%09currentuser-%3Eip%20%3D%20ntohl(sender.sin_addr.S_un.S_addr)%3B%0A=
%09%09%09currentuser-%3Eport%20%3D%20ntohs(sender.sin_port)%3B%0A%0A%09%09%=
09ClientList.push_back(currentuser)%3B%0A%0A%09%09%09%2F%2F%20%E5%8F%91%E9%=
80%81%E5%B7%B2%E7%BB%8F%E7%99%BB%E9%99%86%E7%9A%84%E5%AE%A2%E6%88%B7%E4%BF%=
A1%E6%81%AF%0A%09%09%09int%20nodecount%20%3D%20(int)ClientList.size()%3B%0A=
%09%09%09sendto(PrimaryUDP%2C%20(const%20char*)%26nodecount%2C%20sizeof(int=
)%2C%200%2C%20(const%20sockaddr*)%26sender%2C%20sizeof(sender))%3B%0A%09%09=
%09for(UserList%3A%3Aiterator%20UserIterator%3DClientList.begin()%3B%0A%09%=
09%09%09UserIterator!%3DClientList.end()%3B%0A%09%09%09%09%2B%2BUserIterato=
r)%0A%09%09%09%7B%0A%09%09%09%09sendto(PrimaryUDP%2C%20(const%20char*)(*Use=
rIterator)%2C%20sizeof(stUserListNode)%2C%200%2C%20(const%20sockaddr*)%26se=
nder%2C%20sizeof(sender))%3B%20%0A%09%09%09%7D%0A%0A%09%09%09break%3B%0A%09=
%09%7D%0A%09case%20LOGOUT%3A%0A%09%09%7B%0A%09%09%09%2F%2F%20%E5%B0%86%E6%A=
D%A4%E5%AE%A2%E6%88%B7%E4%BF%A1%E6%81%AF%E5%88%A0%E9%99%A4%0A%09%09%09print=
f(%22has%20a%20user%20logout%20%3A%20%25s%5Cn%22%2C%20recvbuf.message.logou=
tmember.userName)%3B%0A%09%09%09UserList%3A%3Aiterator%20removeiterator%20%=
3D%20NULL%3B%0A%09%09%09for(UserList%3A%3Aiterator%20UserIterator%3DClientL=
ist.begin()%3B%0A%09%09%09%09UserIterator!%3DClientList.end()%3B%0A%09%09%0=
9%09%2B%2BUserIterator)%0A%09%09%09%7B%0A%09%09%09%09if(%20strcmp(%20((*Use=
rIterator)-%3EuserName)%2C%20recvbuf.message.logoutmember.userName)%20%3D%3=
D%200%20)%0A%09%09%09%09%7B%0A%09%09%09%09%09removeiterator%20%3D%20UserIte=
rator%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%0=
9%09if(removeiterator%20!%3D%20NULL)%0A%09%09%09%09ClientList.remove(*remov=
eiterator)%3B%0A%09%09%09break%3B%0A%09%09%7D%0A%09case%20P2PTRANS%3A%0A%09=
%09%7B%0A%09%09%09%2F%2F%20%E6%9F%90%E4%B8%AA%E5%AE%A2%E6%88%B7%E5%B8%8C%E6=
%9C%9B%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%90%91%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8=
%AA%E5%AE%A2%E6%88%B7%E5%8F%91%E9%80%81%E4%B8%80%E4%B8%AA%E6%89%93%E6%B4%9E=
%E6%B6%88%E6%81%AF%0A%09%09%09printf(%22%25s%20wants%20to%20p2p%20%25s%5Cn%=
22%2Cinet_ntoa(sender.sin_addr)%2Crecvbuf.message.translatemessage.userName=
)%3B%0A%09%09%09stUserListNode%20node%20%3D%20GetUser(recvbuf.message.trans=
latemessage.userName)%3B%0A%09%09%09sockaddr_in%20remote%3B%0A%09%09%09remo=
te.sin_family%3DAF_INET%3B%0A%09%09%09remote.sin_port%3D%20htons(node.port)=
%3B%20%0A%09%09%09remote.sin_addr.s_addr%20%3D%20htonl(node.ip)%3B%0A%0A%09=
%09%09in_addr%20tmp%3B%0A%09%09%09tmp.S_un.S_addr%20%3D%20htonl(node.ip)%3B=
%0A%09%09%09printf(%22the%20address%20is%20%25s%2Cand%20port%20is%20%25d%5C=
n%22%2Cinet_ntoa(tmp)%2C%20node.port)%3B%0A%0A%09%09%09stP2PMessage%20trans=
Message%3B%0A%09%09%09transMessage.iMessageType%20%3D%20P2PSOMEONEWANTTOCAL=
LYOU%3B%0A%09%09%09transMessage.iStringLen%20%3D%20ntohl(sender.sin_addr.S_=
un.S_addr)%3B%0A%09%09%09transMessage.Port%20%3D%20ntohs(sender.sin_port)%3=
B%0A%0A%09%09%09sendto(PrimaryUDP%2C(const%20char*)%26transMessage%2C%20siz=
eof(transMessage)%2C%200%2C%20(const%20sockaddr%20*)%26remote%2C%20sizeof(r=
emote))%3B%0A%0A%09%09%09break%3B%0A%09%09%7D%0A%0A%09case%20GETALLUSER%3A%=
0A%09%09%7B%0A%09%09%09int%20command%20%3D%20GETALLUSER%3B%0A%09%09%09sendt=
o(PrimaryUDP%2C%20(const%20char*)%26command%2C%20sizeof(int)%2C%200%2C%20(c=
onst%20sockaddr*)%26sender%2C%20sizeof(sender))%3B%0A%0A%09%09%09int%20node=
count%20%3D%20(int)ClientList.size()%3B%0A%09%09%09sendto(PrimaryUDP%2C%20(=
const%20char*)%26nodecount%2C%20sizeof(int)%2C%200%2C%20(const%20sockaddr*)=
%26sender%2C%20sizeof(sender))%3B%0A%0A%09%09%09for(UserList%3A%3Aiterator%=
20UserIterator%3DClientList.begin()%3B%0A%09%09%09%09UserIterator!%3DClient=
List.end()%3B%0A%09%09%09%09%2B%2BUserIterator)%0A%09%09%09%7B%0A%09%09%09%=
09sendto(PrimaryUDP%2C%20(const%20char*)(*UserIterator)%2C%20sizeof(stUserL=
istNode)%2C%200%2C%20(const%20sockaddr*)%26sender%2C%20sizeof(sender))%3B%2=
0%0A%09%09%09%7D%0A%09%09%09break%3B%0A%09%09%7D%0A%09%09%09%09%7D%0A%09%09=
%09%7D%0A%09%09%7D%0A%0A%09%7D%0A%09catch(Exception%20%26e)%0A%09%7B%0A%09%=
09printf(e.GetMessage())%3B%0A%09%09return%201%3B%0A%09%7D%0A%0A%09return%2=
00%3B%0A%7D" quality=3D"high" allowscriptaccess=3D"always" type=3D"applicat=
ion/x-shockwave-flash" pluginspage=3D"http://www.macromedia.com/go/getflash=
player" style=3D"">&nbsp;<a href=3D"javascript:void()" title=3D"=E6=94=B6=
=E8=97=8F=E8=BF=99=E6=AE=B5=E4=BB=A3=E7=A0=81" onclick=3D"code_favorites_do=
_favorite(this);return false;"><img class=3D"star" src=3D"http://andylin02.=
iteye.com/images/icon_star.png" alt=3D"=E6=94=B6=E8=97=8F=E4=BB=A3=E7=A0=81=
" width=3D"15" height=3D"14"><img class=3D"spinner" src=3D"http://andylin02=
.iteye.com/images/spinner.gif" style=3D"display: none;"></a></div></div><ol=
 start=3D"1" class=3D"dp-cpp"><li><span><span class=3D"comment">//P2PServer=
.c</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=3D"comm=
ent">/*&nbsp;P2P&nbsp;=E7=A8=8B=E5=BA=8F=E6=9C=8D=E5=8A=A1=E7=AB=AF</span>&=
nbsp;</span></li><li><span><span class=3D"comment">*&nbsp;</span>&nbsp;</sp=
an></li><li><span><span class=3D"comment">*&nbsp;=E6=96=87=E4=BB=B6=E5=90=
=8D=EF=BC=9AP2PServer.c</span>&nbsp;</span></li><li><span><span class=3D"co=
mment">*</span>&nbsp;</span></li><li><span><span class=3D"comment">*&nbsp;=
=E6=97=A5=E6=9C=9F=EF=BC=9A2004-5-21</span>&nbsp;</span></li><li><span><spa=
n class=3D"comment">*</span>&nbsp;</span></li><li><span><span class=3D"comm=
ent">*&nbsp;=E4=BD=9C=E8=80=85=EF=BC=9Ashootingstars(zhouhuis22@sina.com)</=
span>&nbsp;</span></li><li><span><span class=3D"comment">*</span>&nbsp;</sp=
an></li><li><span><span class=3D"comment">*/</span><span>&nbsp;&nbsp;</span=
></span></li><li><span><span class=3D"preprocessor">#pragma&nbsp;comment(li=
b,&nbsp;"ws2_32.lib")</span><span>&nbsp;&nbsp;</span></span></li><li><span>=
&nbsp;&nbsp;</span></li><li><span><span class=3D"preprocessor">#include&nbs=
p;"windows.h"</span><span>&nbsp;&nbsp;</span></span></li><li><span><span cl=
ass=3D"preprocessor">#include&nbsp;"..\proto.h"</span><span>&nbsp;&nbsp;</s=
pan></span></li><li><span><span class=3D"preprocessor">#include&nbsp;"..\Ex=
ception.h"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp=
;</span></li><li><span>UserList&nbsp;ClientList;&nbsp;&nbsp;</span></li><li=
><span>&nbsp;&nbsp;</span></li><li><span><span class=3D"keyword">void</span=
><span>&nbsp;InitWinSock()&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&=
nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;WSADATA&nbsp;wsaData;&nb=
sp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbs=
p;&nbsp;&nbsp;<span class=3D"keyword">if</span><span>&nbsp;(WSAStartup(MAKE=
WORD(2,&nbsp;2),&nbsp;&amp;wsaData)&nbsp;!=3D&nbsp;0)&nbsp;&nbsp;</span></s=
pan></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><sp=
an>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span class=3D"st=
ring">"Windows&nbsp;sockets&nbsp;2.2&nbsp;startup"</span><span>);&nbsp;&nbs=
p;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;<span class=3D"keyword">throw</span><span>&nbsp;Exception(</span><span =
class=3D"string">""</span><span>);&nbsp;&nbsp;</span></span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbs=
p;&nbsp;<span class=3D"keyword">else</span><span>{&nbsp;&nbsp;</span></span=
></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<spa=
n class=3D"string">"Using&nbsp;%s&nbsp;(Status:&nbsp;%s)\n"</span><span>,&n=
bsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wsaData.szDescription,&nbsp;wsaData.szS=
ystemStatus);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;printf(<span class=3D"string">"with&nbsp;API&nbsp;versi=
ons&nbsp;%d.%d&nbsp;to&nbsp;%d.%d\n\n"</span><span>,&nbsp;&nbsp;</span></sp=
an></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;LOBYTE(wsaData.wVersion),&nbsp;HIBYTE(wsaData.wVersion),&nbs=
p;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;LOBYTE(wsaData.wHighVersion),&nbsp;HIBYTE(wsaDat=
a.wHighVersion));&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li>=
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp=
;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>SOCKET&nbsp;=
mksock(<span class=3D"datatypes">int</span><span>&nbsp;type)&nbsp;&nbsp;</s=
pan></span></li><li><span>{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&n=
bsp;&nbsp;SOCKET&nbsp;sock&nbsp;=3D&nbsp;socket(AF_INET,&nbsp;type,&nbsp;0)=
;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"k=
eyword">if</span><span>&nbsp;(sock&nbsp;&lt;&nbsp;0)&nbsp;&nbsp;</span></sp=
an></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><spa=
n>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span class=3D"str=
ing">"create&nbsp;socket&nbsp;error"</span><span>);&nbsp;&nbsp;</span></spa=
n></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span clas=
s=3D"keyword">throw</span><span>&nbsp;Exception(</span><span class=3D"strin=
g">""</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&n=
bsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span =
class=3D"keyword">return</span><span>&nbsp;sock;&nbsp;&nbsp;</span></span><=
/li><li><span>}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><l=
i><span>stUserListNode&nbsp;GetUser(<span class=3D"datatypes">char</span><s=
pan>&nbsp;*username)&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&nbsp;<=
/span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">for</s=
pan><span>(UserList::iterator&nbsp;UserIterator=3DClientList.begin();&nbsp;=
&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;UserIterator!=3DClientList.end();&nbsp;&nbsp;</span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++UserIterator)&nbsp;&nbsp;=
</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keywor=
d">if</span><span>(&nbsp;strcmp(&nbsp;((*UserIterator)-&gt;userName),&nbsp;=
username)&nbsp;=3D=3D&nbsp;0&nbsp;)&nbsp;&nbsp;</span></span></li><li><span=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<s=
pan class=3D"keyword">return</span><span>&nbsp;*(*UserIterator);&nbsp;&nbsp=
;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span><=
/li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">throw</span><=
span>&nbsp;Exception(</span><span class=3D"string">"not&nbsp;find&nbsp;this=
&nbsp;user"</span><span>);&nbsp;&nbsp;</span></span></li><li><span>}&nbsp;&=
nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=3D=
"datatypes">int</span><span>&nbsp;main(</span><span class=3D"datatypes">int=
</span><span>&nbsp;argc,&nbsp;</span><span class=3D"datatypes">char</span><=
span>*&nbsp;argv[])&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&nbsp;</=
span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">try</sp=
an><span>{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;InitWinSock();&nbsp;&nbsp;</span></li><li><span>&nb=
sp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;SOCKET&nbsp;PrimaryUDP;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrimaryUDP&nbsp;=3D&nbsp;mksock(SOCK_DGRA=
M);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sockaddr_in&nbsp;local;&nbsp;&n=
bsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l=
ocal.sin_family=3DAF_INET;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local.sin_port=3D&nbsp;htons(SERVER_PORT);=
&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;local.sin_addr.s_addr&nbsp;=3D&nbsp;htonl(INADDR_ANY);&nbsp;&n=
bsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<=
span class=3D"datatypes">int</span><span>&nbsp;nResult=3Dbind(PrimaryUDP,(s=
ockaddr*)&amp;local,</span><span class=3D"keyword">sizeof</span><span>(sock=
addr));&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</span><span>(nResult=3D=3DS=
OCKET_ERROR)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">t=
hrow</span><span>&nbsp;Exception(</span><span class=3D"string">"bind&nbsp;e=
rror"</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</=
span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sockadd=
r_in&nbsp;sender;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;stMessage&nbsp;recvbuf;&nbsp;&nbsp;</span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(&amp;recvbuf,0=
,<span class=3D"keyword">sizeof</span><span>(stMessage));&nbsp;&nbsp;</span=
></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment">//&nbsp;=E5=BC=80=E5=
=A7=8B=E4=B8=BB=E5=BE=AA=E7=8E=AF.</span><span>&nbsp;&nbsp;</span></span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D=
"comment">//&nbsp;=E4=B8=BB=E5=BE=AA=E7=8E=AF=E8=B4=9F=E8=B4=A3=E4=B8=8B=E9=
=9D=A2=E5=87=A0=E4=BB=B6=E4=BA=8B=E6=83=85:</span><span>&nbsp;&nbsp;</span>=
</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span=
 class=3D"comment">//&nbsp;=E4=B8=80:=E8=AF=BB=E5=8F=96=E5=AE=A2=E6=88=B7=
=E7=AB=AF=E7=99=BB=E9=99=86=E5=92=8C=E7=99=BB=E5=87=BA=E6=B6=88=E6=81=AF,=
=E8=AE=B0=E5=BD=95=E5=AE=A2=E6=88=B7=E5=88=97=E8=A1=A8</span><span>&nbsp;&n=
bsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;<span class=3D"comment">//&nbsp;=E4=BA=8C:=E8=BD=AC=E5=8F=91=E5=AE=A2=
=E6=88=B7p2p=E8=AF=B7=E6=B1=82</span><span>&nbsp;&nbsp;</span></span></li><=
li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"key=
word">for</span><span>(;;)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<sp=
an class=3D"datatypes">int</span><span>&nbsp;dwSender&nbsp;=3D&nbsp;</span>=
<span class=3D"keyword">sizeof</span><span>(sender);&nbsp;&nbsp;</span></sp=
an></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;<span class=3D"datatypes">int</span><span>&nbsp;ret&nbsp;=3D=
&nbsp;recvfrom(PrimaryUDP,&nbsp;(</span><span class=3D"datatypes">char</spa=
n><span>&nbsp;*)&amp;recvbuf,&nbsp;</span><span class=3D"keyword">sizeof</s=
pan><span>(stMessage),&nbsp;0,&nbsp;(sockaddr&nbsp;*)&amp;sender,&nbsp;&amp=
;dwSender);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if=
</span><span>(ret&nbsp;&lt;=3D&nbsp;0)&nbsp;&nbsp;</span></span></li><li><s=
pan>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span class=
=3D"string">"recv&nbsp;error"</span><span>);&nbsp;&nbsp;</span></span></li>=
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">continue</span><span=
>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<sp=
an class=3D"keyword">else</span><span>&nbsp;&nbsp;</span></span></li><li><s=
pan>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"dat=
atypes">int</span><span>&nbsp;messageType&nbsp;=3D&nbsp;recvbuf.iMessageTyp=
e;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=
=3D"keyword">switch</span><span>(messageType){&nbsp;&nbsp;</span></span></l=
i><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">case</span><spa=
n>&nbsp;LOGIN:&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"=
comment">//&nbsp;&nbsp;=E5=B0=86=E8=BF=99=E4=B8=AA=E7=94=A8=E6=88=B7=E7=9A=
=84=E4=BF=A1=E6=81=AF=E8=AE=B0=E5=BD=95=E5=88=B0=E7=94=A8=E6=88=B7=E5=88=97=
=E8=A1=A8=E4=B8=AD</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf=
(<span class=3D"string">"has&nbsp;a&nbsp;user&nbsp;login&nbsp;:&nbsp;%s\n"<=
/span><span>,&nbsp;recvbuf.message.loginmember.userName);&nbsp;&nbsp;</span=
></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;stUserListNode&nbsp;*currentuser&nbsp;=3D&nbsp;<span cl=
ass=3D"keyword">new</span><span>&nbsp;stUserListNode();&nbsp;&nbsp;</span><=
/span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;strcpy(currentuser-&gt;userName,&nbsp;recvbuf.message.log=
inmember.userName);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentuser-&gt;ip&nbsp;=
=3D&nbsp;ntohl(sender.sin_addr.S_un.S_addr);&nbsp;&nbsp;</span></li><li><sp=
an>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
currentuser-&gt;port&nbsp;=3D&nbsp;ntohs(sender.sin_port);&nbsp;&nbsp;</spa=
n></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClientList.push_back(curren=
tuser);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<sp=
an class=3D"comment">//&nbsp;=E5=8F=91=E9=80=81=E5=B7=B2=E7=BB=8F=E7=99=BB=
=E9=99=86=E7=9A=84=E5=AE=A2=E6=88=B7=E4=BF=A1=E6=81=AF</span><span>&nbsp;&n=
bsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">int</span><span>&nb=
sp;nodecount&nbsp;=3D&nbsp;(</span><span class=3D"datatypes">int</span><spa=
n>)ClientList.size();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendto(PrimaryUD=
P,&nbsp;(<span class=3D"keyword">const</span><span>&nbsp;</span><span class=
=3D"datatypes">char</span><span>*)&amp;nodecount,&nbsp;</span><span class=
=3D"keyword">sizeof</span><span>(</span><span class=3D"datatypes">int</span=
><span>),&nbsp;0,&nbsp;(</span><span class=3D"keyword">const</span><span>&n=
bsp;sockaddr*)&amp;sender,&nbsp;</span><span class=3D"keyword">sizeof</span=
><span>(sender));&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keywo=
rd">for</span><span>(UserList::iterator&nbsp;UserIterator=3DClientList.begi=
n();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UserItera=
tor!=3DClientList.end();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;++UserIterator)&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>=
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendto(PrimaryUDP,&nbsp;(<span class=3D"keyw=
ord">const</span><span>&nbsp;</span><span class=3D"datatypes">char</span><s=
pan>*)(*UserIterator),&nbsp;</span><span class=3D"keyword">sizeof</span><sp=
an>(stUserListNode),&nbsp;0,&nbsp;(</span><span class=3D"keyword">const</sp=
an><span>&nbsp;sockaddr*)&amp;sender,&nbsp;</span><span class=3D"keyword">s=
izeof</span><span>(sender));&nbsp;&nbsp;&nbsp;</span></span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&n=
bsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=
=3D"keyword">break</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">case</span><span>&nbs=
p;LOGOUT:&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comme=
nt">//&nbsp;=E5=B0=86=E6=AD=A4=E5=AE=A2=E6=88=B7=E4=BF=A1=E6=81=AF=E5=88=A0=
=E9=99=A4</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span cl=
ass=3D"string">"has&nbsp;a&nbsp;user&nbsp;logout&nbsp;:&nbsp;%s\n"</span><s=
pan>,&nbsp;recvbuf.message.logoutmember.userName);&nbsp;&nbsp;</span></span=
></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;UserList::iterator&nbsp;removeiterator&nbsp;=3D&nbsp;NULL;&nbs=
p;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">for</span><span>(UserLis=
t::iterator&nbsp;UserIterator=3DClientList.begin();&nbsp;&nbsp;</span></spa=
n></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UserIterator!=3DClientList.end();&nbs=
p;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++UserIterator)&nbsp;&nb=
sp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;<span class=3D"keyword">if</span><span>(&nbsp;strcmp(&nbsp;((*UserIterat=
or)-&gt;userName),&nbsp;recvbuf.message.logoutmember.userName)&nbsp;=3D=3D&=
nbsp;0&nbsp;)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;removeiterator&nbsp;=3D&nbsp;UserIterator;&nbsp;&nbsp;</span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">=
break</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span=
 class=3D"keyword">if</span><span>(removeiterator&nbsp;!=3D&nbsp;NULL)&nbsp=
;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClientList.remove(=
*removeiterator);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">bre=
ak</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbs=
p;&nbsp;&nbsp;<span class=3D"keyword">case</span><span>&nbsp;P2PTRANS:&nbsp=
;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment">//&nbsp;=
=E6=9F=90=E4=B8=AA=E5=AE=A2=E6=88=B7=E5=B8=8C=E6=9C=9B=E6=9C=8D=E5=8A=A1=E7=
=AB=AF=E5=90=91=E5=8F=A6=E5=A4=96=E4=B8=80=E4=B8=AA=E5=AE=A2=E6=88=B7=E5=8F=
=91=E9=80=81=E4=B8=80=E4=B8=AA=E6=89=93=E6=B4=9E=E6=B6=88=E6=81=AF</span><s=
pan>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span class=3D"string">"%s=
&nbsp;wants&nbsp;to&nbsp;p2p&nbsp;%s\n"</span><span>,inet_ntoa(sender.sin_a=
ddr),recvbuf.message.translatemessage.userName);&nbsp;&nbsp;</span></span><=
/li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;stUserListNode&nbsp;node&nbsp;=3D&nbsp;GetUser(recvbuf.message.t=
ranslatemessage.userName);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sockaddr_in&nbsp;r=
emote;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remote.sin_family=3DAF_INET;&nbsp;&nbs=
p;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;remote.sin_port=3D&nbsp;htons(node.port);&nbsp;&nbsp;&=
nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;remote.sin_addr.s_addr&nbsp;=3D&nbsp;htonl(node.ip)=
;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in_addr&n=
bsp;tmp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp.S_un.S_addr&nbsp;=3D&nbsp;htonl(=
node.ip);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span class=3D"string">"the&=
nbsp;address&nbsp;is&nbsp;%s,and&nbsp;port&nbsp;is&nbsp;%d\n"</span><span>,=
inet_ntoa(tmp),&nbsp;node.port);&nbsp;&nbsp;</span></span></li><li><span>&n=
bsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stP2PMessage&nbsp;transMessage;&nbsp;&nbsp;</s=
pan></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;transMessage.iMessageType&nbsp;=3D&nbsp;P2PSOMEONEWANTTOCAL=
LYOU;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transMessage.iStringLen&nbsp;=3D&nbsp;n=
tohl(sender.sin_addr.S_un.S_addr);&nbsp;&nbsp;</span></li><li><span>&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transMessa=
ge.Port&nbsp;=3D&nbsp;ntohs(sender.sin_port);&nbsp;&nbsp;</span></li><li><s=
pan>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendto(PrimaryUDP,(<span class=3D"keywor=
d">const</span><span>&nbsp;</span><span class=3D"datatypes">char</span><spa=
n>*)&amp;transMessage,&nbsp;</span><span class=3D"keyword">sizeof</span><sp=
an>(transMessage),&nbsp;0,&nbsp;(</span><span class=3D"keyword">const</span=
><span>&nbsp;sockaddr&nbsp;*)&amp;remote,&nbsp;</span><span class=3D"keywor=
d">sizeof</span><span>(remote));&nbsp;&nbsp;</span></span></li><li><span>&n=
bsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">break</span><span>;&nb=
sp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><=
span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">case</span><span>&nbsp=
;GETALLUSER:&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"da=
tatypes">int</span><span>&nbsp;command&nbsp;=3D&nbsp;GETALLUSER;&nbsp;&nbsp=
;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;sendto(PrimaryUDP,&nbsp;(<span class=3D"keyword"=
>const</span><span>&nbsp;</span><span class=3D"datatypes">char</span><span>=
*)&amp;command,&nbsp;</span><span class=3D"keyword">sizeof</span><span>(</s=
pan><span class=3D"datatypes">int</span><span>),&nbsp;0,&nbsp;(</span><span=
 class=3D"keyword">const</span><span>&nbsp;sockaddr*)&amp;sender,&nbsp;</sp=
an><span class=3D"keyword">sizeof</span><span>(sender));&nbsp;&nbsp;</span>=
</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatyp=
es">int</span><span>&nbsp;nodecount&nbsp;=3D&nbsp;(</span><span class=3D"da=
tatypes">int</span><span>)ClientList.size();&nbsp;&nbsp;</span></span></li>=
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;sendto(PrimaryUDP,&nbsp;(<span class=3D"keyword">const</span><span>&=
nbsp;</span><span class=3D"datatypes">char</span><span>*)&amp;nodecount,&nb=
sp;</span><span class=3D"keyword">sizeof</span><span>(</span><span class=3D=
"datatypes">int</span><span>),&nbsp;0,&nbsp;(</span><span class=3D"keyword"=
>const</span><span>&nbsp;sockaddr*)&amp;sender,&nbsp;</span><span class=3D"=
keyword">sizeof</span><span>(sender));&nbsp;&nbsp;</span></span></li><li><s=
pan>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">for</span><span>=
(UserList::iterator&nbsp;UserIterator=3DClientList.begin();&nbsp;&nbsp;</sp=
an></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UserIterator!=3DClientList.en=
d();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++UserIterator)&=
nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;sendto(PrimaryUDP,&nbsp;(<span class=3D"keyword">const</span><sp=
an>&nbsp;</span><span class=3D"datatypes">char</span><span>*)(*UserIterator=
),&nbsp;</span><span class=3D"keyword">sizeof</span><span>(stUserListNode),=
&nbsp;0,&nbsp;(</span><span class=3D"keyword">const</span><span>&nbsp;socka=
ddr*)&amp;sender,&nbsp;</span><span class=3D"keyword">sizeof</span><span>(s=
ender));&nbsp;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></l=
i><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;<span class=3D"keyword">break</span><span>;&nbsp;&nbsp;</span></sp=
an></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&n=
bsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li=
><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbs=
p;&nbsp;&nbsp;<span class=3D"keyword">catch</span><span>(Exception&nbsp;&am=
p;e)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp=
;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;printf(e.GetMessage());&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">return</span><span>=
&nbsp;1;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&=
nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&n=
bsp;&nbsp;&nbsp;<span class=3D"keyword">return</span><span>&nbsp;0;&nbsp;&n=
bsp;</span></span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre c=
lass=3D"cpp" name=3D"code" codeable_id=3D"444643" codeable_type=3D"Blog" so=
urce_url=3D"http://andylin02.iteye.com/blog/444643" pre_index=3D"0" title=
=3D"P2P=E4=B9=8BUDP=E7=A9=BF=E9=80=8FNAT=E7=9A=84=E5=8E=9F=E7=90=86=E4=B8=
=8E=E5=AE=9E=E7=8E=B0" style=3D"display: none;">//P2PServer.c
/* P2P =E7=A8=8B=E5=BA=8F=E6=9C=8D=E5=8A=A1=E7=AB=AF
*=20
* =E6=96=87=E4=BB=B6=E5=90=8D=EF=BC=9AP2PServer.c
*
* =E6=97=A5=E6=9C=9F=EF=BC=9A2004-5-21
*
* =E4=BD=9C=E8=80=85=EF=BC=9Ashootingstars(zhouhuis22@sina.com)
*
*/
#pragma comment(lib, "ws2_32.lib")

#include "windows.h"
#include "..\proto.h"
#include "..\Exception.h"

UserList ClientList;

void InitWinSock()
{
	WSADATA wsaData;

	if (WSAStartup(MAKEWORD(2, 2), &amp;wsaData) !=3D 0)
	{
		printf("Windows sockets 2.2 startup");
		throw Exception("");
	}
	else{
		printf("Using %s (Status: %s)\n",
			wsaData.szDescription, wsaData.szSystemStatus);
		printf("with API versions %d.%d to %d.%d\n\n",
			LOBYTE(wsaData.wVersion), HIBYTE(wsaData.wVersion),
			LOBYTE(wsaData.wHighVersion), HIBYTE(wsaData.wHighVersion));

	}
}

SOCKET mksock(int type)
{
	SOCKET sock =3D socket(AF_INET, type, 0);
	if (sock &lt; 0)
	{
		printf("create socket error");
		throw Exception("");
	}
	return sock;
}

stUserListNode GetUser(char *username)
{
	for(UserList::iterator UserIterator=3DClientList.begin();
		UserIterator!=3DClientList.end();
		++UserIterator)
	{
		if( strcmp( ((*UserIterator)-&gt;userName), username) =3D=3D 0 )
			return *(*UserIterator);
	}
	throw Exception("not find this user");
}

int main(int argc, char* argv[])
{
	try{
		InitWinSock();

		SOCKET PrimaryUDP;
		PrimaryUDP =3D mksock(SOCK_DGRAM);

		sockaddr_in local;
		local.sin_family=3DAF_INET;
		local.sin_port=3D htons(SERVER_PORT);=20
		local.sin_addr.s_addr =3D htonl(INADDR_ANY);
		int nResult=3Dbind(PrimaryUDP,(sockaddr*)&amp;local,sizeof(sockaddr));
		if(nResult=3D=3DSOCKET_ERROR)
			throw Exception("bind error");

		sockaddr_in sender;
		stMessage recvbuf;
		memset(&amp;recvbuf,0,sizeof(stMessage));

		// =E5=BC=80=E5=A7=8B=E4=B8=BB=E5=BE=AA=E7=8E=AF.
		// =E4=B8=BB=E5=BE=AA=E7=8E=AF=E8=B4=9F=E8=B4=A3=E4=B8=8B=E9=9D=A2=E5=87=
=A0=E4=BB=B6=E4=BA=8B=E6=83=85:
		// =E4=B8=80:=E8=AF=BB=E5=8F=96=E5=AE=A2=E6=88=B7=E7=AB=AF=E7=99=BB=E9=99=
=86=E5=92=8C=E7=99=BB=E5=87=BA=E6=B6=88=E6=81=AF,=E8=AE=B0=E5=BD=95=E5=AE=
=A2=E6=88=B7=E5=88=97=E8=A1=A8
		// =E4=BA=8C:=E8=BD=AC=E5=8F=91=E5=AE=A2=E6=88=B7p2p=E8=AF=B7=E6=B1=82
		for(;;)
		{
			int dwSender =3D sizeof(sender);
			int ret =3D recvfrom(PrimaryUDP, (char *)&amp;recvbuf, sizeof(stMessage)=
, 0, (sockaddr *)&amp;sender, &amp;dwSender);
			if(ret &lt;=3D 0)
			{
				printf("recv error");
				continue;
			}
			else
			{
				int messageType =3D recvbuf.iMessageType;
				switch(messageType){
	case LOGIN:
		{
			//  =E5=B0=86=E8=BF=99=E4=B8=AA=E7=94=A8=E6=88=B7=E7=9A=84=E4=BF=A1=E6=
=81=AF=E8=AE=B0=E5=BD=95=E5=88=B0=E7=94=A8=E6=88=B7=E5=88=97=E8=A1=A8=E4=B8=
=AD
			printf("has a user login : %s\n", recvbuf.message.loginmember.userName);
			stUserListNode *currentuser =3D new stUserListNode();
			strcpy(currentuser-&gt;userName, recvbuf.message.loginmember.userName);
			currentuser-&gt;ip =3D ntohl(sender.sin_addr.S_un.S_addr);
			currentuser-&gt;port =3D ntohs(sender.sin_port);

			ClientList.push_back(currentuser);

			// =E5=8F=91=E9=80=81=E5=B7=B2=E7=BB=8F=E7=99=BB=E9=99=86=E7=9A=84=E5=AE=
=A2=E6=88=B7=E4=BF=A1=E6=81=AF
			int nodecount =3D (int)ClientList.size();
			sendto(PrimaryUDP, (const char*)&amp;nodecount, sizeof(int), 0, (const s=
ockaddr*)&amp;sender, sizeof(sender));
			for(UserList::iterator UserIterator=3DClientList.begin();
				UserIterator!=3DClientList.end();
				++UserIterator)
			{
				sendto(PrimaryUDP, (const char*)(*UserIterator), sizeof(stUserListNode)=
, 0, (const sockaddr*)&amp;sender, sizeof(sender));=20
			}

			break;
		}
	case LOGOUT:
		{
			// =E5=B0=86=E6=AD=A4=E5=AE=A2=E6=88=B7=E4=BF=A1=E6=81=AF=E5=88=A0=E9=99=
=A4
			printf("has a user logout : %s\n", recvbuf.message.logoutmember.userName=
);
			UserList::iterator removeiterator =3D NULL;
			for(UserList::iterator UserIterator=3DClientList.begin();
				UserIterator!=3DClientList.end();
				++UserIterator)
			{
				if( strcmp( ((*UserIterator)-&gt;userName), recvbuf.message.logoutmembe=
r.userName) =3D=3D 0 )
				{
					removeiterator =3D UserIterator;
					break;
				}
			}
			if(removeiterator !=3D NULL)
				ClientList.remove(*removeiterator);
			break;
		}
	case P2PTRANS:
		{
			// =E6=9F=90=E4=B8=AA=E5=AE=A2=E6=88=B7=E5=B8=8C=E6=9C=9B=E6=9C=8D=E5=8A=
=A1=E7=AB=AF=E5=90=91=E5=8F=A6=E5=A4=96=E4=B8=80=E4=B8=AA=E5=AE=A2=E6=88=B7=
=E5=8F=91=E9=80=81=E4=B8=80=E4=B8=AA=E6=89=93=E6=B4=9E=E6=B6=88=E6=81=AF
			printf("%s wants to p2p %s\n",inet_ntoa(sender.sin_addr),recvbuf.message=
.translatemessage.userName);
			stUserListNode node =3D GetUser(recvbuf.message.translatemessage.userNam=
e);
			sockaddr_in remote;
			remote.sin_family=3DAF_INET;
			remote.sin_port=3D htons(node.port);=20
			remote.sin_addr.s_addr =3D htonl(node.ip);

			in_addr tmp;
			tmp.S_un.S_addr =3D htonl(node.ip);
			printf("the address is %s,and port is %d\n",inet_ntoa(tmp), node.port);

			stP2PMessage transMessage;
			transMessage.iMessageType =3D P2PSOMEONEWANTTOCALLYOU;
			transMessage.iStringLen =3D ntohl(sender.sin_addr.S_un.S_addr);
			transMessage.Port =3D ntohs(sender.sin_port);

			sendto(PrimaryUDP,(const char*)&amp;transMessage, sizeof(transMessage), =
0, (const sockaddr *)&amp;remote, sizeof(remote));

			break;
		}

	case GETALLUSER:
		{
			int command =3D GETALLUSER;
			sendto(PrimaryUDP, (const char*)&amp;command, sizeof(int), 0, (const soc=
kaddr*)&amp;sender, sizeof(sender));

			int nodecount =3D (int)ClientList.size();
			sendto(PrimaryUDP, (const char*)&amp;nodecount, sizeof(int), 0, (const s=
ockaddr*)&amp;sender, sizeof(sender));

			for(UserList::iterator UserIterator=3DClientList.begin();
				UserIterator!=3DClientList.end();
				++UserIterator)
			{
				sendto(PrimaryUDP, (const char*)(*UserIterator), sizeof(stUserListNode)=
, 0, (const sockaddr*)&amp;sender, sizeof(sender));=20
			}
			break;
		}
				}
			}
		}

	}
	catch(Exception &amp;e)
	{
		printf(e.GetMessage());
		return 1;
	}

	return 0;
}</pre>
&nbsp;
<p>&nbsp;</p>
<div class=3D"dp-highlighter" id=3D""><div class=3D"bar"><div class=3D"tool=
s">Cpp=E4=BB=A3=E7=A0=81 <embed wmode=3D"transparent" src=3D"http://andylin=
02.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width=3D"14" =
height=3D"15" flashvars=3D"clipboard=3D%2F*%20P2P%20%E7%A8%8B%E5%BA%8F%E5%A=
E%A2%E6%88%B7%E7%AB%AF%0A*%20%0A*%20%E6%96%87%E4%BB%B6%E5%90%8D%EF%BC%9AP2P=
Client.c%0A*%0A*%20%E6%97%A5%E6%9C%9F%EF%BC%9A2004-5-21%0A*%0A*%20%E4%BD%9C=
%E8%80%85%EF%BC%9Ashootingstars(zhouhuis22%40sina.com)%0A*%0A*%2F%0A%0A%23p=
ragma%20comment(lib%2C%22ws2_32.lib%22)%0A%0A%23include%20%22windows.h%22%0=
A%23include%20%22..%5Cproto.h%22%0A%23include%20%22..%5CException.h%22%0A%2=
3include%20%3Ciostream%3E%0Ausing%20namespace%20std%3B%0A%0AUserList%20Clie=
ntList%3B%0A%0A%23define%20COMMANDMAXC%20256%0A%23define%20MAXRETRY%20%20%2=
0%205%0A%0ASOCKET%20PrimaryUDP%3B%0Achar%20UserName%5B10%5D%3B%0Achar%20Ser=
verIP%5B20%5D%3B%0A%0Abool%20RecvedACK%3B%0A%0Avoid%20InitWinSock()%0A%7B%0=
A%09WSADATA%20wsaData%3B%0A%0A%09if%20(WSAStartup(MAKEWORD(2%2C%202)%2C%20%=
26wsaData)%20!%3D%200)%0A%09%7B%0A%09%09printf(%22Windows%20sockets%202.2%2=
0startup%22)%3B%0A%09%09throw%20Exception(%22%22)%3B%0A%09%7D%0A%09else%7B%=
0A%09%09printf(%22Using%20%25s%20(Status%3A%20%25s)%5Cn%22%2C%0A%09%09%09ws=
aData.szDescription%2C%20wsaData.szSystemStatus)%3B%0A%09%09printf(%22with%=
20API%20versions%20%25d.%25d%20to%20%25d.%25d%5Cn%5Cn%22%2C%0A%09%09%09LOBY=
TE(wsaData.wVersion)%2C%20HIBYTE(wsaData.wVersion)%2C%0A%09%09%09LOBYTE(wsa=
Data.wHighVersion)%2C%20HIBYTE(wsaData.wHighVersion))%3B%0A%09%7D%0A%7D%0A%=
0ASOCKET%20mksock(int%20type)%0A%7B%0A%09SOCKET%20sock%20%3D%20socket(AF_IN=
ET%2C%20type%2C%200)%3B%0A%09if%20(sock%20%3C%200)%0A%09%7B%0A%09%09printf(=
%22create%20socket%20error%22)%3B%0A%09%09throw%20Exception(%22%22)%3B%0A%0=
9%7D%0A%09return%20sock%3B%0A%7D%0A%0AstUserListNode%20GetUser(char%20*user=
name)%0A%7B%0A%09for(UserList%3A%3Aiterator%20UserIterator%3DClientList.beg=
in()%3B%0A%09%09UserIterator!%3DClientList.end()%3B%0A%09%09%2B%2BUserItera=
tor)%0A%09%7B%0A%09%09if(%20strcmp(%20((*UserIterator)-%3EuserName)%2C%20us=
ername)%20%3D%3D%200%20)%0A%09%09%09return%20*(*UserIterator)%3B%0A%09%7D%0=
A%09throw%20Exception(%22not%20find%20this%20user%22)%3B%0A%7D%0A%0Avoid%20=
BindSock(SOCKET%20sock)%0A%7B%0A%09sockaddr_in%20sin%3B%0A%09sin.sin_addr.S=
_un.S_addr%20%3D%20INADDR_ANY%3B%0A%09sin.sin_family%20%3D%20AF_INET%3B%0A%=
09sin.sin_port%20%3D%200%3B%0A%0A%09if%20(bind(sock%2C%20(struct%20sockaddr=
*)%26sin%2C%20sizeof(sin))%20%3C%200)%0A%09%09throw%20Exception(%22bind%20e=
rror%22)%3B%0A%7D%0A%0Avoid%20ConnectToServer(SOCKET%20sock%2Cchar%20*usern=
ame%2C%20char%20*serverip)%0A%7B%0A%09sockaddr_in%20remote%3B%0A%09remote.s=
in_addr.S_un.S_addr%20%3D%20inet_addr(serverip)%3B%0A%09remote.sin_family%2=
0%3D%20AF_INET%3B%0A%09remote.sin_port%20%3D%20htons(SERVER_PORT)%3B%0A%0A%=
09stMessage%20sendbuf%3B%0A%09sendbuf.iMessageType%20%3D%20LOGIN%3B%0A%09st=
rncpy(sendbuf.message.loginmember.userName%2C%20username%2C%2010)%3B%0A%0A%=
09sendto(sock%2C%20(const%20char*)%26sendbuf%2C%20sizeof(sendbuf)%2C%200%2C=
%20(const%20sockaddr*)%26remote%2Csizeof(remote))%3B%0A%0A%09int%20usercoun=
t%3B%0A%09int%20fromlen%20%3D%20sizeof(remote)%3B%0A%09int%20iread%20%3D%20=
recvfrom(sock%2C%20(char%20*)%26usercount%2C%20sizeof(int)%2C%200%2C%20(soc=
kaddr%20*)%26remote%2C%20%26fromlen)%3B%0A%09if(iread%3C%3D0)%0A%09%7B%0A%0=
9%09throw%20Exception(%22Login%20error%5Cn%22)%3B%0A%09%7D%0A%0A%09%2F%2F%2=
0%E7%99%BB%E5%BD%95%E5%88%B0%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%90%8E%EF%BC%8C%E=
6%8E%A5%E6%94%B6%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%91%E6%9D%A5%E7%9A%84%E5%B=
7%B2%E7%BB%8F%E7%99%BB%E5%BD%95%E7%9A%84%E7%94%A8%E6%88%B7%E7%9A%84%E4%BF%A=
1%E6%81%AF%0A%09cout%3C%3C%22Have%20%22%3C%3Cusercount%3C%3C%22%20users%20l=
ogined%20server%3A%22%3C%3Cendl%3B%0A%09for(int%20i%20%3D%200%3Bi%3Cusercou=
nt%3Bi%2B%2B)%0A%09%7B%0A%09%09stUserListNode%20*node%20%3D%20new%20stUserL=
istNode%3B%0A%09%09recvfrom(sock%2C%20(char*)node%2C%20sizeof(stUserListNod=
e)%2C%200%2C%20(sockaddr%20*)%26remote%2C%20%26fromlen)%3B%0A%09%09ClientLi=
st.push_back(node)%3B%0A%09%09cout%3C%3C%22Username%3A%22%3C%3Cnode-%3Euser=
Name%3C%3Cendl%3B%0A%09%09in_addr%20tmp%3B%0A%09%09tmp.S_un.S_addr%20%3D%20=
htonl(node-%3Eip)%3B%0A%09%09cout%3C%3C%22UserIP%3A%22%3C%3Cinet_ntoa(tmp)%=
3C%3Cendl%3B%0A%09%09cout%3C%3C%22UserPort%3A%22%3C%3Cnode-%3Eport%3C%3Cend=
l%3B%0A%09%09cout%3C%3C%22%22%3C%3Cendl%3B%0A%09%7D%0A%7D%0A%0Avoid%20Outpu=
tUsage()%0A%7B%0A%09cout%3C%3C%22You%20can%20input%20you%20command%3A%5Cn%2=
2%0A%09%09%3C%3C%22Command%20Type%3A%5C%22send%5C%22%2C%5C%22exit%5C%22%2C%=
5C%22getu%5C%22%5Cn%22%0A%09%09%3C%3C%22Example%20%3A%20send%20Username%20M=
essage%5Cn%22%0A%09%09%3C%3C%22%20%20%20%20%20%20%20%20%20%20exit%5Cn%22%0A=
%09%09%3C%3C%22%20%20%20%20%20%20%20%20%20%20getu%5Cn%22%0A%09%09%3C%3Cendl=
%3B%0A%7D%0A%0A%2F*%20%E8%BF%99%E6%98%AF%E4%B8%BB%E8%A6%81%E7%9A%84%E5%87%B=
D%E6%95%B0%EF%BC%9A%E5%8F%91%E9%80%81%E4%B8%80%E4%B8%AA%E6%B6%88%E6%81%AF%E=
7%BB%99%E6%9F%90%E4%B8%AA%E7%94%A8%E6%88%B7(C)%0A*%E6%B5%81%E7%A8%8B%EF%BC%=
9A%E7%9B%B4%E6%8E%A5%E5%90%91%E6%9F%90%E4%B8%AA%E7%94%A8%E6%88%B7%E7%9A%84%=
E5%A4%96%E7%BD%91IP%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%EF%BC%8C%E5%A6%82%E=
6%9E%9C%E6%AD%A4%E5%89%8D%E6%B2%A1%E6%9C%89%E8%81%94%E7%B3%BB%E8%BF%87%0A*%=
20%20%20%20%20%20%E9%82%A3%E4%B9%88%E6%AD%A4%E6%B6%88%E6%81%AF%E5%B0%86%E6%=
97%A0%E6%B3%95%E5%8F%91%E9%80%81%EF%BC%8C%E5%8F%91%E9%80%81%E7%AB%AF%E7%AD%=
89%E5%BE%85%E8%B6%85%E6%97%B6%E3%80%82%0A*%20%20%20%20%20%20%E8%B6%85%E6%97=
%B6%E5%90%8E%EF%BC%8C%E5%8F%91%E9%80%81%E7%AB%AF%E5%B0%86%E5%8F%91%E9%80%81=
%E4%B8%80%E4%B8%AA%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF%E5%88%B0%E6%9C%8D%E5=
%8A%A1%E7%AB%AF%EF%BC%8C%0A*%20%20%20%20%20%20%E8%A6%81%E6%B1%82%E6%9C%8D%E=
5%8A%A1%E7%AB%AF%E5%8F%91%E9%80%81%E7%BB%99%E5%AE%A2%E6%88%B7C%E4%B8%80%E4%=
B8%AA%E8%AF%B7%E6%B1%82%EF%BC%8C%E8%AF%B7%E6%B1%82C%E7%BB%99%E6%9C%AC%E6%9C=
%BA%E5%8F%91%E9%80%81%E6%89%93%E6%B4%9E%E6%B6%88%E6%81%AF%0A*%20%20%20%20%2=
0%20%E4%BB%A5%E4%B8%8A%E6%B5%81%E7%A8%8B%E5%B0%86%E9%87%8D%E5%A4%8DMAXRETRY=
%E6%AC%A1%0A*%2F%0Abool%20SendMessageTo(char%20*UserName%2C%20char%20*Messa=
ge)%0A%7B%0A%09char%20realmessage%5B256%5D%3B%0A%09unsigned%20int%20UserIP%=
3B%0A%09unsigned%20short%20UserPort%3B%0A%09bool%20FindUser%20%3D%20false%3=
B%0A%09for(UserList%3A%3Aiterator%20UserIterator%3DClientList.begin()%3B%0A=
%09%09UserIterator!%3DClientList.end()%3B%0A%09%09%2B%2BUserIterator)%0A%09=
%7B%0A%09%09if(%20strcmp(%20((*UserIterator)-%3EuserName)%2C%20UserName)%20=
%3D%3D%200%20)%0A%09%09%7B%0A%09%09%09UserIP%20%3D%20(*UserIterator)-%3Eip%=
3B%0A%09%09%09UserPort%20%3D%20(*UserIterator)-%3Eport%3B%0A%09%09%09FindUs=
er%20%3D%20true%3B%0A%09%09%7D%0A%09%7D%0A%0A%09if(!FindUser)%0A%09%09retur=
n%20false%3B%0A%0A%09strcpy(realmessage%2C%20Message)%3B%0A%09for(int%20i%3=
D0%3Bi%3CMAXRETRY%3Bi%2B%2B)%0A%09%7B%0A%09%09RecvedACK%20%3D%20false%3B%0A=
%0A%09%09sockaddr_in%20remote%3B%0A%09%09remote.sin_addr.S_un.S_addr%20%3D%=
20htonl(UserIP)%3B%0A%09%09remote.sin_family%20%3D%20AF_INET%3B%0A%09%09rem=
ote.sin_port%20%3D%20htons(UserPort)%3B%0A%09%09stP2PMessage%20MessageHead%=
3B%0A%09%09MessageHead.iMessageType%20%3D%20P2PMESSAGE%3B%0A%09%09MessageHe=
ad.iStringLen%20%3D%20(int)strlen(realmessage)%2B1%3B%0A%09%09int%20isend%2=
0%3D%20sendto(PrimaryUDP%2C%20(const%20char%20*)%26MessageHead%2C%20sizeof(=
MessageHead)%2C%200%2C%20(const%20sockaddr*)%26remote%2C%20sizeof(remote))%=
3B%0A%09%09isend%20%3D%20sendto(PrimaryUDP%2C%20(const%20char%20*)%26realme=
ssage%2C%20MessageHead.iStringLen%2C%200%2C%20(const%20sockaddr*)%26remote%=
2C%20sizeof(remote))%3B%0A%0A%09%09%2F%2F%20%E7%AD%89%E5%BE%85%E6%8E%A5%E6%=
94%B6%E7%BA%BF%E7%A8%8B%E5%B0%86%E6%AD%A4%E6%A0%87%E8%AE%B0%E4%BF%AE%E6%94%=
B9%0A%09%09for(int%20j%3D0%3Bj%3C10%3Bj%2B%2B)%0A%09%09%7B%0A%09%09%09if(Re=
cvedACK)%0A%09%09%09%09return%20true%3B%0A%09%09%09else%0A%09%09%09%09Sleep=
(300)%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20%E6%B2%A1%E6%9C%89%E6%8E%A5%E6%94%=
B6%E5%88%B0%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%BA%E7%9A%84%E5%9B%9E%E5%BA%94%=
EF%BC%8C%E8%AE%A4%E4%B8%BA%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%BA%E7%9A%84%E7%=
AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E6%B2%A1%E6%9C%89%0A%09%09%2F%2F%20%E6%89%=
93%E5%BC%80%EF%BC%8C%E9%82%A3%E4%B9%88%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%=
E4%BF%A1%E6%81%AF%E7%BB%99%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E8%A6%81%E6%=
9C%8D%E5%8A%A1%E5%99%A8%E5%91%8A%E8%AF%89%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%=
BA%0A%09%09%2F%2F%20%E6%89%93%E5%BC%80%E6%98%A0%E5%B0%84%E7%AB%AF%E5%8F%A3%=
EF%BC%88UDP%E6%89%93%E6%B4%9E%EF%BC%89%0A%09%09sockaddr_in%20server%3B%0A%0=
9%09server.sin_addr.S_un.S_addr%20%3D%20inet_addr(ServerIP)%3B%0A%09%09serv=
er.sin_family%20%3D%20AF_INET%3B%0A%09%09server.sin_port%20%3D%20htons(SERV=
ER_PORT)%3B%0A%0A%09%09stMessage%20transMessage%3B%0A%09%09transMessage.iMe=
ssageType%20%3D%20P2PTRANS%3B%0A%09%09strcpy(transMessage.message.translate=
message.userName%2C%20UserName)%3B%0A%0A%09%09sendto(PrimaryUDP%2C%20(const=
%20char*)%26transMessage%2C%20sizeof(transMessage)%2C%200%2C%20(const%20soc=
kaddr*)%26server%2C%20sizeof(server))%3B%0A%09%09Sleep(100)%3B%2F%2F%20%E7%=
AD%89%E5%BE%85%E5%AF%B9%E6%96%B9%E5%85%88%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%=
AF%E3%80%82%0A%09%7D%0A%09return%20false%3B%0A%7D%0A%0A%2F%2F%20%E8%A7%A3%E=
6%9E%90%E5%91%BD%E4%BB%A4%EF%BC%8C%E6%9A%82%E6%97%B6%E5%8F%AA%E6%9C%89exit%=
E5%92%8Csend%E5%91%BD%E4%BB%A4%0A%2F%2F%20%E6%96%B0%E5%A2%9Egetu%E5%91%BD%E=
4%BB%A4%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%9C%8D%E5%8A%A1%E5%9=
9%A8%E7%9A%84%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%0Avoid%20ParseCommand(cha=
r%20*%20CommandLine)%0A%7B%0A%09if(strlen(CommandLine)%3C4)%0A%09%09return%=
3B%0A%09char%20Command%5B10%5D%3B%0A%09strncpy(Command%2C%20CommandLine%2C%=
204)%3B%0A%09Command%5B4%5D%3D'%5C0'%3B%0A%0A%09if(strcmp(Command%2C%22exit=
%22)%3D%3D0)%0A%09%7B%0A%09%09stMessage%20sendbuf%3B%0A%09%09sendbuf.iMessa=
geType%20%3D%20LOGOUT%3B%0A%09%09strncpy(sendbuf.message.logoutmember.userN=
ame%2C%20UserName%2C%2010)%3B%0A%09%09sockaddr_in%20server%3B%0A%09%09serve=
r.sin_addr.S_un.S_addr%20%3D%20inet_addr(ServerIP)%3B%0A%09%09server.sin_fa=
mily%20%3D%20AF_INET%3B%0A%09%09server.sin_port%20%3D%20htons(SERVER_PORT)%=
3B%0A%0A%09%09sendto(PrimaryUDP%2C(const%20char*)%26sendbuf%2C%20sizeof(sen=
dbuf)%2C%200%2C%20(const%20sockaddr%20*)%26server%2C%20sizeof(server))%3B%0=
A%09%09shutdown(PrimaryUDP%2C%202)%3B%0A%09%09closesocket(PrimaryUDP)%3B%0A=
%09%09exit(0)%3B%0A%09%7D%0A%09else%20if(strcmp(Command%2C%22send%22)%3D%3D=
0)%0A%09%7B%0A%09%09char%20sendname%5B20%5D%3B%0A%09%09char%20message%5BCOM=
MANDMAXC%5D%3B%0A%09%09int%20i%3B%0A%09%09for(i%3D5%3B%3Bi%2B%2B)%0A%09%09%=
7B%0A%09%09%09if(CommandLine%5Bi%5D!%3D'%20')%0A%09%09%09%09sendname%5Bi-5%=
5D%3DCommandLine%5Bi%5D%3B%0A%09%09%09else%0A%09%09%09%7B%0A%09%09%09%09sen=
dname%5Bi-5%5D%3D'%5C0'%3B%0A%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7=
D%0A%09%09strcpy(message%2C%20%26(CommandLine%5Bi%2B1%5D))%3B%0A%09%09if(Se=
ndMessageTo(sendname%2C%20message))%0A%09%09%09printf(%22Send%20OK!%5Cn%22)=
%3B%0A%09%09else%20%0A%09%09%09printf(%22Send%20Failure!%5Cn%22)%3B%0A%09%7=
D%0A%09else%20if(strcmp(Command%2C%22getu%22)%3D%3D0)%0A%09%7B%0A%09%09int%=
20command%20%3D%20GETALLUSER%3B%0A%09%09sockaddr_in%20server%3B%0A%09%09ser=
ver.sin_addr.S_un.S_addr%20%3D%20inet_addr(ServerIP)%3B%0A%09%09server.sin_=
family%20%3D%20AF_INET%3B%0A%09%09server.sin_port%20%3D%20htons(SERVER_PORT=
)%3B%0A%0A%09%09sendto(PrimaryUDP%2C(const%20char*)%26command%2C%20sizeof(c=
ommand)%2C%200%2C%20(const%20sockaddr%20*)%26server%2C%20sizeof(server))%3B=
%0A%09%7D%0A%7D%0A%0A%2F%2F%20%E6%8E%A5%E5%8F%97%E6%B6%88%E6%81%AF%E7%BA%BF=
%E7%A8%8B%0ADWORD%20WINAPI%20RecvThreadProc(LPVOID%20lpParameter)%0A%7B%0A%=
09sockaddr_in%20remote%3B%0A%09int%20sinlen%20%3D%20sizeof(remote)%3B%0A%09=
stP2PMessage%20recvbuf%3B%0A%09for(%3B%3B)%0A%09%7B%0A%09%09int%20iread%20%=
3D%20recvfrom(PrimaryUDP%2C%20(char%20*)%26recvbuf%2C%20sizeof(recvbuf)%2C%=
200%2C%20(sockaddr%20*)%26remote%2C%20%26sinlen)%3B%0A%09%09if(iread%3C%3D0=
)%0A%09%09%7B%0A%09%09%09printf(%22recv%20error%5Cn%22)%3B%0A%09%09%09conti=
nue%3B%0A%09%09%7D%0A%09%09switch(recvbuf.iMessageType)%0A%09%09%7B%0A%09%0=
9case%20P2PMESSAGE%3A%0A%09%09%09%7B%0A%09%09%09%09%2F%2F%20%E6%8E%A5%E6%94=
%B6%E5%88%B0P2P%E7%9A%84%E6%B6%88%E6%81%AF%0A%09%09%09%09char%20*comemessag=
e%3D%20new%20char%5Brecvbuf.iStringLen%5D%3B%0A%09%09%09%09int%20iread1%20%=
3D%20recvfrom(PrimaryUDP%2C%20comemessage%2C%20256%2C%200%2C%20(sockaddr%20=
*)%26remote%2C%20%26sinlen)%3B%0A%09%09%09%09comemessage%5Biread1-1%5D%20%3=
D%20'%5C0'%3B%0A%09%09%09%09if(iread1%3C%3D0)%0A%09%09%09%09%09throw%20Exce=
ption(%22Recv%20Message%20Error%5Cn%22)%3B%0A%09%09%09%09else%0A%09%09%09%0=
9%7B%0A%09%09%09%09%09printf(%22Recv%20a%20Message%3A%25s%5Cn%22%2Ccomemess=
age)%3B%0A%0A%09%09%09%09%09stP2PMessage%20sendbuf%3B%0A%09%09%09%09%09send=
buf.iMessageType%20%3D%20P2PMESSAGEACK%3B%0A%09%09%09%09%09sendto(PrimaryUD=
P%2C%20(const%20char*)%26sendbuf%2C%20sizeof(sendbuf)%2C%200%2C%20(const%20=
sockaddr*)%26remote%2C%20sizeof(remote))%3B%0A%09%09%09%09%7D%0A%0A%09%09%0=
9%09delete%20%5B%5Dcomemessage%3B%0A%09%09%09%09break%3B%0A%0A%09%09%09%7D%=
0A%09%09case%20P2PSOMEONEWANTTOCALLYOU%3A%0A%09%09%09%7B%0A%09%09%09%09%2F%=
2F%20%E6%8E%A5%E6%94%B6%E5%88%B0%E6%89%93%E6%B4%9E%E5%91%BD%E4%BB%A4%EF%BC%=
8C%E5%90%91%E6%8C%87%E5%AE%9A%E7%9A%84IP%E5%9C%B0%E5%9D%80%E6%89%93%E6%B4%9=
E%0A%09%09%09%09printf(%22Recv%20p2someonewanttocallyou%20data%5Cn%22)%3B%0=
A%09%09%09%09sockaddr_in%20remote%3B%0A%09%09%09%09remote.sin_addr.S_un.S_a=
ddr%20%3D%20htonl(recvbuf.iStringLen)%3B%0A%09%09%09%09remote.sin_family%20=
%3D%20AF_INET%3B%0A%09%09%09%09remote.sin_port%20%3D%20htons(recvbuf.Port)%=
3B%0A%0A%09%09%09%09%2F%2F%20UDP%20hole%20punching%0A%09%09%09%09stP2PMessa=
ge%20message%3B%0A%09%09%09%09message.iMessageType%20%3D%20P2PTRASH%3B%0A%0=
9%09%09%09sendto(PrimaryUDP%2C%20(const%20char%20*)%26message%2C%20sizeof(m=
essage)%2C%200%2C%20(const%20sockaddr*)%26remote%2C%20sizeof(remote))%3B%0A=
%0A%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09case%20P2PMESSAGEACK%3A%0A%0=
9%09%09%7B%0A%09%09%09%09%2F%2F%20%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%E7%9=
A%84%E5%BA%94%E7%AD%94%0A%09%09%09%09RecvedACK%20%3D%20true%3B%0A%09%09%09%=
09break%3B%0A%09%09%09%7D%0A%09%09case%20P2PTRASH%3A%0A%09%09%09%7B%0A%09%0=
9%09%09%2F%2F%20%E5%AF%B9%E6%96%B9%E5%8F%91%E9%80%81%E7%9A%84%E6%89%93%E6%B=
4%9E%E6%B6%88%E6%81%AF%EF%BC%8C%E5%BF%BD%E7%95%A5%E6%8E%89%E3%80%82%0A%09%0=
9%09%09%2F%2Fdo%20nothing%20...%0A%09%09%09%09printf(%22Recv%20p2ptrash%20d=
ata%5Cn%22)%3B%0A%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09case%20GETALLU=
SER%3A%0A%09%09%09%7B%0A%09%09%09%09int%20usercount%3B%0A%09%09%09%09int%20=
fromlen%20%3D%20sizeof(remote)%3B%0A%09%09%09%09int%20iread%20%3D%20recvfro=
m(PrimaryUDP%2C%20(char%20*)%26usercount%2C%20sizeof(int)%2C%200%2C%20(sock=
addr%20*)%26remote%2C%20%26fromlen)%3B%0A%09%09%09%09if(iread%3C%3D0)%0A%09=
%09%09%09%7B%0A%09%09%09%09%09throw%20Exception(%22Login%20error%5Cn%22)%3B=
%0A%09%09%09%09%7D%0A%0A%09%09%09%09ClientList.clear()%3B%0A%0A%09%09%09%09=
cout%3C%3C%22Have%20%22%3C%3Cusercount%3C%3C%22%20users%20logined%20server%=
3A%22%3C%3Cendl%3B%0A%09%09%09%09for(int%20i%20%3D%200%3Bi%3Cusercount%3Bi%=
2B%2B)%0A%09%09%09%09%7B%0A%09%09%09%09%09stUserListNode%20*node%20%3D%20ne=
w%20stUserListNode%3B%0A%09%09%09%09%09recvfrom(PrimaryUDP%2C%20(char*)node=
%2C%20sizeof(stUserListNode)%2C%200%2C%20(sockaddr%20*)%26remote%2C%20%26fr=
omlen)%3B%0A%09%09%09%09%09ClientList.push_back(node)%3B%0A%09%09%09%09%09c=
out%3C%3C%22Username%3A%22%3C%3Cnode-%3EuserName%3C%3Cendl%3B%0A%09%09%09%0=
9%09in_addr%20tmp%3B%0A%09%09%09%09%09tmp.S_un.S_addr%20%3D%20htonl(node-%3=
Eip)%3B%0A%09%09%09%09%09cout%3C%3C%22UserIP%3A%22%3C%3Cinet_ntoa(tmp)%3C%3=
Cendl%3B%0A%09%09%09%09%09cout%3C%3C%22UserPort%3A%22%3C%3Cnode-%3Eport%3C%=
3Cendl%3B%0A%09%09%09%09%09cout%3C%3C%22%22%3C%3Cendl%3B%0A%09%09%09%09%7D%=
0A%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%7D%0A%0A%0Ain=
t%20main(int%20argc%2C%20char*%20argv%5B%5D)%0A%7B%0A%09try%0A%09%7B%0A%09%=
09InitWinSock()%3B%0A%0A%09%09PrimaryUDP%20%3D%20mksock(SOCK_DGRAM)%3B%0A%0=
9%09BindSock(PrimaryUDP)%3B%0A%0A%09%09cout%3C%3C%22Please%20input%20server=
%20ip%3A%22%3B%0A%09%09cin%3E%3EServerIP%3B%0A%0A%09%09cout%3C%3C%22Please%=
20input%20your%20name%3A%22%3B%0A%09%09cin%3E%3EUserName%3B%0A%0A%09%09Conn=
ectToServer(PrimaryUDP%2C%20UserName%2C%20ServerIP)%3B%0A%0A%09%09HANDLE%20=
threadhandle%20%3D%20CreateThread(NULL%2C%200%2C%20RecvThreadProc%2C%20NULL=
%2C%20NULL%2C%20NULL)%3B%0A%09%09CloseHandle(threadhandle)%3B%0A%09%09Outpu=
tUsage()%3B%0A%0A%09%09for(%3B%3B)%0A%09%09%7B%0A%09%09%09char%20Command%5B=
COMMANDMAXC%5D%3B%0A%09%09%09gets(Command)%3B%0A%09%09%09ParseCommand(Comma=
nd)%3B%0A%09%09%7D%0A%09%7D%0A%09catch(Exception%20%26e)%0A%09%7B%0A%09%09p=
rintf(e.GetMessage())%3B%0A%09%09return%201%3B%0A%09%7D%0A%09return%200%3B%=
0A%7D" quality=3D"high" allowscriptaccess=3D"always" type=3D"application/x-=
shockwave-flash" pluginspage=3D"http://www.macromedia.com/go/getflashplayer=
" style=3D"">&nbsp;<a href=3D"javascript:void()" title=3D"=E6=94=B6=E8=97=
=8F=E8=BF=99=E6=AE=B5=E4=BB=A3=E7=A0=81" onclick=3D"code_favorites_do_favor=
ite(this);return false;"><img class=3D"star" src=3D"http://andylin02.iteye.=
com/images/icon_star.png" alt=3D"=E6=94=B6=E8=97=8F=E4=BB=A3=E7=A0=81" widt=
h=3D"15" height=3D"14"><img class=3D"spinner" src=3D"http://andylin02.iteye=
.com/images/spinner.gif" style=3D"display: none;"></a></div></div><ol start=
=3D"1" class=3D"dp-cpp"><li><span><span class=3D"comment">/*&nbsp;P2P&nbsp;=
=E7=A8=8B=E5=BA=8F=E5=AE=A2=E6=88=B7=E7=AB=AF</span>&nbsp;</span></li><li><=
span><span class=3D"comment">*&nbsp;</span>&nbsp;</span></li><li><span><spa=
n class=3D"comment">*&nbsp;=E6=96=87=E4=BB=B6=E5=90=8D=EF=BC=9AP2PClient.c<=
/span>&nbsp;</span></li><li><span><span class=3D"comment">*</span>&nbsp;</s=
pan></li><li><span><span class=3D"comment">*&nbsp;=E6=97=A5=E6=9C=9F=EF=BC=
=9A2004-5-21</span>&nbsp;</span></li><li><span><span class=3D"comment">*</s=
pan>&nbsp;</span></li><li><span><span class=3D"comment">*&nbsp;=E4=BD=9C=E8=
=80=85=EF=BC=9Ashootingstars(zhouhuis22@sina.com)</span>&nbsp;</span></li><=
li><span><span class=3D"comment">*</span>&nbsp;</span></li><li><span><span =
class=3D"comment">*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&=
nbsp;&nbsp;</span></li><li><span><span class=3D"preprocessor">#pragma&nbsp;=
comment(lib,"ws2_32.lib")</span><span>&nbsp;&nbsp;</span></span></li><li><s=
pan>&nbsp;&nbsp;</span></li><li><span><span class=3D"preprocessor">#include=
&nbsp;"windows.h"</span><span>&nbsp;&nbsp;</span></span></li><li><span><spa=
n class=3D"preprocessor">#include&nbsp;"..\proto.h"</span><span>&nbsp;&nbsp=
;</span></span></li><li><span><span class=3D"preprocessor">#include&nbsp;".=
.\Exception.h"</span><span>&nbsp;&nbsp;</span></span></li><li><span><span c=
lass=3D"preprocessor">#include&nbsp;&lt;iostream&gt;</span><span>&nbsp;&nbs=
p;</span></span></li><li><span><span class=3D"keyword">using</span><span>&n=
bsp;</span><span class=3D"keyword">namespace</span><span>&nbsp;std;&nbsp;&n=
bsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>UserList=
&nbsp;ClientList;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li>=
<li><span><span class=3D"preprocessor">#define&nbsp;COMMANDMAXC&nbsp;256</s=
pan><span>&nbsp;&nbsp;</span></span></li><li><span><span class=3D"preproces=
sor">#define&nbsp;MAXRETRY&nbsp;&nbsp;&nbsp;&nbsp;5</span><span>&nbsp;&nbsp=
;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>SOCKET&nbsp=
;PrimaryUDP;&nbsp;&nbsp;</span></li><li><span><span class=3D"datatypes">cha=
r</span><span>&nbsp;UserName[10];&nbsp;&nbsp;</span></span></li><li><span><=
span class=3D"datatypes">char</span><span>&nbsp;ServerIP[20];&nbsp;&nbsp;</=
span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=3D=
"datatypes">bool</span><span>&nbsp;RecvedACK;&nbsp;&nbsp;</span></span></li=
><li><span>&nbsp;&nbsp;</span></li><li><span><span class=3D"keyword">void</=
span><span>&nbsp;InitWinSock()&nbsp;&nbsp;</span></span></li><li><span>{&nb=
sp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;WSADATA&nbsp;wsaData=
;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;=
&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</span><span>&nbsp;(WSAStartup(=
MAKEWORD(2,&nbsp;2),&nbsp;&amp;wsaData)&nbsp;!=3D&nbsp;0)&nbsp;&nbsp;</span=
></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li=
><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span class=
=3D"string">"Windows&nbsp;sockets&nbsp;2.2&nbsp;startup"</span><span>);&nbs=
p;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;<span class=3D"keyword">throw</span><span>&nbsp;Exception(</span>=
<span class=3D"string">""</span><span>);&nbsp;&nbsp;</span></span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbs=
p;&nbsp;&nbsp;<span class=3D"keyword">else</span><span>{&nbsp;&nbsp;</span>=
</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print=
f(<span class=3D"string">"Using&nbsp;%s&nbsp;(Status:&nbsp;%s)\n"</span><sp=
an>,&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wsaData.szDescription,&nbsp;wsaDa=
ta.szSystemStatus);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span class=3D"string">"with&nbsp;API&nbsp=
;versions&nbsp;%d.%d&nbsp;to&nbsp;%d.%d\n\n"</span><span>,&nbsp;&nbsp;</spa=
n></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;LOBYTE(wsaData.wVersion),&nbsp;HIBYTE(wsaData.wVersion=
),&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOBYTE(wsaData.wHighVersion),&nbsp;HIBYTE(=
wsaData.wHighVersion));&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;=
&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li><li><span=
>&nbsp;&nbsp;</span></li><li><span>SOCKET&nbsp;mksock(<span class=3D"dataty=
pes">int</span><span>&nbsp;type)&nbsp;&nbsp;</span></span></li><li><span>{&=
nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;SOCKET&nbsp;sock&n=
bsp;=3D&nbsp;socket(AF_INET,&nbsp;type,&nbsp;0);&nbsp;&nbsp;</span></li><li=
><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</span><span>&nbsp=
;(sock&nbsp;&lt;&nbsp;0)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbs=
p;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;printf(<span class=3D"string">"create&nbsp;socket&nbs=
p;error"</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">throw</span><s=
pan>&nbsp;Exception(</span><span class=3D"string">""</span><span>);&nbsp;&n=
bsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</spa=
n></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">return</sp=
an><span>&nbsp;sock;&nbsp;&nbsp;</span></span></li><li><span>}&nbsp;&nbsp;<=
/span></li><li><span>&nbsp;&nbsp;</span></li><li><span>stUserListNode&nbsp;=
GetUser(<span class=3D"datatypes">char</span><span>&nbsp;*username)&nbsp;&n=
bsp;</span></span></li><li><span>{&nbsp;&nbsp;</span></li><li><span>&nbsp;&=
nbsp;&nbsp;&nbsp;<span class=3D"keyword">for</span><span>(UserList::iterato=
r&nbsp;UserIterator=3DClientList.begin();&nbsp;&nbsp;</span></span></li><li=
><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UserIterator!=3DClie=
ntList.end();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;++UserIterator)&nbsp;&nbsp;</span></li><li><span>&nbsp;=
&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</span><span>(&nbsp;str=
cmp(&nbsp;((*UserIterator)-&gt;userName),&nbsp;username)&nbsp;=3D=3D&nbsp;0=
&nbsp;)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">return=
</span><span>&nbsp;*(*UserIterator);&nbsp;&nbsp;</span></span></li><li><spa=
n>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&n=
bsp;&nbsp;<span class=3D"keyword">throw</span><span>&nbsp;Exception(</span>=
<span class=3D"string">"not&nbsp;find&nbsp;this&nbsp;user"</span><span>);&n=
bsp;&nbsp;</span></span></li><li><span>}&nbsp;&nbsp;</span></li><li><span>&=
nbsp;&nbsp;</span></li><li><span><span class=3D"keyword">void</span><span>&=
nbsp;BindSock(SOCKET&nbsp;sock)&nbsp;&nbsp;</span></span></li><li><span>{&n=
bsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;sockaddr_in&nbsp;si=
n;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;sin.sin_addr.S_=
un.S_addr&nbsp;=3D&nbsp;INADDR_ANY;&nbsp;&nbsp;</span></li><li><span>&nbsp;=
&nbsp;&nbsp;&nbsp;sin.sin_family&nbsp;=3D&nbsp;AF_INET;&nbsp;&nbsp;</span><=
/li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;sin.sin_port&nbsp;=3D&nbsp;0;&nbsp;&n=
bsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;<span class=3D"keyword">if</span><span>&nbsp;(bind(sock,&nbsp;(</s=
pan><span class=3D"keyword">struct</span><span>&nbsp;sockaddr*)&amp;sin,&nb=
sp;</span><span class=3D"keyword">sizeof</span><span>(sin))&nbsp;&lt;&nbsp;=
0)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;<span class=3D"keyword">throw</span><span>&nbsp;Exception(<=
/span><span class=3D"string">"bind&nbsp;error"</span><span>);&nbsp;&nbsp;</=
span></span></li><li><span>}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;<=
/span></li><li><span><span class=3D"keyword">void</span><span>&nbsp;Connect=
ToServer(SOCKET&nbsp;sock,</span><span class=3D"datatypes">char</span><span=
>&nbsp;*username,&nbsp;</span><span class=3D"datatypes">char</span><span>&n=
bsp;*serverip)&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&nbsp;</span>=
</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;sockaddr_in&nbsp;remote;&nbsp;&nbsp;=
</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;remote.sin_addr.S_un.S_addr&n=
bsp;=3D&nbsp;inet_addr(serverip);&nbsp;&nbsp;</span></li><li><span>&nbsp;&n=
bsp;&nbsp;&nbsp;remote.sin_family&nbsp;=3D&nbsp;AF_INET;&nbsp;&nbsp;</span>=
</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;remote.sin_port&nbsp;=3D&nbsp;htons(=
SERVER_PORT);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;stMessage&nbsp;sendbuf;&nbsp;&nbsp;</span></l=
i><li><span>&nbsp;&nbsp;&nbsp;&nbsp;sendbuf.iMessageType&nbsp;=3D&nbsp;LOGI=
N;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;strncpy(sendbuf=
.message.loginmember.userName,&nbsp;username,&nbsp;10);&nbsp;&nbsp;</span><=
/li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;sen=
dto(sock,&nbsp;(<span class=3D"keyword">const</span><span>&nbsp;</span><spa=
n class=3D"datatypes">char</span><span>*)&amp;sendbuf,&nbsp;</span><span cl=
ass=3D"keyword">sizeof</span><span>(sendbuf),&nbsp;0,&nbsp;(</span><span cl=
ass=3D"keyword">const</span><span>&nbsp;sockaddr*)&amp;remote,</span><span =
class=3D"keyword">sizeof</span><span>(remote));&nbsp;&nbsp;</span></span></=
li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<spa=
n class=3D"datatypes">int</span><span>&nbsp;usercount;&nbsp;&nbsp;</span></=
span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">int</=
span><span>&nbsp;fromlen&nbsp;=3D&nbsp;</span><span class=3D"keyword">sizeo=
f</span><span>(remote);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp=
;&nbsp;&nbsp;<span class=3D"datatypes">int</span><span>&nbsp;iread&nbsp;=3D=
&nbsp;recvfrom(sock,&nbsp;(</span><span class=3D"datatypes">char</span><spa=
n>&nbsp;*)&amp;usercount,&nbsp;</span><span class=3D"keyword">sizeof</span>=
<span>(</span><span class=3D"datatypes">int</span><span>),&nbsp;0,&nbsp;(so=
ckaddr&nbsp;*)&amp;remote,&nbsp;&amp;fromlen);&nbsp;&nbsp;</span></span></l=
i><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</span><span>=
(iread&lt;=3D0)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&=
nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;<span class=3D"keyword">throw</span><span>&nbsp;Exception(</sp=
an><span class=3D"string">"Login&nbsp;error\n"</span><span>);&nbsp;&nbsp;</=
span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li=
><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span =
class=3D"comment">//&nbsp;=E7=99=BB=E5=BD=95=E5=88=B0=E6=9C=8D=E5=8A=A1=E7=
=AB=AF=E5=90=8E=EF=BC=8C=E6=8E=A5=E6=94=B6=E6=9C=8D=E5=8A=A1=E7=AB=AF=E5=8F=
=91=E6=9D=A5=E7=9A=84=E5=B7=B2=E7=BB=8F=E7=99=BB=E5=BD=95=E7=9A=84=E7=94=A8=
=E6=88=B7=E7=9A=84=E4=BF=A1=E6=81=AF</span><span>&nbsp;&nbsp;</span></span>=
</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=3D"string">"=
Have&nbsp;"</span><span>&lt;&lt;usercount&lt;&lt;</span><span class=3D"stri=
ng">"&nbsp;users&nbsp;logined&nbsp;server:"</span><span>&lt;&lt;endl;&nbsp;=
&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"k=
eyword">for</span><span>(</span><span class=3D"datatypes">int</span><span>&=
nbsp;i&nbsp;=3D&nbsp;0;i&lt;usercount;i++)&nbsp;&nbsp;</span></span></li><l=
i><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stUserListNode&nbsp;*node&nbsp;=3D&=
nbsp;<span class=3D"keyword">new</span><span>&nbsp;stUserListNode;&nbsp;&nb=
sp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;recvfrom(sock,&nbsp;(<span class=3D"datatypes">char</span><span>*)node=
,&nbsp;</span><span class=3D"keyword">sizeof</span><span>(stUserListNode),&=
nbsp;0,&nbsp;(sockaddr&nbsp;*)&amp;remote,&nbsp;&amp;fromlen);&nbsp;&nbsp;<=
/span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;ClientList.push_back(node);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=3D"string">"User=
name:"</span><span>&lt;&lt;node-&gt;userName&lt;&lt;endl;&nbsp;&nbsp;</span=
></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in_a=
ddr&nbsp;tmp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;tmp.S_un.S_addr&nbsp;=3D&nbsp;htonl(node-&gt;ip);&nbsp;=
&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;cout&lt;&lt;<span class=3D"string">"UserIP:"</span><span>&lt;&lt;inet_ntoa=
(tmp)&lt;&lt;endl;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=3D"string">"UserPor=
t:"</span><span>&lt;&lt;node-&gt;port&lt;&lt;endl;&nbsp;&nbsp;</span></span=
></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt=
;<span class=3D"string">""</span><span>&lt;&lt;endl;&nbsp;&nbsp;</span></sp=
an></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><spa=
n>}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span><spa=
n class=3D"keyword">void</span><span>&nbsp;OutputUsage()&nbsp;&nbsp;</span>=
</span></li><li><span>{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;=
&nbsp;cout&lt;&lt;<span class=3D"string">"You&nbsp;can&nbsp;input&nbsp;you&=
nbsp;command:\n"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class=3D"string">"=
Command&nbsp;Type:\"send\",\"exit\",\"getu\"\n"</span><span>&nbsp;&nbsp;</s=
pan></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
lt;&lt;<span class=3D"string">"Example&nbsp;:&nbsp;send&nbsp;Username&nbsp;=
Message\n"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class=3D"string">"&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit\n"</span><span>&=
nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&lt;&lt;<span class=3D"string">"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getu\n"</span><span>&nbsp;&nbsp;</span></span=
></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;end=
l;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li><li><span>&nbs=
p;&nbsp;</span></li><li><span><span class=3D"comment">/*&nbsp;=E8=BF=99=E6=
=98=AF=E4=B8=BB=E8=A6=81=E7=9A=84=E5=87=BD=E6=95=B0=EF=BC=9A=E5=8F=91=E9=80=
=81=E4=B8=80=E4=B8=AA=E6=B6=88=E6=81=AF=E7=BB=99=E6=9F=90=E4=B8=AA=E7=94=A8=
=E6=88=B7(C)</span>&nbsp;</span></li><li><span><span class=3D"comment">*=E6=
=B5=81=E7=A8=8B=EF=BC=9A=E7=9B=B4=E6=8E=A5=E5=90=91=E6=9F=90=E4=B8=AA=E7=94=
=A8=E6=88=B7=E7=9A=84=E5=A4=96=E7=BD=91IP=E5=8F=91=E9=80=81=E6=B6=88=E6=81=
=AF=EF=BC=8C=E5=A6=82=E6=9E=9C=E6=AD=A4=E5=89=8D=E6=B2=A1=E6=9C=89=E8=81=94=
=E7=B3=BB=E8=BF=87</span>&nbsp;</span></li><li><span><span class=3D"comment=
">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=E9=82=A3=E4=B9=88=E6=AD=A4=E6=B6=88=
=E6=81=AF=E5=B0=86=E6=97=A0=E6=B3=95=E5=8F=91=E9=80=81=EF=BC=8C=E5=8F=91=E9=
=80=81=E7=AB=AF=E7=AD=89=E5=BE=85=E8=B6=85=E6=97=B6=E3=80=82</span>&nbsp;</=
span></li><li><span><span class=3D"comment">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;=E8=B6=85=E6=97=B6=E5=90=8E=EF=BC=8C=E5=8F=91=E9=80=81=E7=AB=AF=E5=B0=
=86=E5=8F=91=E9=80=81=E4=B8=80=E4=B8=AA=E8=AF=B7=E6=B1=82=E4=BF=A1=E6=81=AF=
=E5=88=B0=E6=9C=8D=E5=8A=A1=E7=AB=AF=EF=BC=8C</span>&nbsp;</span></li><li><=
span><span class=3D"comment">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=E8=A6=81=
=E6=B1=82=E6=9C=8D=E5=8A=A1=E7=AB=AF=E5=8F=91=E9=80=81=E7=BB=99=E5=AE=A2=E6=
=88=B7C=E4=B8=80=E4=B8=AA=E8=AF=B7=E6=B1=82=EF=BC=8C=E8=AF=B7=E6=B1=82C=E7=
=BB=99=E6=9C=AC=E6=9C=BA=E5=8F=91=E9=80=81=E6=89=93=E6=B4=9E=E6=B6=88=E6=81=
=AF</span>&nbsp;</span></li><li><span><span class=3D"comment">*&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;=E4=BB=A5=E4=B8=8A=E6=B5=81=E7=A8=8B=E5=B0=86=E9=87=
=8D=E5=A4=8DMAXRETRY=E6=AC=A1</span>&nbsp;</span></li><li><span><span class=
=3D"comment">*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span =
class=3D"datatypes">bool</span><span>&nbsp;SendMessageTo(</span><span class=
=3D"datatypes">char</span><span>&nbsp;*UserName,&nbsp;</span><span class=3D=
"datatypes">char</span><span>&nbsp;*Message)&nbsp;&nbsp;</span></span></li>=
<li><span>{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span =
class=3D"datatypes">char</span><span>&nbsp;realmessage[256];&nbsp;&nbsp;</s=
pan></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span class=
=3D"datatypes">int</span><span>&nbsp;UserIP;&nbsp;&nbsp;</span></span></li>=
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span class=3D"datatypes">s=
hort</span><span>&nbsp;UserPort;&nbsp;&nbsp;</span></span></li><li><span>&n=
bsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">bool</span><span>&nbsp;Find=
User&nbsp;=3D&nbsp;</span><span class=3D"keyword">false</span><span>;&nbsp;=
&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"k=
eyword">for</span><span>(UserList::iterator&nbsp;UserIterator=3DClientList.=
begin();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;UserIterator!=3DClientList.end();&nbsp;&nbsp;</span><=
/li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++UserIterato=
r)&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</=
span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span c=
lass=3D"keyword">if</span><span>(&nbsp;strcmp(&nbsp;((*UserIterator)-&gt;us=
erName),&nbsp;UserName)&nbsp;=3D=3D&nbsp;0&nbsp;)&nbsp;&nbsp;</span></span>=
</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp=
;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;UserIP&nbsp;=3D&nbsp;(*UserIterator)-&gt;ip;&nbsp;&nbsp=
;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;UserPort&nbsp;=3D&nbsp;(*UserIterator)-&gt;port;&nbsp;&=
nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;FindUser&nbsp;=3D&nbsp;<span class=3D"keyword">true=
</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;=
&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</span><span>(!Find=
User)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">return</span><span>&nbsp;</span>=
<span class=3D"keyword">false</span><span>;&nbsp;&nbsp;</span></span></li><=
li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;strcpy(r=
ealmessage,&nbsp;Message);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;<span class=3D"keyword">for</span><span>(</span><span class=3D"dat=
atypes">int</span><span>&nbsp;i=3D0;i&lt;MAXRETRY;i++)&nbsp;&nbsp;</span></=
span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><s=
pan>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvedACK&nbsp;=3D&nbsp=
;<span class=3D"keyword">false</span><span>;&nbsp;&nbsp;</span></span></li>=
<li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;sockaddr_in&nbsp;remote;&nbsp;&nbsp;</span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remote.sin_addr.S_un.S_addr=
&nbsp;=3D&nbsp;htonl(UserIP);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remote.sin_family&nbsp;=3D&nbsp;AF_INET=
;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;remote.sin_port&nbsp;=3D&nbsp;htons(UserPort);&nbsp;&nbsp;</span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stP2PMessage&n=
bsp;MessageHead;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;MessageHead.iMessageType&nbsp;=3D&nbsp;P2PMESSAGE;&n=
bsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;MessageHead.iStringLen&nbsp;=3D&nbsp;(<span class=3D"datatypes">int</s=
pan><span>)strlen(realmessage)+1;&nbsp;&nbsp;</span></span></li><li><span>&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">in=
t</span><span>&nbsp;isend&nbsp;=3D&nbsp;sendto(PrimaryUDP,&nbsp;(</span><sp=
an class=3D"keyword">const</span><span>&nbsp;</span><span class=3D"datatype=
s">char</span><span>&nbsp;*)&amp;MessageHead,&nbsp;</span><span class=3D"ke=
yword">sizeof</span><span>(MessageHead),&nbsp;0,&nbsp;(</span><span class=
=3D"keyword">const</span><span>&nbsp;sockaddr*)&amp;remote,&nbsp;</span><sp=
an class=3D"keyword">sizeof</span><span>(remote));&nbsp;&nbsp;</span></span=
></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isend&nbsp;=
=3D&nbsp;sendto(PrimaryUDP,&nbsp;(<span class=3D"keyword">const</span><span=
>&nbsp;</span><span class=3D"datatypes">char</span><span>&nbsp;*)&amp;realm=
essage,&nbsp;MessageHead.iStringLen,&nbsp;0,&nbsp;(</span><span class=3D"ke=
yword">const</span><span>&nbsp;sockaddr*)&amp;remote,&nbsp;</span><span cla=
ss=3D"keyword">sizeof</span><span>(remote));&nbsp;&nbsp;</span></span></li>=
<li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;<span class=3D"comment">//&nbsp;=E7=AD=89=E5=BE=85=E6=8E=
=A5=E6=94=B6=E7=BA=BF=E7=A8=8B=E5=B0=86=E6=AD=A4=E6=A0=87=E8=AE=B0=E4=BF=AE=
=E6=94=B9</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">for</span><span=
>(</span><span class=3D"datatypes">int</span><span>&nbsp;j=3D0;j&lt;10;j++)=
&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</s=
pan><span>(RecvedACK)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;<span class=3D"keyword">return</span><span>&nbsp;</span><span class=
=3D"keyword">true</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span =
class=3D"keyword">else</span><span>&nbsp;&nbsp;</span></span></li><li><span=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;Sleep(300);&nbsp;&nbsp;</span></li><li><span>&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>=
&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;<span class=3D"comment">//&nbsp;=E6=B2=A1=E6=9C=89=E6=8E=A5=E6=94=B6=
=E5=88=B0=E7=9B=AE=E6=A0=87=E4=B8=BB=E6=9C=BA=E7=9A=84=E5=9B=9E=E5=BA=94=EF=
=BC=8C=E8=AE=A4=E4=B8=BA=E7=9B=AE=E6=A0=87=E4=B8=BB=E6=9C=BA=E7=9A=84=E7=AB=
=AF=E5=8F=A3=E6=98=A0=E5=B0=84=E6=B2=A1=E6=9C=89</span><span>&nbsp;&nbsp;</=
span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
<span class=3D"comment">//&nbsp;=E6=89=93=E5=BC=80=EF=BC=8C=E9=82=A3=E4=B9=
=88=E5=8F=91=E9=80=81=E8=AF=B7=E6=B1=82=E4=BF=A1=E6=81=AF=E7=BB=99=E6=9C=8D=
=E5=8A=A1=E5=99=A8=EF=BC=8C=E8=A6=81=E6=9C=8D=E5=8A=A1=E5=99=A8=E5=91=8A=E8=
=AF=89=E7=9B=AE=E6=A0=87=E4=B8=BB=E6=9C=BA</span><span>&nbsp;&nbsp;</span><=
/span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span =
class=3D"comment">//&nbsp;=E6=89=93=E5=BC=80=E6=98=A0=E5=B0=84=E7=AB=AF=E5=
=8F=A3=EF=BC=88UDP=E6=89=93=E6=B4=9E=EF=BC=89</span><span>&nbsp;&nbsp;</spa=
n></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;soc=
kaddr_in&nbsp;server;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;server.sin_addr.S_un.S_addr&nbsp;=3D&nbsp;inet_=
addr(ServerIP);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;server.sin_family&nbsp;=3D&nbsp;AF_INET;&nbsp;&nbsp;<=
/span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server=
.sin_port&nbsp;=3D&nbsp;htons(SERVER_PORT);&nbsp;&nbsp;</span></li><li><spa=
n>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;stMessage&nbsp;transMessage;&nbsp;&nbsp;</span></li><li><span>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transMessage.iMessageType&nbsp;=
=3D&nbsp;P2PTRANS;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;strcpy(transMessage.message.translatemessage.userN=
ame,&nbsp;UserName);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendto(Primary=
UDP,&nbsp;(<span class=3D"keyword">const</span><span>&nbsp;</span><span cla=
ss=3D"datatypes">char</span><span>*)&amp;transMessage,&nbsp;</span><span cl=
ass=3D"keyword">sizeof</span><span>(transMessage),&nbsp;0,&nbsp;(</span><sp=
an class=3D"keyword">const</span><span>&nbsp;sockaddr*)&amp;server,&nbsp;</=
span><span class=3D"keyword">sizeof</span><span>(server));&nbsp;&nbsp;</spa=
n></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sle=
ep(100);<span class=3D"comment">//&nbsp;=E7=AD=89=E5=BE=85=E5=AF=B9=E6=96=
=B9=E5=85=88=E5=8F=91=E9=80=81=E4=BF=A1=E6=81=AF=E3=80=82</span><span>&nbsp=
;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</=
span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">return<=
/span><span>&nbsp;</span><span class=3D"keyword">false</span><span>;&nbsp;&=
nbsp;</span></span></li><li><span>}&nbsp;&nbsp;</span></li><li><span>&nbsp;=
&nbsp;</span></li><li><span><span class=3D"comment">//&nbsp;=E8=A7=A3=E6=9E=
=90=E5=91=BD=E4=BB=A4=EF=BC=8C=E6=9A=82=E6=97=B6=E5=8F=AA=E6=9C=89exit=E5=
=92=8Csend=E5=91=BD=E4=BB=A4</span><span>&nbsp;&nbsp;</span></span></li><li=
><span><span class=3D"comment">//&nbsp;=E6=96=B0=E5=A2=9Egetu=E5=91=BD=E4=
=BB=A4=EF=BC=8C=E8=8E=B7=E5=8F=96=E5=BD=93=E5=89=8D=E6=9C=8D=E5=8A=A1=E5=99=
=A8=E7=9A=84=E6=89=80=E6=9C=89=E7=94=A8=E6=88=B7</span><span>&nbsp;&nbsp;</=
span></span></li><li><span><span class=3D"keyword">void</span><span>&nbsp;P=
arseCommand(</span><span class=3D"datatypes">char</span><span>&nbsp;*&nbsp;=
CommandLine)&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&nbsp;</span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</span><span=
>(strlen(CommandLine)&lt;4)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">return</sp=
an><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;=
<span class=3D"datatypes">char</span><span>&nbsp;Command[10];&nbsp;&nbsp;</=
span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;strncpy(Command,&nbsp;Co=
mmandLine,&nbsp;4);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;Command[4]=3D<span class=3D"string">'\0'</span><span>;&nbsp;&nbsp;</span>=
</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&=
nbsp;<span class=3D"keyword">if</span><span>(strcmp(Command,</span><span cl=
ass=3D"string">"exit"</span><span>)=3D=3D0)&nbsp;&nbsp;</span></span></li><=
li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stMessage&nbsp;sendbuf;&nbsp;&nbsp=
;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;send=
buf.iMessageType&nbsp;=3D&nbsp;LOGOUT;&nbsp;&nbsp;</span></li><li><span>&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strncpy(sendbuf.message.logout=
member.userName,&nbsp;UserName,&nbsp;10);&nbsp;&nbsp;</span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sockaddr_in&nbsp;server;&nb=
sp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;server.sin_addr.S_un.S_addr&nbsp;=3D&nbsp;inet_addr(ServerIP);&nbsp;&nb=
sp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se=
rver.sin_family&nbsp;=3D&nbsp;AF_INET;&nbsp;&nbsp;</span></li><li><span>&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.sin_port&nbsp;=3D&nbsp;=
htons(SERVER_PORT);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></l=
i><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendto(PrimaryU=
DP,(<span class=3D"keyword">const</span><span>&nbsp;</span><span class=3D"d=
atatypes">char</span><span>*)&amp;sendbuf,&nbsp;</span><span class=3D"keywo=
rd">sizeof</span><span>(sendbuf),&nbsp;0,&nbsp;(</span><span class=3D"keywo=
rd">const</span><span>&nbsp;sockaddr&nbsp;*)&amp;server,&nbsp;</span><span =
class=3D"keyword">sizeof</span><span>(server));&nbsp;&nbsp;</span></span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shutdown(Prima=
ryUDP,&nbsp;2);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;closesocket(PrimaryUDP);&nbsp;&nbsp;</span></li><li><=
span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(0);&nbsp;&nbsp;</=
span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><s=
pan>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">else</span><span>&nbsp;=
</span><span class=3D"keyword">if</span><span>(strcmp(Command,</span><span =
class=3D"string">"send"</span><span>)=3D=3D0)&nbsp;&nbsp;</span></span></li=
><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">char</=
span><span>&nbsp;sendname[20];&nbsp;&nbsp;</span></span></li><li><span>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">char<=
/span><span>&nbsp;message[COMMANDMAXC];&nbsp;&nbsp;</span></span></li><li><=
span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatyp=
es">int</span><span>&nbsp;i;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">for</span=
><span>(i=3D5;;i++)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span clas=
s=3D"keyword">if</span><span>(CommandLine[i]!=3D</span><span class=3D"strin=
g">'&nbsp;'</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;sendname[i-5]=3DCommandLine[i];&nbsp;&nbsp;</span></li><li><spa=
n>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<=
span class=3D"keyword">else</span><span>&nbsp;&nbsp;</span></span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendname[i-5]=3D=
<span class=3D"string">'\0'</span><span>;&nbsp;&nbsp;</span></span></li><li=
><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">break</span><span>;&nbs=
p;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><spa=
n>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strcpy(message,&nbsp;&amp=
;(CommandLine[i+1]));&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</span><span>(SendMes=
sageTo(sendname,&nbsp;message))&nbsp;&nbsp;</span></span></li><li><span>&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf=
(<span class=3D"string">"Send&nbsp;OK!\n"</span><span>);&nbsp;&nbsp;</span>=
</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span=
 class=3D"keyword">else</span><span>&nbsp;&nbsp;&nbsp;</span></span></li><l=
i><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;printf(<span class=3D"string">"Send&nbsp;Failure!\n"</span><span>);&nb=
sp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;=
</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">else<=
/span><span>&nbsp;</span><span class=3D"keyword">if</span><span>(strcmp(Com=
mand,</span><span class=3D"string">"getu"</span><span>)=3D=3D0)&nbsp;&nbsp;=
</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D=
"datatypes">int</span><span>&nbsp;command&nbsp;=3D&nbsp;GETALLUSER;&nbsp;&n=
bsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;sockaddr_in&nbsp;server;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.sin_addr.S_un.S_addr&nbsp;=3D&n=
bsp;inet_addr(ServerIP);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.sin_family&nbsp;=3D&nbsp;AF_INET;&nbs=
p;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;server.sin_port&nbsp;=3D&nbsp;htons(SERVER_PORT);&nbsp;&nbsp;</span></li=
><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;sendto(PrimaryUDP,(<span class=3D"keyword">const</span><s=
pan>&nbsp;</span><span class=3D"datatypes">char</span><span>*)&amp;command,=
&nbsp;</span><span class=3D"keyword">sizeof</span><span>(command),&nbsp;0,&=
nbsp;(</span><span class=3D"keyword">const</span><span>&nbsp;sockaddr&nbsp;=
*)&amp;server,&nbsp;</span><span class=3D"keyword">sizeof</span><span>(serv=
er));&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbs=
p;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbs=
p;</span></li><li><span><span class=3D"comment">//&nbsp;=E6=8E=A5=E5=8F=97=
=E6=B6=88=E6=81=AF=E7=BA=BF=E7=A8=8B</span><span>&nbsp;&nbsp;</span></span>=
</li><li><span><span class=3D"datatypes">DWORD</span><span>&nbsp;WINAPI&nbs=
p;RecvThreadProc(</span><span class=3D"datatypes">LPVOID</span><span>&nbsp;=
lpParameter)&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&nbsp;</span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;sockaddr_in&nbsp;remote;&nbsp;&nbsp;</=
span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">int</=
span><span>&nbsp;sinlen&nbsp;=3D&nbsp;</span><span class=3D"keyword">sizeof=
</span><span>(remote);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;=
&nbsp;&nbsp;stP2PMessage&nbsp;recvbuf;&nbsp;&nbsp;</span></li><li><span>&nb=
sp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">for</span><span>(;;)&nbsp;&nbs=
p;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span>=
</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=
=3D"datatypes">int</span><span>&nbsp;iread&nbsp;=3D&nbsp;recvfrom(PrimaryUD=
P,&nbsp;(</span><span class=3D"datatypes">char</span><span>&nbsp;*)&amp;rec=
vbuf,&nbsp;</span><span class=3D"keyword">sizeof</span><span>(recvbuf),&nbs=
p;0,&nbsp;(sockaddr&nbsp;*)&amp;remote,&nbsp;&amp;sinlen);&nbsp;&nbsp;</spa=
n></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<sp=
an class=3D"keyword">if</span><span>(iread&lt;=3D0)&nbsp;&nbsp;</span></spa=
n></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nb=
sp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;printf(<span class=3D"string">"recv&nbsp;error\n"</sp=
an><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">co=
ntinue</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">switch</s=
pan><span>(recvbuf.iMessageType)&nbsp;&nbsp;</span></span></li><li><span>&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keywor=
d">case</span><span>&nbsp;P2PMESSAGE:&nbsp;&nbsp;</span></span></li><li><sp=
an>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comm=
ent">//&nbsp;=E6=8E=A5=E6=94=B6=E5=88=B0P2P=E7=9A=84=E6=B6=88=E6=81=AF</spa=
n><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span=
 class=3D"datatypes">char</span><span>&nbsp;*comemessage=3D&nbsp;</span><sp=
an class=3D"keyword">new</span><span>&nbsp;</span><span class=3D"datatypes"=
>char</span><span>[recvbuf.iStringLen];&nbsp;&nbsp;</span></span></li><li><=
span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">int</span><span>&nbsp;i=
read1&nbsp;=3D&nbsp;recvfrom(PrimaryUDP,&nbsp;comemessage,&nbsp;256,&nbsp;0=
,&nbsp;(sockaddr&nbsp;*)&amp;remote,&nbsp;&amp;sinlen);&nbsp;&nbsp;</span><=
/span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comemessage[iread1-1]&nbsp;=3D&nb=
sp;<span class=3D"string">'\0'</span><span>;&nbsp;&nbsp;</span></span></li>=
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">if</span><span>(irea=
d1&lt;=3D0)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">throw</span><span>&nbsp;Excep=
tion(</span><span class=3D"string">"Recv&nbsp;Message&nbsp;Error\n"</span><=
span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span =
class=3D"keyword">else</span><span>&nbsp;&nbsp;</span></span></li><li><span=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span class=3D"string">"Recv&nbsp;a&nbsp;=
Message:%s\n"</span><span>,comemessage);&nbsp;&nbsp;</span></span></li><li>=
<span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;stP2PMessage&nbsp;sendbuf;&nbsp;&nbsp;</span></li><li><span>&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendbuf.iMessageType&nbsp;=3D&nbsp;=
P2PMESSAGEACK;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;sendto(PrimaryUDP,&nbsp;(<span class=3D"keyword">const</s=
pan><span>&nbsp;</span><span class=3D"datatypes">char</span><span>*)&amp;se=
ndbuf,&nbsp;</span><span class=3D"keyword">sizeof</span><span>(sendbuf),&nb=
sp;0,&nbsp;(</span><span class=3D"keyword">const</span><span>&nbsp;sockaddr=
*)&amp;remote,&nbsp;</span><span class=3D"keyword">sizeof</span><span>(remo=
te));&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&=
nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;<span class=3D"keyword">delete</span><span>&nbsp;[]comemessage;&nbsp=
;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"key=
word">break</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nb=
sp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">case</span><span>&nbs=
p;P2PSOMEONEWANTTOCALLYOU:&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbs=
p;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment">//&nbs=
p;=E6=8E=A5=E6=94=B6=E5=88=B0=E6=89=93=E6=B4=9E=E5=91=BD=E4=BB=A4=EF=BC=8C=
=E5=90=91=E6=8C=87=E5=AE=9A=E7=9A=84IP=E5=9C=B0=E5=9D=80=E6=89=93=E6=B4=9E<=
/span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p=
rintf(<span class=3D"string">"Recv&nbsp;p2someonewanttocallyou&nbsp;data\n"=
</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;sockaddr_in&nbsp;remote;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;remote.sin_addr.S_un.S_addr&nbsp;=3D&nbsp;htonl(recvbuf.iStringLen);&=
nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remote.sin_family&nbs=
p;=3D&nbsp;AF_INET;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r=
emote.sin_port&nbsp;=3D&nbsp;htons(recvbuf.Port);&nbsp;&nbsp;</span></li><l=
i><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=
=3D"comment">//&nbsp;UDP&nbsp;hole&nbsp;punching</span><span>&nbsp;&nbsp;</=
span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stP2PMessage&nbsp;message;&=
nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message.iMessageType&=
nbsp;=3D&nbsp;P2PTRASH;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;sendto(PrimaryUDP,&nbsp;(<span class=3D"keyword">const</span><span>&nbsp=
;</span><span class=3D"datatypes">char</span><span>&nbsp;*)&amp;message,&nb=
sp;</span><span class=3D"keyword">sizeof</span><span>(message),&nbsp;0,&nbs=
p;(</span><span class=3D"keyword">const</span><span>&nbsp;sockaddr*)&amp;re=
mote,&nbsp;</span><span class=3D"keyword">sizeof</span><span>(remote));&nbs=
p;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;<span class=3D"keyword">break</span><span>;&nbsp;&nbsp;</s=
pan></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">case</span><span>&nb=
sp;P2PMESSAGEACK:&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span>=
</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment">//&nbsp;=E5=8F=
=91=E9=80=81=E6=B6=88=E6=81=AF=E7=9A=84=E5=BA=94=E7=AD=94</span><span>&nbsp=
;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvedACK&nbsp;=3D=
&nbsp;<span class=3D"keyword">true</span><span>;&nbsp;&nbsp;</span></span><=
/li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">break</span><spa=
n>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">ca=
se</span><span>&nbsp;P2PTRASH:&nbsp;&nbsp;</span></span></li><li><span>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;=
&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment">//=
&nbsp;=E5=AF=B9=E6=96=B9=E5=8F=91=E9=80=81=E7=9A=84=E6=89=93=E6=B4=9E=E6=B6=
=88=E6=81=AF=EF=BC=8C=E5=BF=BD=E7=95=A5=E6=8E=89=E3=80=82</span><span>&nbsp=
;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"com=
ment">//do&nbsp;nothing&nbsp;...</span><span>&nbsp;&nbsp;</span></span></li=
><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span class=3D"string">"Recv&nbsp;p2=
ptrash&nbsp;data\n"</span><span>);&nbsp;&nbsp;</span></span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">break</span><span>;&nbsp;&nbsp=
;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">case</span><span=
>&nbsp;GETALLUSER:&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span=
></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">int</span><s=
pan>&nbsp;usercount;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;<span class=3D"datatypes">int</span><span>&nbsp;fromlen&nbsp;=3D&nbs=
p;</span><span class=3D"keyword">sizeof</span><span>(remote);&nbsp;&nbsp;</=
span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">i=
nt</span><span>&nbsp;iread&nbsp;=3D&nbsp;recvfrom(PrimaryUDP,&nbsp;(</span>=
<span class=3D"datatypes">char</span><span>&nbsp;*)&amp;usercount,&nbsp;</s=
pan><span class=3D"keyword">sizeof</span><span>(</span><span class=3D"datat=
ypes">int</span><span>),&nbsp;0,&nbsp;(sockaddr&nbsp;*)&amp;remote,&nbsp;&a=
mp;fromlen);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<=
span class=3D"keyword">if</span><span>(iread&lt;=3D0)&nbsp;&nbsp;</span></s=
pan></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">throw<=
/span><span>&nbsp;Exception(</span><span class=3D"string">"Login&nbsp;error=
\n"</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;ClientList.clear();&nbsp;&nbsp;</span></li><li><span>&n=
bsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span clas=
s=3D"string">"Have&nbsp;"</span><span>&lt;&lt;usercount&lt;&lt;</span><span=
 class=3D"string">"&nbsp;users&nbsp;logined&nbsp;server:"</span><span>&lt;&=
lt;endl;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span=
 class=3D"keyword">for</span><span>(</span><span class=3D"datatypes">int</s=
pan><span>&nbsp;i&nbsp;=3D&nbsp;0;i&lt;usercount;i++)&nbsp;&nbsp;</span></s=
pan></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stUserListNode&nbsp;*node&nbsp=
;=3D&nbsp;<span class=3D"keyword">new</span><span>&nbsp;stUserListNode;&nbs=
p;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;recvfrom(PrimaryUDP,&nbsp;(<span class=3D"datatypes">char</span><spa=
n>*)node,&nbsp;</span><span class=3D"keyword">sizeof</span><span>(stUserLis=
tNode),&nbsp;0,&nbsp;(sockaddr&nbsp;*)&amp;remote,&nbsp;&amp;fromlen);&nbsp=
;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;ClientList.push_back(node);&nbsp;&nbsp;</span></li><li><span>&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=3D"string">"Us=
ername:"</span><span>&lt;&lt;node-&gt;userName&lt;&lt;endl;&nbsp;&nbsp;</sp=
an></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in_ad=
dr&nbsp;tmp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;tmp.S_un.S_addr&nbsp;=3D&nbsp;htonl(node-&gt;ip);&nbsp;&nbs=
p;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&l=
t;&lt;<span class=3D"string">"UserIP:"</span><span>&lt;&lt;inet_ntoa(tmp)&l=
t;&lt;endl;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=3D"string">"UserPort:"</span>=
<span>&lt;&lt;node-&gt;port&lt;&lt;endl;&nbsp;&nbsp;</span></span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=
=3D"string">""</span><span>&lt;&lt;endl;&nbsp;&nbsp;</span></span></li><li>=
<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;<span class=3D"keyword">break</span><span>;&nbsp;&nbsp;</span></spa=
n></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;=
&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li><li><span=
>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span =
class=3D"datatypes">int</span><span>&nbsp;main(</span><span class=3D"dataty=
pes">int</span><span>&nbsp;argc,&nbsp;</span><span class=3D"datatypes">char=
</span><span>*&nbsp;argv[])&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;=
&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword"=
>try</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp=
;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;InitWinSock();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;=
</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prima=
ryUDP&nbsp;=3D&nbsp;mksock(SOCK_DGRAM);&nbsp;&nbsp;</span></li><li><span>&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BindSock(PrimaryUDP);&nbsp;&n=
bsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=3D"string">"Please=
&nbsp;input&nbsp;server&nbsp;ip:"</span><span>;&nbsp;&nbsp;</span></span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;Ser=
verIP;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=3D"s=
tring">"Please&nbsp;input&nbsp;your&nbsp;name:"</span><span>;&nbsp;&nbsp;</=
span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
cin&gt;&gt;UserName;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConnectToServe=
r(PrimaryUDP,&nbsp;UserName,&nbsp;ServerIP);&nbsp;&nbsp;</span></li><li><sp=
an>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;<span class=3D"datatypes">HANDLE</span><span>&nbsp;threadhandle&n=
bsp;=3D&nbsp;CreateThread(NULL,&nbsp;0,&nbsp;RecvThreadProc,&nbsp;NULL,&nbs=
p;NULL,&nbsp;NULL);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CloseHandle(threadhandle);&nbsp;&nbsp;</sp=
an></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OutputUsa=
ge();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">for</=
span><span>(;;)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D=
"datatypes">char</span><span>&nbsp;Command[COMMANDMAXC];&nbsp;&nbsp;</span>=
</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;gets(Command);&nbsp;&nbsp;</span></li><li><span>&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParseComman=
d(Command);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D=
"keyword">catch</span><span>(Exception&nbsp;&amp;e)&nbsp;&nbsp;</span></spa=
n></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(e.GetMessage());&nb=
sp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;<span class=3D"keyword">return</span><span>&nbsp;1;&nbsp;&nbsp;</span><=
/span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><=
span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">return</span><span>&nb=
sp;0;&nbsp;&nbsp;</span></span></li><li><span>}&nbsp;&nbsp;</span></li></ol=
></div><pre class=3D"cpp" name=3D"code" codeable_id=3D"444643" codeable_typ=
e=3D"Blog" source_url=3D"http://andylin02.iteye.com/blog/444643" pre_index=
=3D"1" title=3D"P2P=E4=B9=8BUDP=E7=A9=BF=E9=80=8FNAT=E7=9A=84=E5=8E=9F=E7=
=90=86=E4=B8=8E=E5=AE=9E=E7=8E=B0" style=3D"display: none;">/* P2P =E7=A8=
=8B=E5=BA=8F=E5=AE=A2=E6=88=B7=E7=AB=AF
*=20
* =E6=96=87=E4=BB=B6=E5=90=8D=EF=BC=9AP2PClient.c
*
* =E6=97=A5=E6=9C=9F=EF=BC=9A2004-5-21
*
* =E4=BD=9C=E8=80=85=EF=BC=9Ashootingstars(zhouhuis22@sina.com)
*
*/

#pragma comment(lib,"ws2_32.lib")

#include "windows.h"
#include "..\proto.h"
#include "..\Exception.h"
#include &lt;iostream&gt;
using namespace std;

UserList ClientList;

#define COMMANDMAXC 256
#define MAXRETRY    5

SOCKET PrimaryUDP;
char UserName[10];
char ServerIP[20];

bool RecvedACK;

void InitWinSock()
{
	WSADATA wsaData;

	if (WSAStartup(MAKEWORD(2, 2), &amp;wsaData) !=3D 0)
	{
		printf("Windows sockets 2.2 startup");
		throw Exception("");
	}
	else{
		printf("Using %s (Status: %s)\n",
			wsaData.szDescription, wsaData.szSystemStatus);
		printf("with API versions %d.%d to %d.%d\n\n",
			LOBYTE(wsaData.wVersion), HIBYTE(wsaData.wVersion),
			LOBYTE(wsaData.wHighVersion), HIBYTE(wsaData.wHighVersion));
	}
}

SOCKET mksock(int type)
{
	SOCKET sock =3D socket(AF_INET, type, 0);
	if (sock &lt; 0)
	{
		printf("create socket error");
		throw Exception("");
	}
	return sock;
}

stUserListNode GetUser(char *username)
{
	for(UserList::iterator UserIterator=3DClientList.begin();
		UserIterator!=3DClientList.end();
		++UserIterator)
	{
		if( strcmp( ((*UserIterator)-&gt;userName), username) =3D=3D 0 )
			return *(*UserIterator);
	}
	throw Exception("not find this user");
}

void BindSock(SOCKET sock)
{
	sockaddr_in sin;
	sin.sin_addr.S_un.S_addr =3D INADDR_ANY;
	sin.sin_family =3D AF_INET;
	sin.sin_port =3D 0;

	if (bind(sock, (struct sockaddr*)&amp;sin, sizeof(sin)) &lt; 0)
		throw Exception("bind error");
}

void ConnectToServer(SOCKET sock,char *username, char *serverip)
{
	sockaddr_in remote;
	remote.sin_addr.S_un.S_addr =3D inet_addr(serverip);
	remote.sin_family =3D AF_INET;
	remote.sin_port =3D htons(SERVER_PORT);

	stMessage sendbuf;
	sendbuf.iMessageType =3D LOGIN;
	strncpy(sendbuf.message.loginmember.userName, username, 10);

	sendto(sock, (const char*)&amp;sendbuf, sizeof(sendbuf), 0, (const sockadd=
r*)&amp;remote,sizeof(remote));

	int usercount;
	int fromlen =3D sizeof(remote);
	int iread =3D recvfrom(sock, (char *)&amp;usercount, sizeof(int), 0, (sock=
addr *)&amp;remote, &amp;fromlen);
	if(iread&lt;=3D0)
	{
		throw Exception("Login error\n");
	}

	// =E7=99=BB=E5=BD=95=E5=88=B0=E6=9C=8D=E5=8A=A1=E7=AB=AF=E5=90=8E=EF=BC=
=8C=E6=8E=A5=E6=94=B6=E6=9C=8D=E5=8A=A1=E7=AB=AF=E5=8F=91=E6=9D=A5=E7=9A=84=
=E5=B7=B2=E7=BB=8F=E7=99=BB=E5=BD=95=E7=9A=84=E7=94=A8=E6=88=B7=E7=9A=84=E4=
=BF=A1=E6=81=AF
	cout&lt;&lt;"Have "&lt;&lt;usercount&lt;&lt;" users logined server:"&lt;&l=
t;endl;
	for(int i =3D 0;i&lt;usercount;i++)
	{
		stUserListNode *node =3D new stUserListNode;
		recvfrom(sock, (char*)node, sizeof(stUserListNode), 0, (sockaddr *)&amp;r=
emote, &amp;fromlen);
		ClientList.push_back(node);
		cout&lt;&lt;"Username:"&lt;&lt;node-&gt;userName&lt;&lt;endl;
		in_addr tmp;
		tmp.S_un.S_addr =3D htonl(node-&gt;ip);
		cout&lt;&lt;"UserIP:"&lt;&lt;inet_ntoa(tmp)&lt;&lt;endl;
		cout&lt;&lt;"UserPort:"&lt;&lt;node-&gt;port&lt;&lt;endl;
		cout&lt;&lt;""&lt;&lt;endl;
	}
}

void OutputUsage()
{
	cout&lt;&lt;"You can input you command:\n"
		&lt;&lt;"Command Type:\"send\",\"exit\",\"getu\"\n"
		&lt;&lt;"Example : send Username Message\n"
		&lt;&lt;"          exit\n"
		&lt;&lt;"          getu\n"
		&lt;&lt;endl;
}

/* =E8=BF=99=E6=98=AF=E4=B8=BB=E8=A6=81=E7=9A=84=E5=87=BD=E6=95=B0=EF=BC=9A=
=E5=8F=91=E9=80=81=E4=B8=80=E4=B8=AA=E6=B6=88=E6=81=AF=E7=BB=99=E6=9F=90=E4=
=B8=AA=E7=94=A8=E6=88=B7(C)
*=E6=B5=81=E7=A8=8B=EF=BC=9A=E7=9B=B4=E6=8E=A5=E5=90=91=E6=9F=90=E4=B8=AA=
=E7=94=A8=E6=88=B7=E7=9A=84=E5=A4=96=E7=BD=91IP=E5=8F=91=E9=80=81=E6=B6=88=
=E6=81=AF=EF=BC=8C=E5=A6=82=E6=9E=9C=E6=AD=A4=E5=89=8D=E6=B2=A1=E6=9C=89=E8=
=81=94=E7=B3=BB=E8=BF=87
*      =E9=82=A3=E4=B9=88=E6=AD=A4=E6=B6=88=E6=81=AF=E5=B0=86=E6=97=A0=E6=
=B3=95=E5=8F=91=E9=80=81=EF=BC=8C=E5=8F=91=E9=80=81=E7=AB=AF=E7=AD=89=E5=BE=
=85=E8=B6=85=E6=97=B6=E3=80=82
*      =E8=B6=85=E6=97=B6=E5=90=8E=EF=BC=8C=E5=8F=91=E9=80=81=E7=AB=AF=E5=
=B0=86=E5=8F=91=E9=80=81=E4=B8=80=E4=B8=AA=E8=AF=B7=E6=B1=82=E4=BF=A1=E6=81=
=AF=E5=88=B0=E6=9C=8D=E5=8A=A1=E7=AB=AF=EF=BC=8C
*      =E8=A6=81=E6=B1=82=E6=9C=8D=E5=8A=A1=E7=AB=AF=E5=8F=91=E9=80=81=E7=
=BB=99=E5=AE=A2=E6=88=B7C=E4=B8=80=E4=B8=AA=E8=AF=B7=E6=B1=82=EF=BC=8C=E8=
=AF=B7=E6=B1=82C=E7=BB=99=E6=9C=AC=E6=9C=BA=E5=8F=91=E9=80=81=E6=89=93=E6=
=B4=9E=E6=B6=88=E6=81=AF
*      =E4=BB=A5=E4=B8=8A=E6=B5=81=E7=A8=8B=E5=B0=86=E9=87=8D=E5=A4=8DMAXRE=
TRY=E6=AC=A1
*/
bool SendMessageTo(char *UserName, char *Message)
{
	char realmessage[256];
	unsigned int UserIP;
	unsigned short UserPort;
	bool FindUser =3D false;
	for(UserList::iterator UserIterator=3DClientList.begin();
		UserIterator!=3DClientList.end();
		++UserIterator)
	{
		if( strcmp( ((*UserIterator)-&gt;userName), UserName) =3D=3D 0 )
		{
			UserIP =3D (*UserIterator)-&gt;ip;
			UserPort =3D (*UserIterator)-&gt;port;
			FindUser =3D true;
		}
	}

	if(!FindUser)
		return false;

	strcpy(realmessage, Message);
	for(int i=3D0;i&lt;MAXRETRY;i++)
	{
		RecvedACK =3D false;

		sockaddr_in remote;
		remote.sin_addr.S_un.S_addr =3D htonl(UserIP);
		remote.sin_family =3D AF_INET;
		remote.sin_port =3D htons(UserPort);
		stP2PMessage MessageHead;
		MessageHead.iMessageType =3D P2PMESSAGE;
		MessageHead.iStringLen =3D (int)strlen(realmessage)+1;
		int isend =3D sendto(PrimaryUDP, (const char *)&amp;MessageHead, sizeof(M=
essageHead), 0, (const sockaddr*)&amp;remote, sizeof(remote));
		isend =3D sendto(PrimaryUDP, (const char *)&amp;realmessage, MessageHead.=
iStringLen, 0, (const sockaddr*)&amp;remote, sizeof(remote));

		// =E7=AD=89=E5=BE=85=E6=8E=A5=E6=94=B6=E7=BA=BF=E7=A8=8B=E5=B0=86=E6=AD=
=A4=E6=A0=87=E8=AE=B0=E4=BF=AE=E6=94=B9
		for(int j=3D0;j&lt;10;j++)
		{
			if(RecvedACK)
				return true;
			else
				Sleep(300);
		}

		// =E6=B2=A1=E6=9C=89=E6=8E=A5=E6=94=B6=E5=88=B0=E7=9B=AE=E6=A0=87=E4=B8=
=BB=E6=9C=BA=E7=9A=84=E5=9B=9E=E5=BA=94=EF=BC=8C=E8=AE=A4=E4=B8=BA=E7=9B=AE=
=E6=A0=87=E4=B8=BB=E6=9C=BA=E7=9A=84=E7=AB=AF=E5=8F=A3=E6=98=A0=E5=B0=84=E6=
=B2=A1=E6=9C=89
		// =E6=89=93=E5=BC=80=EF=BC=8C=E9=82=A3=E4=B9=88=E5=8F=91=E9=80=81=E8=AF=
=B7=E6=B1=82=E4=BF=A1=E6=81=AF=E7=BB=99=E6=9C=8D=E5=8A=A1=E5=99=A8=EF=BC=8C=
=E8=A6=81=E6=9C=8D=E5=8A=A1=E5=99=A8=E5=91=8A=E8=AF=89=E7=9B=AE=E6=A0=87=E4=
=B8=BB=E6=9C=BA
		// =E6=89=93=E5=BC=80=E6=98=A0=E5=B0=84=E7=AB=AF=E5=8F=A3=EF=BC=88UDP=E6=
=89=93=E6=B4=9E=EF=BC=89
		sockaddr_in server;
		server.sin_addr.S_un.S_addr =3D inet_addr(ServerIP);
		server.sin_family =3D AF_INET;
		server.sin_port =3D htons(SERVER_PORT);

		stMessage transMessage;
		transMessage.iMessageType =3D P2PTRANS;
		strcpy(transMessage.message.translatemessage.userName, UserName);

		sendto(PrimaryUDP, (const char*)&amp;transMessage, sizeof(transMessage), =
0, (const sockaddr*)&amp;server, sizeof(server));
		Sleep(100);// =E7=AD=89=E5=BE=85=E5=AF=B9=E6=96=B9=E5=85=88=E5=8F=91=E9=
=80=81=E4=BF=A1=E6=81=AF=E3=80=82
	}
	return false;
}

// =E8=A7=A3=E6=9E=90=E5=91=BD=E4=BB=A4=EF=BC=8C=E6=9A=82=E6=97=B6=E5=8F=AA=
=E6=9C=89exit=E5=92=8Csend=E5=91=BD=E4=BB=A4
// =E6=96=B0=E5=A2=9Egetu=E5=91=BD=E4=BB=A4=EF=BC=8C=E8=8E=B7=E5=8F=96=E5=
=BD=93=E5=89=8D=E6=9C=8D=E5=8A=A1=E5=99=A8=E7=9A=84=E6=89=80=E6=9C=89=E7=94=
=A8=E6=88=B7
void ParseCommand(char * CommandLine)
{
	if(strlen(CommandLine)&lt;4)
		return;
	char Command[10];
	strncpy(Command, CommandLine, 4);
	Command[4]=3D'\0';

	if(strcmp(Command,"exit")=3D=3D0)
	{
		stMessage sendbuf;
		sendbuf.iMessageType =3D LOGOUT;
		strncpy(sendbuf.message.logoutmember.userName, UserName, 10);
		sockaddr_in server;
		server.sin_addr.S_un.S_addr =3D inet_addr(ServerIP);
		server.sin_family =3D AF_INET;
		server.sin_port =3D htons(SERVER_PORT);

		sendto(PrimaryUDP,(const char*)&amp;sendbuf, sizeof(sendbuf), 0, (const s=
ockaddr *)&amp;server, sizeof(server));
		shutdown(PrimaryUDP, 2);
		closesocket(PrimaryUDP);
		exit(0);
	}
	else if(strcmp(Command,"send")=3D=3D0)
	{
		char sendname[20];
		char message[COMMANDMAXC];
		int i;
		for(i=3D5;;i++)
		{
			if(CommandLine[i]!=3D' ')
				sendname[i-5]=3DCommandLine[i];
			else
			{
				sendname[i-5]=3D'\0';
				break;
			}
		}
		strcpy(message, &amp;(CommandLine[i+1]));
		if(SendMessageTo(sendname, message))
			printf("Send OK!\n");
		else=20
			printf("Send Failure!\n");
	}
	else if(strcmp(Command,"getu")=3D=3D0)
	{
		int command =3D GETALLUSER;
		sockaddr_in server;
		server.sin_addr.S_un.S_addr =3D inet_addr(ServerIP);
		server.sin_family =3D AF_INET;
		server.sin_port =3D htons(SERVER_PORT);

		sendto(PrimaryUDP,(const char*)&amp;command, sizeof(command), 0, (const s=
ockaddr *)&amp;server, sizeof(server));
	}
}

// =E6=8E=A5=E5=8F=97=E6=B6=88=E6=81=AF=E7=BA=BF=E7=A8=8B
DWORD WINAPI RecvThreadProc(LPVOID lpParameter)
{
	sockaddr_in remote;
	int sinlen =3D sizeof(remote);
	stP2PMessage recvbuf;
	for(;;)
	{
		int iread =3D recvfrom(PrimaryUDP, (char *)&amp;recvbuf, sizeof(recvbuf),=
 0, (sockaddr *)&amp;remote, &amp;sinlen);
		if(iread&lt;=3D0)
		{
			printf("recv error\n");
			continue;
		}
		switch(recvbuf.iMessageType)
		{
		case P2PMESSAGE:
			{
				// =E6=8E=A5=E6=94=B6=E5=88=B0P2P=E7=9A=84=E6=B6=88=E6=81=AF
				char *comemessage=3D new char[recvbuf.iStringLen];
				int iread1 =3D recvfrom(PrimaryUDP, comemessage, 256, 0, (sockaddr *)&a=
mp;remote, &amp;sinlen);
				comemessage[iread1-1] =3D '\0';
				if(iread1&lt;=3D0)
					throw Exception("Recv Message Error\n");
				else
				{
					printf("Recv a Message:%s\n",comemessage);

					stP2PMessage sendbuf;
					sendbuf.iMessageType =3D P2PMESSAGEACK;
					sendto(PrimaryUDP, (const char*)&amp;sendbuf, sizeof(sendbuf), 0, (con=
st sockaddr*)&amp;remote, sizeof(remote));
				}

				delete []comemessage;
				break;

			}
		case P2PSOMEONEWANTTOCALLYOU:
			{
				// =E6=8E=A5=E6=94=B6=E5=88=B0=E6=89=93=E6=B4=9E=E5=91=BD=E4=BB=A4=EF=
=BC=8C=E5=90=91=E6=8C=87=E5=AE=9A=E7=9A=84IP=E5=9C=B0=E5=9D=80=E6=89=93=E6=
=B4=9E
				printf("Recv p2someonewanttocallyou data\n");
				sockaddr_in remote;
				remote.sin_addr.S_un.S_addr =3D htonl(recvbuf.iStringLen);
				remote.sin_family =3D AF_INET;
				remote.sin_port =3D htons(recvbuf.Port);

				// UDP hole punching
				stP2PMessage message;
				message.iMessageType =3D P2PTRASH;
				sendto(PrimaryUDP, (const char *)&amp;message, sizeof(message), 0, (con=
st sockaddr*)&amp;remote, sizeof(remote));

				break;
			}
		case P2PMESSAGEACK:
			{
				// =E5=8F=91=E9=80=81=E6=B6=88=E6=81=AF=E7=9A=84=E5=BA=94=E7=AD=94
				RecvedACK =3D true;
				break;
			}
		case P2PTRASH:
			{
				// =E5=AF=B9=E6=96=B9=E5=8F=91=E9=80=81=E7=9A=84=E6=89=93=E6=B4=9E=E6=
=B6=88=E6=81=AF=EF=BC=8C=E5=BF=BD=E7=95=A5=E6=8E=89=E3=80=82
				//do nothing ...
				printf("Recv p2ptrash data\n");
				break;
			}
		case GETALLUSER:
			{
				int usercount;
				int fromlen =3D sizeof(remote);
				int iread =3D recvfrom(PrimaryUDP, (char *)&amp;usercount, sizeof(int),=
 0, (sockaddr *)&amp;remote, &amp;fromlen);
				if(iread&lt;=3D0)
				{
					throw Exception("Login error\n");
				}

				ClientList.clear();

				cout&lt;&lt;"Have "&lt;&lt;usercount&lt;&lt;" users logined server:"&lt=
;&lt;endl;
				for(int i =3D 0;i&lt;usercount;i++)
				{
					stUserListNode *node =3D new stUserListNode;
					recvfrom(PrimaryUDP, (char*)node, sizeof(stUserListNode), 0, (sockaddr=
 *)&amp;remote, &amp;fromlen);
					ClientList.push_back(node);
					cout&lt;&lt;"Username:"&lt;&lt;node-&gt;userName&lt;&lt;endl;
					in_addr tmp;
					tmp.S_un.S_addr =3D htonl(node-&gt;ip);
					cout&lt;&lt;"UserIP:"&lt;&lt;inet_ntoa(tmp)&lt;&lt;endl;
					cout&lt;&lt;"UserPort:"&lt;&lt;node-&gt;port&lt;&lt;endl;
					cout&lt;&lt;""&lt;&lt;endl;
				}
				break;
			}
		}
	}
}


int main(int argc, char* argv[])
{
	try
	{
		InitWinSock();

		PrimaryUDP =3D mksock(SOCK_DGRAM);
		BindSock(PrimaryUDP);

		cout&lt;&lt;"Please input server ip:";
		cin&gt;&gt;ServerIP;

		cout&lt;&lt;"Please input your name:";
		cin&gt;&gt;UserName;

		ConnectToServer(PrimaryUDP, UserName, ServerIP);

		HANDLE threadhandle =3D CreateThread(NULL, 0, RecvThreadProc, NULL, NULL,=
 NULL);
		CloseHandle(threadhandle);
		OutputUsage();

		for(;;)
		{
			char Command[COMMANDMAXC];
			gets(Command);
			ParseCommand(Command);
		}
	}
	catch(Exception &amp;e)
	{
		printf(e.GetMessage());
		return 1;
	}
	return 0;
}</pre>
<div class=3D"dp-highlighter" id=3D""><div class=3D"bar"><div class=3D"tool=
s">Cpp=E4=BB=A3=E7=A0=81 <embed wmode=3D"transparent" src=3D"http://andylin=
02.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width=3D"14" =
height=3D"15" flashvars=3D"clipboard=3D%2F*%20%E5%BC%82%E5%B8%B8%E7%B1%BB%0=
A*%0A*%20%E6%96%87%E4%BB%B6%E5%90%8D%EF%BC%9AException.h%0A*%0A*%20%E6%97%A=
5%E6%9C%9F%EF%BC%9A2004.5.5%0A*%0A*%20%E4%BD%9C%E8%80%85%EF%BC%9Ashootingst=
ars(zhouhuis22%40sina.com)%0A*%2F%0A%0A%23ifndef%20__HZH_Exception__%0A%23d=
efine%20__HZH_Exception__%0A%0A%23define%20EXCEPTION_MESSAGE_MAXLEN%20256%0=
A%23include%20%22string.h%22%0A%0Aclass%20Exception%0A%7B%0Aprivate%3A%0A%0=
9char%20m_ExceptionMessage%5BEXCEPTION_MESSAGE_MAXLEN%5D%3B%0Apublic%3A%0A%=
09Exception(char%20*msg)%0A%09%7B%0A%09%09strncpy(m_ExceptionMessage%2C%20m=
sg%2C%20EXCEPTION_MESSAGE_MAXLEN)%3B%0A%09%7D%0A%0A%09char%20*GetMessage()%=
0A%09%7B%0A%09%09return%20m_ExceptionMessage%3B%0A%09%7D%0A%7D%3B%0A%0A%23e=
ndif%0A%0A%2F*%20P2P%20%E7%A8%8B%E5%BA%8F%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%=
AE%0A*%20%0A*%20%E6%97%A5%E6%9C%9F%EF%BC%9A2004-5-21%0A*%0A*%20%E4%BD%9C%E8=
%80%85%EF%BC%9Ashootingstars(zhouhuis22%40sina.com)%0A*%0A*%2F%0A%0A%23prag=
ma%20once%0A%23include%20%3Clist%3E%0A%0A%2F%2F%20%E5%AE%9A%E4%B9%89iMessag=
eType%E7%9A%84%E5%80%BC%0A%23define%20LOGIN%201%0A%23define%20LOGOUT%202%0A=
%23define%20P2PTRANS%203%0A%23define%20GETALLUSER%20%204%0A%0A%2F%2F%20%E6%=
9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%A3%0A%23define%20SERVER_PORT%202280%=
0A%0A%2F%2F%20Client%E7%99%BB%E5%BD%95%E6%97%B6%E5%90%91%E6%9C%8D%E5%8A%A1%=
E5%99%A8%E5%8F%91%E9%80%81%E7%9A%84%E6%B6%88%E6%81%AF%0Astruct%20stLoginMes=
sage%0A%7B%0A%09char%20userName%5B10%5D%3B%0A%09char%20password%5B10%5D%3B%=
0A%7D%3B%0A%0A%2F%2F%20Client%E6%B3%A8%E9%94%80%E6%97%B6%E5%8F%91%E9%80%81%=
E7%9A%84%E6%B6%88%E6%81%AF%0Astruct%20stLogoutMessage%0A%7B%0A%09char%20use=
rName%5B10%5D%3B%0A%7D%3B%0A%0A%2F%2F%20Client%E5%90%91%E6%9C%8D%E5%8A%A1%E=
5%99%A8%E8%AF%B7%E6%B1%82%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AAClient(userNam=
e)%E5%90%91%E8%87%AA%E5%B7%B1%E6%96%B9%E5%90%91%E5%8F%91%E9%80%81UDP%E6%89%=
93%E6%B4%9E%E6%B6%88%E6%81%AF%0Astruct%20stP2PTranslate%0A%7B%0A%09char%20u=
serName%5B10%5D%3B%0A%7D%3B%0A%0A%2F%2F%20Client%E5%90%91%E6%9C%8D%E5%8A%A1=
%E5%99%A8%E5%8F%91%E9%80%81%E7%9A%84%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F%0A=
struct%20stMessage%0A%7B%0A%09int%20iMessageType%3B%0A%09union%20_message%0=
A%09%7B%0A%09%09stLoginMessage%20loginmember%3B%0A%09%09stLogoutMessage%20l=
ogoutmember%3B%0A%09%09stP2PTranslate%20translatemessage%3B%0A%09%7Dmessage=
%3B%0A%7D%3B%0A%0A%2F%2F%20%E5%AE%A2%E6%88%B7%E8%8A%82%E7%82%B9%E4%BF%A1%E6=
%81%AF%0Astruct%20stUserListNode%0A%7B%0A%09char%20userName%5B10%5D%3B%0A%0=
9unsigned%20int%20ip%3B%0A%09unsigned%20short%20port%3B%0A%7D%3B%0A%0A%2F%2=
F%20Server%E5%90%91Client%E5%8F%91%E9%80%81%E7%9A%84%E6%B6%88%E6%81%AF%0Ast=
ruct%20stServerToClient%0A%7B%0A%09int%20iMessageType%3B%0A%09union%20_mess=
age%0A%09%7B%0A%09%09stUserListNode%20user%3B%0A%09%7Dmessage%3B%0A%0A%7D%3=
B%0A%0A%2F%2F%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3=
D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%2F%2F%20%E4%B8%8B%E=
9%9D%A2%E7%9A%84%E5%8D%8F%E8%AE%AE%E7%94%A8%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%A=
B%AF%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%0A%2F%2F%3D%3D%3D%3D%3D%3=
D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3=
D%3D%3D%3D%3D%3D%3D%3D%0A%23define%20P2PMESSAGE%20100%20%20%20%20%20%20%20%=
20%20%20%20%20%20%20%20%2F%2F%20%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%0A%23d=
efine%20P2PMESSAGEACK%20101%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6=
%94%B6%E5%88%B0%E6%B6%88%E6%81%AF%E7%9A%84%E5%BA%94%E7%AD%94%0A%23define%20=
P2PSOMEONEWANTTOCALLYOU%20102%20%20%2F%2F%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%=
90%91%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E9%80%81%E7%9A%84%E6%B6%88%E6%81%=
AF%0A%2F%2F%20%E5%B8%8C%E6%9C%9B%E6%AD%A4%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%=
91%E9%80%81%E4%B8%80%E4%B8%AAUDP%E6%89%93%E6%B4%9E%E5%8C%85%0A%23define%20P=
2PTRASH%20%20%20%20%20%20%20%20103%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E=
5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E9%80%81%E7%9A%84%E6%89%93%E6%B4%9E%E5%8=
C%85%EF%BC%8C%E6%8E%A5%E6%94%B6%E7%AB%AF%E5%BA%94%E8%AF%A5%E5%BF%BD%E7%95%A=
5%E6%AD%A4%E6%B6%88%E6%81%AF%0A%0A%2F%2F%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B=
9%8B%E9%97%B4%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F%0Astruc=
t%20stP2PMessage%0A%7B%0A%09int%20iMessageType%3B%0A%09int%20iStringLen%3B%=
20%20%20%20%20%20%20%20%20%2F%2F%20or%20IP%20address%0A%09unsigned%20short%=
20Port%3B%20%0A%7D%3B%0A%0Ausing%20namespace%20std%3B%0Atypedef%20list%3Cst=
UserListNode%20*%3E%20UserList%3B" quality=3D"high" allowscriptaccess=3D"al=
ways" type=3D"application/x-shockwave-flash" pluginspage=3D"http://www.macr=
omedia.com/go/getflashplayer" style=3D"">&nbsp;<a href=3D"javascript:void()=
" title=3D"=E6=94=B6=E8=97=8F=E8=BF=99=E6=AE=B5=E4=BB=A3=E7=A0=81" onclick=
=3D"code_favorites_do_favorite(this);return false;"><img class=3D"star" src=
=3D"http://andylin02.iteye.com/images/icon_star.png" alt=3D"=E6=94=B6=E8=97=
=8F=E4=BB=A3=E7=A0=81" width=3D"15" height=3D"14"><img class=3D"spinner" sr=
c=3D"http://andylin02.iteye.com/images/spinner.gif" style=3D"display: none;=
"></a></div></div><ol start=3D"1" class=3D"dp-cpp"><li><span><span class=3D=
"comment">/*&nbsp;=E5=BC=82=E5=B8=B8=E7=B1=BB</span>&nbsp;</span></li><li><=
span><span class=3D"comment">*</span>&nbsp;</span></li><li><span><span clas=
s=3D"comment">*&nbsp;=E6=96=87=E4=BB=B6=E5=90=8D=EF=BC=9AException.h</span>=
&nbsp;</span></li><li><span><span class=3D"comment">*</span>&nbsp;</span></=
li><li><span><span class=3D"comment">*&nbsp;=E6=97=A5=E6=9C=9F=EF=BC=9A2004=
.5.5</span>&nbsp;</span></li><li><span><span class=3D"comment">*</span>&nbs=
p;</span></li><li><span><span class=3D"comment">*&nbsp;=E4=BD=9C=E8=80=85=
=EF=BC=9Ashootingstars(zhouhuis22@sina.com)</span>&nbsp;</span></li><li><sp=
an><span class=3D"comment">*/</span><span>&nbsp;&nbsp;</span></span></li><l=
i><span>&nbsp;&nbsp;</span></li><li><span><span class=3D"preprocessor">#ifn=
def&nbsp;__HZH_Exception__</span><span>&nbsp;&nbsp;</span></span></li><li><=
span><span class=3D"preprocessor">#define&nbsp;__HZH_Exception__</span><spa=
n>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><spa=
n><span class=3D"preprocessor">#define&nbsp;EXCEPTION_MESSAGE_MAXLEN&nbsp;2=
56</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=3D"prep=
rocessor">#include&nbsp;"string.h"</span><span>&nbsp;&nbsp;</span></span></=
li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=3D"keyword">clas=
s</span><span>&nbsp;Exception&nbsp;&nbsp;</span></span></li><li><span>{&nbs=
p;&nbsp;</span></li><li><span><span class=3D"keyword">private</span><span>:=
&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span clas=
s=3D"datatypes">char</span><span>&nbsp;m_ExceptionMessage[EXCEPTION_MESSAGE=
_MAXLEN];&nbsp;&nbsp;</span></span></li><li><span><span class=3D"keyword">p=
ublic</span><span>:&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nb=
sp;&nbsp;Exception(<span class=3D"datatypes">char</span><span>&nbsp;*msg)&n=
bsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp=
;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strn=
cpy(m_ExceptionMessage,&nbsp;msg,&nbsp;EXCEPTION_MESSAGE_MAXLEN);&nbsp;&nbs=
p;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><l=
i><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span cla=
ss=3D"datatypes">char</span><span>&nbsp;*GetMessage()&nbsp;&nbsp;</span></s=
pan></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><sp=
an>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword">=
return</span><span>&nbsp;m_ExceptionMessage;&nbsp;&nbsp;</span></span></li>=
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>};&nbs=
p;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=
=3D"preprocessor">#endif</span><span>&nbsp;&nbsp;</span></span></li><li><sp=
an>&nbsp;&nbsp;</span></li><li><span><span class=3D"comment">/*&nbsp;P2P&nb=
sp;=E7=A8=8B=E5=BA=8F=E4=BC=A0=E8=BE=93=E5=8D=8F=E8=AE=AE</span>&nbsp;</spa=
n></li><li><span><span class=3D"comment">*&nbsp;</span>&nbsp;</span></li><l=
i><span><span class=3D"comment">*&nbsp;=E6=97=A5=E6=9C=9F=EF=BC=9A2004-5-21=
</span>&nbsp;</span></li><li><span><span class=3D"comment">*</span>&nbsp;</=
span></li><li><span><span class=3D"comment">*&nbsp;=E4=BD=9C=E8=80=85=EF=BC=
=9Ashootingstars(zhouhuis22@sina.com)</span>&nbsp;</span></li><li><span><sp=
an class=3D"comment">*</span>&nbsp;</span></li><li><span><span class=3D"com=
ment">*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;<=
/span></li><li><span><span class=3D"preprocessor">#pragma&nbsp;once</span><=
span>&nbsp;&nbsp;</span></span></li><li><span><span class=3D"preprocessor">=
#include&nbsp;&lt;list&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><=
span>&nbsp;&nbsp;</span></li><li><span><span class=3D"comment">//&nbsp;=E5=
=AE=9A=E4=B9=89iMessageType=E7=9A=84=E5=80=BC</span><span>&nbsp;&nbsp;</spa=
n></span></li><li><span><span class=3D"preprocessor">#define&nbsp;LOGIN&nbs=
p;1</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=3D"pre=
processor">#define&nbsp;LOGOUT&nbsp;2</span><span>&nbsp;&nbsp;</span></span=
></li><li><span><span class=3D"preprocessor">#define&nbsp;P2PTRANS&nbsp;3</=
span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=3D"preproce=
ssor">#define&nbsp;GETALLUSER&nbsp;&nbsp;4</span><span>&nbsp;&nbsp;</span><=
/span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=3D"comme=
nt">//&nbsp;=E6=9C=8D=E5=8A=A1=E5=99=A8=E7=AB=AF=E5=8F=A3</span><span>&nbsp=
;&nbsp;</span></span></li><li><span><span class=3D"preprocessor">#define&nb=
sp;SERVER_PORT&nbsp;2280</span><span>&nbsp;&nbsp;</span></span></li><li><sp=
an>&nbsp;&nbsp;</span></li><li><span><span class=3D"comment">//&nbsp;Client=
=E7=99=BB=E5=BD=95=E6=97=B6=E5=90=91=E6=9C=8D=E5=8A=A1=E5=99=A8=E5=8F=91=E9=
=80=81=E7=9A=84=E6=B6=88=E6=81=AF</span><span>&nbsp;&nbsp;</span></span></l=
i><li><span><span class=3D"keyword">struct</span><span>&nbsp;stLoginMessage=
&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&nbsp;</span></li><li><span=
>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">char</span><span>&nbsp;u=
serName[10];&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbs=
p;<span class=3D"datatypes">char</span><span>&nbsp;password[10];&nbsp;&nbsp=
;</span></span></li><li><span>};&nbsp;&nbsp;</span></li><li><span>&nbsp;&nb=
sp;</span></li><li><span><span class=3D"comment">//&nbsp;Client=E6=B3=A8=E9=
=94=80=E6=97=B6=E5=8F=91=E9=80=81=E7=9A=84=E6=B6=88=E6=81=AF</span><span>&n=
bsp;&nbsp;</span></span></li><li><span><span class=3D"keyword">struct</span=
><span>&nbsp;stLogoutMessage&nbsp;&nbsp;</span></span></li><li><span>{&nbsp=
;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatyp=
es">char</span><span>&nbsp;userName[10];&nbsp;&nbsp;</span></span></li><li>=
<span>};&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span=
><span class=3D"comment">//&nbsp;Client=E5=90=91=E6=9C=8D=E5=8A=A1=E5=99=A8=
=E8=AF=B7=E6=B1=82=E5=8F=A6=E5=A4=96=E4=B8=80=E4=B8=AAClient(userName)=E5=
=90=91=E8=87=AA=E5=B7=B1=E6=96=B9=E5=90=91=E5=8F=91=E9=80=81UDP=E6=89=93=E6=
=B4=9E=E6=B6=88=E6=81=AF</span><span>&nbsp;&nbsp;</span></span></li><li><sp=
an><span class=3D"keyword">struct</span><span>&nbsp;stP2PTranslate&nbsp;&nb=
sp;</span></span></li><li><span>{&nbsp;&nbsp;</span></li><li><span>&nbsp;&n=
bsp;&nbsp;&nbsp;<span class=3D"datatypes">char</span><span>&nbsp;userName[1=
0];&nbsp;&nbsp;</span></span></li><li><span>};&nbsp;&nbsp;</span></li><li><=
span>&nbsp;&nbsp;</span></li><li><span><span class=3D"comment">//&nbsp;Clie=
nt=E5=90=91=E6=9C=8D=E5=8A=A1=E5=99=A8=E5=8F=91=E9=80=81=E7=9A=84=E6=B6=88=
=E6=81=AF=E6=A0=BC=E5=BC=8F</span><span>&nbsp;&nbsp;</span></span></li><li>=
<span><span class=3D"keyword">struct</span><span>&nbsp;stMessage&nbsp;&nbsp=
;</span></span></li><li><span>{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbs=
p;&nbsp;&nbsp;<span class=3D"datatypes">int</span><span>&nbsp;iMessageType;=
&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span clas=
s=3D"keyword">union</span><span>&nbsp;_message&nbsp;&nbsp;</span></span></l=
i><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stLoginMessage&nbsp;loginmember=
;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;stLogoutMessage&nbsp;logoutmember;&nbsp;&nbsp;</span></li><li><span=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stP2PTranslate&nbsp;transl=
atemessage;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}messa=
ge;&nbsp;&nbsp;</span></li><li><span>};&nbsp;&nbsp;</span></li><li><span>&n=
bsp;&nbsp;</span></li><li><span><span class=3D"comment">//&nbsp;=E5=AE=A2=
=E6=88=B7=E8=8A=82=E7=82=B9=E4=BF=A1=E6=81=AF</span><span>&nbsp;&nbsp;</spa=
n></span></li><li><span><span class=3D"keyword">struct</span><span>&nbsp;st=
UserListNode&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&nbsp;</span></=
li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">char</span><=
span>&nbsp;userName[10];&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbs=
p;&nbsp;&nbsp;unsigned&nbsp;<span class=3D"datatypes">int</span><span>&nbsp=
;ip;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;unsign=
ed&nbsp;<span class=3D"datatypes">short</span><span>&nbsp;port;&nbsp;&nbsp;=
</span></span></li><li><span>};&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbs=
p;</span></li><li><span><span class=3D"comment">//&nbsp;Server=E5=90=91Clie=
nt=E5=8F=91=E9=80=81=E7=9A=84=E6=B6=88=E6=81=AF</span><span>&nbsp;&nbsp;</s=
pan></span></li><li><span><span class=3D"keyword">struct</span><span>&nbsp;=
stServerToClient&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&nbsp;</spa=
n></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">int</spa=
n><span>&nbsp;iMessageType;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&=
nbsp;&nbsp;&nbsp;<span class=3D"keyword">union</span><span>&nbsp;_message&n=
bsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp=
;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stUs=
erListNode&nbsp;user;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&n=
bsp;}message;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li>=
<span>};&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span=
><span class=3D"comment">//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D</span><s=
pan>&nbsp;&nbsp;</span></span></li><li><span><span class=3D"comment">//&nbs=
p;=E4=B8=8B=E9=9D=A2=E7=9A=84=E5=8D=8F=E8=AE=AE=E7=94=A8=E4=BA=8E=E5=AE=A2=
=E6=88=B7=E7=AB=AF=E4=B9=8B=E9=97=B4=E7=9A=84=E9=80=9A=E4=BF=A1</span><span=
>&nbsp;&nbsp;</span></span></li><li><span><span class=3D"comment">//=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D</span><span>&nbsp;&nbsp;</span></span></l=
i><li><span><span class=3D"preprocessor">#define&nbsp;P2PMESSAGE&nbsp;100&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;//&nbsp;=E5=8F=91=E9=80=81=E6=B6=88=E6=81=AF</span><span>&nbsp=
;&nbsp;</span></span></li><li><span><span class=3D"preprocessor">#define&nb=
sp;P2PMESSAGEACK&nbsp;101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;//&nbsp;=E6=94=B6=E5=88=B0=E6=B6=88=E6=81=AF=E7=9A=84=
=E5=BA=94=E7=AD=94</span><span>&nbsp;&nbsp;</span></span></li><li><span><sp=
an class=3D"preprocessor">#define&nbsp;P2PSOMEONEWANTTOCALLYOU&nbsp;102&nbs=
p;&nbsp;//&nbsp;=E6=9C=8D=E5=8A=A1=E5=99=A8=E5=90=91=E5=AE=A2=E6=88=B7=E7=
=AB=AF=E5=8F=91=E9=80=81=E7=9A=84=E6=B6=88=E6=81=AF</span><span>&nbsp;&nbsp=
;</span></span></li><li><span><span class=3D"comment">//&nbsp;=E5=B8=8C=E6=
=9C=9B=E6=AD=A4=E5=AE=A2=E6=88=B7=E7=AB=AF=E5=8F=91=E9=80=81=E4=B8=80=E4=B8=
=AAUDP=E6=89=93=E6=B4=9E=E5=8C=85</span><span>&nbsp;&nbsp;</span></span></l=
i><li><span><span class=3D"preprocessor">#define&nbsp;P2PTRASH&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;103&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;=E5=AE=A2=E6=88=B7=E7=AB=AF=E5=8F=91=E9=80=
=81=E7=9A=84=E6=89=93=E6=B4=9E=E5=8C=85=EF=BC=8C=E6=8E=A5=E6=94=B6=E7=AB=AF=
=E5=BA=94=E8=AF=A5=E5=BF=BD=E7=95=A5=E6=AD=A4=E6=B6=88=E6=81=AF</span><span=
>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span=
><span class=3D"comment">//&nbsp;=E5=AE=A2=E6=88=B7=E7=AB=AF=E4=B9=8B=E9=97=
=B4=E5=8F=91=E9=80=81=E6=B6=88=E6=81=AF=E6=A0=BC=E5=BC=8F</span><span>&nbsp=
;&nbsp;</span></span></li><li><span><span class=3D"keyword">struct</span><s=
pan>&nbsp;stP2PMessage&nbsp;&nbsp;</span></span></li><li><span>{&nbsp;&nbsp=
;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">in=
t</span><span>&nbsp;iMessageType;&nbsp;&nbsp;</span></span></li><li><span>&=
nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"datatypes">int</span><span>&nbsp;iStr=
ingLen;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span c=
lass=3D"comment">//&nbsp;or&nbsp;IP&nbsp;address</span><span>&nbsp;&nbsp;</=
span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span clas=
s=3D"datatypes">short</span><span>&nbsp;Port;&nbsp;&nbsp;&nbsp;</span></spa=
n></li><li><span>};&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></l=
i><li><span><span class=3D"keyword">using</span><span>&nbsp;</span><span cl=
ass=3D"keyword">namespace</span><span>&nbsp;std;&nbsp;&nbsp;</span></span><=
/li><li><span><span class=3D"keyword">typedef</span><span>&nbsp;list&lt;stU=
serListNode&nbsp;*&gt;&nbsp;UserList;&nbsp;&nbsp;</span></span></li></ol></=
div><pre class=3D"cpp" name=3D"code" codeable_id=3D"444643" codeable_type=
=3D"Blog" source_url=3D"http://andylin02.iteye.com/blog/444643" pre_index=
=3D"2" title=3D"P2P=E4=B9=8BUDP=E7=A9=BF=E9=80=8FNAT=E7=9A=84=E5=8E=9F=E7=
=90=86=E4=B8=8E=E5=AE=9E=E7=8E=B0" style=3D"display: none;">/* =E5=BC=82=E5=
=B8=B8=E7=B1=BB
*
* =E6=96=87=E4=BB=B6=E5=90=8D=EF=BC=9AException.h
*
* =E6=97=A5=E6=9C=9F=EF=BC=9A2004.5.5
*
* =E4=BD=9C=E8=80=85=EF=BC=9Ashootingstars(zhouhuis22@sina.com)
*/

#ifndef __HZH_Exception__
#define __HZH_Exception__

#define EXCEPTION_MESSAGE_MAXLEN 256
#include "string.h"

class Exception
{
private:
	char m_ExceptionMessage[EXCEPTION_MESSAGE_MAXLEN];
public:
	Exception(char *msg)
	{
		strncpy(m_ExceptionMessage, msg, EXCEPTION_MESSAGE_MAXLEN);
	}

	char *GetMessage()
	{
		return m_ExceptionMessage;
	}
};

#endif

/* P2P =E7=A8=8B=E5=BA=8F=E4=BC=A0=E8=BE=93=E5=8D=8F=E8=AE=AE
*=20
* =E6=97=A5=E6=9C=9F=EF=BC=9A2004-5-21
*
* =E4=BD=9C=E8=80=85=EF=BC=9Ashootingstars(zhouhuis22@sina.com)
*
*/

#pragma once
#include &lt;list&gt;

// =E5=AE=9A=E4=B9=89iMessageType=E7=9A=84=E5=80=BC
#define LOGIN 1
#define LOGOUT 2
#define P2PTRANS 3
#define GETALLUSER  4

// =E6=9C=8D=E5=8A=A1=E5=99=A8=E7=AB=AF=E5=8F=A3
#define SERVER_PORT 2280

// Client=E7=99=BB=E5=BD=95=E6=97=B6=E5=90=91=E6=9C=8D=E5=8A=A1=E5=99=A8=E5=
=8F=91=E9=80=81=E7=9A=84=E6=B6=88=E6=81=AF
struct stLoginMessage
{
	char userName[10];
	char password[10];
};

// Client=E6=B3=A8=E9=94=80=E6=97=B6=E5=8F=91=E9=80=81=E7=9A=84=E6=B6=88=E6=
=81=AF
struct stLogoutMessage
{
	char userName[10];
};

// Client=E5=90=91=E6=9C=8D=E5=8A=A1=E5=99=A8=E8=AF=B7=E6=B1=82=E5=8F=A6=E5=
=A4=96=E4=B8=80=E4=B8=AAClient(userName)=E5=90=91=E8=87=AA=E5=B7=B1=E6=96=
=B9=E5=90=91=E5=8F=91=E9=80=81UDP=E6=89=93=E6=B4=9E=E6=B6=88=E6=81=AF
struct stP2PTranslate
{
	char userName[10];
};

// Client=E5=90=91=E6=9C=8D=E5=8A=A1=E5=99=A8=E5=8F=91=E9=80=81=E7=9A=84=E6=
=B6=88=E6=81=AF=E6=A0=BC=E5=BC=8F
struct stMessage
{
	int iMessageType;
	union _message
	{
		stLoginMessage loginmember;
		stLogoutMessage logoutmember;
		stP2PTranslate translatemessage;
	}message;
};

// =E5=AE=A2=E6=88=B7=E8=8A=82=E7=82=B9=E4=BF=A1=E6=81=AF
struct stUserListNode
{
	char userName[10];
	unsigned int ip;
	unsigned short port;
};

// Server=E5=90=91Client=E5=8F=91=E9=80=81=E7=9A=84=E6=B6=88=E6=81=AF
struct stServerToClient
{
	int iMessageType;
	union _message
	{
		stUserListNode user;
	}message;

};

//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
// =E4=B8=8B=E9=9D=A2=E7=9A=84=E5=8D=8F=E8=AE=AE=E7=94=A8=E4=BA=8E=E5=AE=A2=
=E6=88=B7=E7=AB=AF=E4=B9=8B=E9=97=B4=E7=9A=84=E9=80=9A=E4=BF=A1
//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
#define P2PMESSAGE 100               // =E5=8F=91=E9=80=81=E6=B6=88=E6=81=
=AF
#define P2PMESSAGEACK 101            // =E6=94=B6=E5=88=B0=E6=B6=88=E6=81=
=AF=E7=9A=84=E5=BA=94=E7=AD=94
#define P2PSOMEONEWANTTOCALLYOU 102  // =E6=9C=8D=E5=8A=A1=E5=99=A8=E5=90=
=91=E5=AE=A2=E6=88=B7=E7=AB=AF=E5=8F=91=E9=80=81=E7=9A=84=E6=B6=88=E6=81=AF
// =E5=B8=8C=E6=9C=9B=E6=AD=A4=E5=AE=A2=E6=88=B7=E7=AB=AF=E5=8F=91=E9=80=81=
=E4=B8=80=E4=B8=AAUDP=E6=89=93=E6=B4=9E=E5=8C=85
#define P2PTRASH        103          // =E5=AE=A2=E6=88=B7=E7=AB=AF=E5=8F=
=91=E9=80=81=E7=9A=84=E6=89=93=E6=B4=9E=E5=8C=85=EF=BC=8C=E6=8E=A5=E6=94=B6=
=E7=AB=AF=E5=BA=94=E8=AF=A5=E5=BF=BD=E7=95=A5=E6=AD=A4=E6=B6=88=E6=81=AF

// =E5=AE=A2=E6=88=B7=E7=AB=AF=E4=B9=8B=E9=97=B4=E5=8F=91=E9=80=81=E6=B6=88=
=E6=81=AF=E6=A0=BC=E5=BC=8F
struct stP2PMessage
{
	int iMessageType;
	int iStringLen;         // or IP address
	unsigned short Port;=20
};

using namespace std;
typedef list&lt;stUserListNode *&gt; UserList;</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
  </div>

 =20

 =20
 =20
  <iframe src=3D"http://andylin02.iteye.com/iframe_ggbd/187" scrolling=3D"n=
o" width=3D"468" height=3D"60" frameborder=3D"0" data-en_id=3D"81418823"></=
iframe>
 =20
  <div id=3D"bottoms" class=3D"clearfix">
   =20
    <div id=3D"share_weibo">=E5=88=86=E4=BA=AB=E5=88=B0=EF=BC=9A
      <a data-type=3D"sina" href=3D"javascript:;" title=3D"=E5=88=86=E4=BA=
=AB=E5=88=B0=E6=96=B0=E6=B5=AA=E5=BE=AE=E5=8D=9A"><img src=3D"http://andyli=
n02.iteye.com/images/sina.jpg"></a>
      <a data-type=3D"qq" href=3D"javascript:;" title=3D"=E5=88=86=E4=BA=AB=
=E5=88=B0=E8=85=BE=E8=AE=AF=E5=BE=AE=E5=8D=9A"><img src=3D"http://andylin02=
.iteye.com/images/tec.jpg"></a>
    </div>
  </div>

  <div class=3D"blog_nav">
    <div class=3D"pre_next">
      <a href=3D"http://andylin02.iteye.com/blog/444666" class=3D"next" tit=
le=3D"P2P=E5=8E=9F=E7=90=86=E5=8F=8AUDP=E7=A9=BF=E9=80=8F=E7=AE=80=E5=8D=95=
=E8=AF=B4=E6=98=8E">P2P=E5=8E=9F=E7=90=86=E5=8F=8AUDP=E7=A9=BF=E9=80=8F=E7=
=AE=80=E5=8D=95=E8=AF=B4=E6=98=8E</a>
      |
      <a href=3D"http://andylin02.iteye.com/blog/444616" class=3D"pre" titl=
e=3D"Napster">Napster</a>
    </div>
  </div>
  <div class=3D"blog_bottom">
    <ul>
      <li>2009-08-11 14:01</li>
      <li>=E6=B5=8F=E8=A7=88 5095</li>
      <li><a href=3D"http://andylin02.iteye.com/blog/444643#comments">=E8=
=AF=84=E8=AE=BA(1)</a></li>
     =20
     =20
           =20
      <li class=3D"last"><a href=3D"http://www.iteye.com/wiki/blog/444643" =
target=3D"_blank" class=3D"more">=E7=9B=B8=E5=85=B3=E6=8E=A8=E8=8D=90</a></=
li>
    </ul>
  </div>

  <div class=3D"blog_comment">
    <h5>=E8=AF=84=E8=AE=BA</h5>
    <a id=3D"comments" name=3D"comments"></a>
    <div id=3D"bc2331706">
  <div class=3D"comment_title">
    1 =E6=A5=BC
    <a href=3D"http://gmwu.iteye.com/" target=3D"_blank" title=3D"gmwu">gmw=
u</a>
    2013-11-19&nbsp;&nbsp;
   =20
   =20
  </div>
  <div class=3D"comment_content">=E6=9C=89=E9=97=AE=E9=A2=98,=E6=88=91=E6=
=B5=8B=E8=AF=95=E4=BA=86=E5=BE=88=E5=A4=9A=E6=97=A0=E6=B3=95=E7=A9=BF=E9=80=
=8F
<br></div>
</div>


   =20
   =20
  </div>

  <div class=3D"blog_comment">
    <h5>=E5=8F=91=E8=A1=A8=E8=AF=84=E8=AE=BA</h5>
            <p style=3D"text-align:center; margin-top:30px;margin-bottom:0p=
x;"><a href=3D"http://andylin02.iteye.com/login" style=3D"background-color:=
white;"> <img src=3D"http://andylin02.iteye.com/images/login_icon.png" styl=
e=3D"vertical-align:middle; margin-right: 10px;"></a><a href=3D"http://andy=
lin02.iteye.com/login">  =E6=82=A8=E8=BF=98=E6=B2=A1=E6=9C=89=E7=99=BB=E5=
=BD=95,=E8=AF=B7=E6=82=A8=E7=99=BB=E5=BD=95=E5=90=8E=E5=86=8D=E5=8F=91=E8=
=A1=A8=E8=AF=84=E8=AE=BA </a></p>
      </div>
</div>







        </div>

        <div id=3D"local">
          <div class=3D"local_top"></div>
          <div id=3D"blog_owner">
  <div id=3D"blog_owner_logo"><a href=3D"http://andylin02.iteye.com/"><img =
alt=3D"andylin02=E7=9A=84=E5=8D=9A=E5=AE=A2" class=3D"logo" src=3D"http://w=
ww.iteye.com/images/user-logo.gif?1324994303" title=3D"andylin02=E7=9A=84=
=E5=8D=9A=E5=AE=A2: =E6=B7=A1=E6=B3=8A=E6=98=8E=E5=BF=97=EF=BC=8C=E5=AE=81=
=E9=9D=99=E8=87=B4=E8=BF=9C" width=3D""></a></div>
  <div id=3D"blog_owner_name">andylin02</div>
</div>

          <div id=3D"blog_actions">
            <ul>
              <li>=E6=B5=8F=E8=A7=88: 973381 =E6=AC=A1</li>
              <li>=E6=80=A7=E5=88=AB: <img alt=3D"Icon_minigender_1" src=3D=
"http://www.iteye.com/images/icon_minigender_1.gif?1324994303" title=3D"=E7=
=94=B7"></li>
              <li>=E6=9D=A5=E8=87=AA: =E5=8C=97=E4=BA=AC</li>
              <li><img src=3D"http://andylin02.iteye.com/images/status/offl=
ine.gif"></li>
             =20
            </ul>
          </div>
          <div id=3D"user_visits" class=3D"clearfix">
            <h5>=E6=9C=80=E8=BF=91=E8=AE=BF=E5=AE=A2 <span style=3D"font-we=
ight:normal;font-size:12px;padding-left:30px;"><a href=3D"http://andylin02.=
iteye.com/blog/user_visits">=E6=9B=B4=E5=A4=9A=E8=AE=BF=E5=AE=A2&gt;&gt;</a=
></span></h5>
           =20
              <div class=3D"user_visit">
                <div class=3D"logo"><a href=3D"http://zwcan241.iteye.com/" =
target=3D"_blank"><img alt=3D"zwcan241=E7=9A=84=E5=8D=9A=E5=AE=A2" class=3D=
"logo" src=3D"http://www.iteye.com/upload/logo/user/984106/d4c1a0b9-18aa-31=
9a-b458-331c30ecc7bb-thumb.jpg?1403577966" title=3D"zwcan241=E7=9A=84=E5=8D=
=9A=E5=AE=A2: " width=3D"48px"></a></div>
                <div class=3D"left"><a href=3D"http://zwcan241.iteye.com/" =
target=3D"_blank" title=3D"zwcan241">zwcan241</a></div>
              </div>
           =20
              <div class=3D"user_visit">
                <div class=3D"logo"><a href=3D"http://dhn269.iteye.com/" ta=
rget=3D"_blank"><img alt=3D"dhn269=E7=9A=84=E5=8D=9A=E5=AE=A2" class=3D"log=
o" src=3D"http://www.iteye.com/images/user-logo-thumb.gif?1324994303" title=
=3D"dhn269=E7=9A=84=E5=8D=9A=E5=AE=A2: " width=3D"48px"></a></div>
                <div class=3D"left"><a href=3D"http://dhn269.iteye.com/" ta=
rget=3D"_blank" title=3D"dhn269">dhn269</a></div>
              </div>
           =20
              <div class=3D"user_visit">
                <div class=3D"logo"><a href=3D"http://wizardho.iteye.com/" =
target=3D"_blank"><img alt=3D"wizardho=E7=9A=84=E5=8D=9A=E5=AE=A2" class=3D=
"logo" src=3D"http://www.iteye.com/images/user-logo-thumb.gif?1324994303" t=
itle=3D"wizardho=E7=9A=84=E5=8D=9A=E5=AE=A2: " width=3D"48px"></a></div>
                <div class=3D"left"><a href=3D"http://wizardho.iteye.com/" =
target=3D"_blank" title=3D"wizardho">wizardho</a></div>
              </div>
           =20
              <div class=3D"user_visit">
                <div class=3D"logo"><a href=3D"http://coding4j.iteye.com/" =
target=3D"_blank"><img alt=3D"Coding4J=E7=9A=84=E5=8D=9A=E5=AE=A2" class=3D=
"logo" src=3D"http://www.iteye.com/upload/logo/user/1092727/a2443046-66eb-3=
e05-b5c9-321e7c8af9f5-thumb.png?1433568197" title=3D"Coding4J=E7=9A=84=E5=
=8D=9A=E5=AE=A2: " width=3D"48px"></a></div>
                <div class=3D"left"><a href=3D"http://coding4j.iteye.com/" =
target=3D"_blank" title=3D"Coding4J">Coding4J</a></div>
              </div>
           =20
          </div>

         =20

                      <div id=3D"blog_menu">
              <h5>=E6=96=87=E7=AB=A0=E5=88=86=E7=B1=BB</h5>
              <ul>
                <li><a href=3D"http://andylin02.iteye.com/">=E5=85=A8=E9=83=
=A8=E5=8D=9A=E5=AE=A2 (657)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/73423"=
>ACE (35)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70566"=
>BAT (9)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70553"=
>C/C++ (116)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/103858=
">fast-cgi (14)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70896"=
>COM (27)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/101421=
">python (59)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/84729"=
>CGI (4)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70555"=
>C# (2)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70554"=
>VC (84)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70557"=
>DataBase (29)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70556"=
>Linux (96)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/75628"=
>P2P (6)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70565"=
>PHP (15)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/75633"=
>Web (6)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/75631"=
>Memcached (7)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/72339"=
>IME=E8=BE=93=E5=85=A5=E6=B3=95 (11)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/75629"=
>=E8=AE=BE=E8=AE=A1=E6=A8=A1=E5=BC=8F (2)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/76249"=
>=E6=90=9C=E7=B4=A2=E5=BC=95=E6=93=8E (1)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70551"=
>=E4=B8=AA=E4=BA=BA=E6=83=85=E6=84=9F (4)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/75091"=
>=E7=AC=94=E8=AF=95/=E9=9D=A2=E8=AF=95 (3)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70552"=
>=E4=B8=80=E4=BA=A9=E4=B8=89=E5=88=86=E5=9C=B0 (33)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70558"=
>=E5=8E=86=E5=8F=B2 (2)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70559"=
>=E5=9C=B0=E7=90=86 (1)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70560"=
>=E4=BA=BA=E7=89=A9 (3)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70561"=
>=E7=BB=8F=E6=B5=8E (0)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70562"=
>=E4=B8=8D=E4=BB=85=E4=BB=85=E6=98=AF=E7=AC=91=E5=93=A6 (43)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/70563"=
>=E5=B0=8F=E6=95=85=E4=BA=8B=E5=A4=A7=E9=81=93=E7=90=86 (2)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/164333=
">http://www.bjdsmyysjk120.com/ (0)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/329335=
">http://www.bjdsmyy120.com/ (0)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/71046"=
>=E5=AE=83=E5=B1=B1=E4=B9=8B=E7=9F=B3=E5=8F=AF=E4=BB=A5=E6=94=BB=E7=8E=89 (=
15)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/71243"=
>=E5=A4=A7=E5=AD=A6=E7=94=9F=E4=BD=A0=E5=85=B3=E6=B3=A8=E4=BA=9B=E4=BB=80=
=E4=B9=88 (28)</a></li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/category/339839=
">=E6=95=B0=E6=8D=AE=E6=81=A2=E5=A4=8D (1)</a></li>
               =20
              </ul>
            </div>
            <div id=3D"month_blogs">
              <h5>=E7=A4=BE=E5=8C=BA=E7=89=88=E5=9D=97</h5>
              <ul>
                <li><a href=3D"http://andylin02.iteye.com/blog/news">=E6=88=
=91=E7=9A=84=E8=B5=84=E8=AE=AF</a> (0)</li>
                <li>
                  <a href=3D"http://andylin02.iteye.com/blog/post">=E6=88=
=91=E7=9A=84=E8=AE=BA=E5=9D=9B</a> (0)
                </li>
                <li><a href=3D"http://andylin02.iteye.com/blog/answered_pro=
blems">=E6=88=91=E7=9A=84=E9=97=AE=E7=AD=94</a> (0)</li>
              </ul>
            </div>
            <div id=3D"month_blogs">
              <h5>=E5=AD=98=E6=A1=A3=E5=88=86=E7=B1=BB</h5>
              <ul>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/blog/monthblog/=
2015-05">2015-05</a> (3)</li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/blog/monthblog/=
2014-04">2014-04</a> (1)</li>
               =20
                  <li><a href=3D"http://andylin02.iteye.com/blog/monthblog/=
2012-08">2012-08</a> (4)</li>
               =20
                <li><a href=3D"http://andylin02.iteye.com/blog/monthblog_mo=
re">=E6=9B=B4=E5=A4=9A=E5=AD=98=E6=A1=A3...</a></li>
              </ul>
            </div>
           =20
           =20

            <div id=3D"guest_books">
              <h5>=E6=9C=80=E6=96=B0=E8=AF=84=E8=AE=BA</h5>
              <ul>
               =20
                <li>
                  <a href=3D"http://effort-fan.iteye.com/" target=3D"_blank=
" title=3D"effort_fan">effort_fan</a>=EF=BC=9A=20
                  =E5=A5=BD=E6=96=87=E7=AB=A0=EF=BC=81=E5=AD=A6=E4=B9=A0=E4=
=BA=86=EF=BC=8C=E8=B0=A2=E8=B0=A2=E5=88=86=E4=BA=AB=EF=BC=81<br>
                  <a href=3D"http://andylin02.iteye.com/blog/434394#bc23679=
61">com=E6=8A=80=E6=9C=AF=E7=AE=80=E4=BB=8B</a>
                </li>
               =20
                <li>
                  <a href=3D"http://vcell.iteye.com/" target=3D"_blank" tit=
le=3D"vcell">vcell</a>=EF=BC=9A=20
                  =E6=9C=89=E9=94=99=E8=AF=AFos.walk(strPath)=E8=BF=94=E5=
=9B=9E=E7=9A=84=E5=B7=B2=E7=BB=8F=E6=98=AF=E5=85=A8=E9=83=A8=E7=9A=84=E6=96=
=87=E4=BB=B6=E5=92=8C ...<br>
                  <a href=3D"http://andylin02.iteye.com/blog/1071448#bc2365=
637">=E9=80=9A=E8=BF=87python=E8=8E=B7=E5=8F=96=E7=9B=AE=E5=BD=95=E7=9A=84=
=E5=A4=A7=E5=B0=8F</a>
                </li>
               =20
                <li>
                  <a href=3D"http://feifeigd.iteye.com/" target=3D"_blank" =
title=3D"feifeigd">feifeigd</a>=EF=BC=9A=20
                  feifeigd =E5=86=99=E9=81=93=E6=B3=A8=E6=84=8F=EF=BC=9A=E6=
=96=87=E7=AB=A0=E4=B8=AD=E7=9A=84CPP=E7=A4=BA=E4=BE=8B=E7=AC=AC=E4=BA=8C=E8=
=A1=8C #inc ...<br>
                  <a href=3D"http://andylin02.iteye.com/blog/453079#bc23631=
06">ATL=E5=85=A5=E9=97=A8=EF=BC=9A=E5=88=A9=E7=94=A8ATL=E7=BC=96=E5=86=99=
=E7=AE=80=E5=8D=95=E7=9A=84COM=E7=BB=84=E4=BB=B6</a>
                </li>
               =20
                <li>
                  <a href=3D"http://feifeigd.iteye.com/" target=3D"_blank" =
title=3D"feifeigd">feifeigd</a>=EF=BC=9A=20
                  =E6=B3=A8=E6=84=8F=EF=BC=9A=E6=96=87=E7=AB=A0=E4=B8=AD=E7=
=9A=84CPP=E7=A4=BA=E4=BE=8B=E7=AC=AC=E4=BA=8C=E8=A1=8C #include " ...<br>
                  <a href=3D"http://andylin02.iteye.com/blog/453079#bc23631=
05">ATL=E5=85=A5=E9=97=A8=EF=BC=9A=E5=88=A9=E7=94=A8ATL=E7=BC=96=E5=86=99=
=E7=AE=80=E5=8D=95=E7=9A=84COM=E7=BB=84=E4=BB=B6</a>
                </li>
               =20
                <li>
                  <a href=3D"http://stecdeng.iteye.com/" target=3D"_blank" =
title=3D"stecdeng">stecdeng</a>=EF=BC=9A=20
                  =E6=9C=89=E9=AA=8C=E8=AF=81=E4=B9=88&nbsp; =E7=99=BE=E5=
=BA=A6=E4=B8=8D=E6=98=AF=E8=8E=B7=E5=8F=96=E5=88=B0=E7=9A=84=E8=BF=99=E4=B8=
=AAIP<br>
                  <a href=3D"http://andylin02.iteye.com/blog/662965#bc23472=
14">gethostbyname() -- =E7=94=A8=E5=9F=9F=E5=90=8D=E6=88=96=E4=B8=BB=E6=9C=
=BA=E5=90=8D=E8=8E=B7=E5=8F=96IP=E5=9C=B0=E5=9D=80</a>
                </li>
               =20
              </ul>
            </div>

            <div class=3D"local_bottom"></div>
         =20
        </div>
      </div>

      <div id=3D"footer" class=3D"clearfix">
        <div id=3D"copyright">
          <hr>
          =E5=A3=B0=E6=98=8E=EF=BC=9AITeye=E6=96=87=E7=AB=A0=E7=89=88=E6=9D=
=83=E5=B1=9E=E4=BA=8E=E4=BD=9C=E8=80=85=EF=BC=8C=E5=8F=97=E6=B3=95=E5=BE=8B=
=E4=BF=9D=E6=8A=A4=E3=80=82=E6=B2=A1=E6=9C=89=E4=BD=9C=E8=80=85=E4=B9=A6=E9=
=9D=A2=E8=AE=B8=E5=8F=AF=E4=B8=8D=E5=BE=97=E8=BD=AC=E8=BD=BD=E3=80=82=E8=8B=
=A5=E4=BD=9C=E8=80=85=E5=90=8C=E6=84=8F=E8=BD=AC=E8=BD=BD=EF=BC=8C=E5=BF=85=
=E9=A1=BB=E4=BB=A5=E8=B6=85=E9=93=BE=E6=8E=A5=E5=BD=A2=E5=BC=8F=E6=A0=87=E6=
=98=8E=E6=96=87=E7=AB=A0=E5=8E=9F=E5=A7=8B=E5=87=BA=E5=A4=84=E5=92=8C=E4=BD=
=9C=E8=80=85=E3=80=82<br>
          =C2=A9 2003-2015 ITeye.com.   All rights reserved.  [ =E4=BA=ACIC=
P=E8=AF=81110151=E5=8F=B7  =E4=BA=AC=E5=85=AC=E7=BD=91=E5=AE=89=E5=A4=87110=
105010620 ]
        </div>
      </div>
    </div>
    <img src=3D"http://stat.iteye.com/?url=3Dhttp%3A%2F%2Fandylin02.iteye.c=
om%2Fblog%2F444643&amp;referrer=3Dhttps%3A%2F%2Fwww.baidu.com%2Flink%3Furl%=
3D2GwrNXbMTMfa3RSgrwD9KkAfCeQ49HZDSRmiIr8V02TYjgeRUua0azHEEoAhapTL%26wd%3D%=
26eqid%3Db2f81038000197fe000000035641b846&amp;user_id=3D" width=3D"0" heigh=
t=3D"0">



   =20
   =20
 =20

<style id=3D"evernoteClearlyNextContainer__css" type=3D"text/css">#evernote=
ClearlyNextContainer { margin: 0; padding: 0; border: none; position: absol=
ute; width: 10px; height: 10px; top: -100px; left: -100px; } #evernoteClear=
lyNextContainer iframe { margin: 0; padding: 0; border: none; position: abs=
olute; width: 10px; height: 10px; top: -100px; left: -100px; } </style><div=
 id=3D"evernoteClearlyNextContainer"></div></body></html>
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/line_gray.gif

R0lGODlhAQALAIAAAMzMzP///yH5BAAHAP8ALAAAAAABAAsAAAIDhI9QADs=
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/logo_bg.gif

R0lGODlhOAA4ALMAAMzMzPDw8NXV1f///93d3ff39+bm5tnY3f///wAAAAAAAAAAAAAAAAAAAAAA
AAAAACH5BAEHAAgALAAAAAA4ADgAAAT/EB1Aq704610P+t80jGRpnmiqkoAHAgMoz3Rt3/QABG+M
/8AgQmcofGDCpBKkIwSMyKUUqBMUEdGptlZ1Yn3bMBMgcBay4nD3iU5r12ew+002t+dL+B2f1Mv5
Sn6AU4KDeXVsf4ZUiHGLgY17jzaFk4xliZZBlZo3nJ1ckYqgMp+kpaKnlKmqOaytqJiOsLF2o6qm
rbm4r7RDvbS7p8KkxKDGnciaypbMk86P0IvShtSD1oDYfNp43HPebnAiK+Tl5jqNEhzr7O0VZWYf
AQYEAvb3+Pn6+/z99gQGnoCYR6CgwYMIEypcyLBgQIEDA0icSLGixYsYM1IsYEQGx48gCEOKHEmy
5MgIADs=
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/logo-small.gif

R0lGODlhSQAVAMQAAMfT3ixZg/H09+Pp7qq8zTpkjNXe5nORrbjH1khvlGWGpIGctZyxxeGHaddb
Mt98W9xxTeyyn9RQJPz08eedhPTTyOSSdumnkfrp5O+9rffe1o6mvVZ6nB5Oe////wAAACH/C1hN
UCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtj
OWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUg
WE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAi
PiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5
bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6
Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29t
L3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NU
eXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdp
bmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0ZEMjQ1MjY1QUFCMTFFMDgzM0FBNzMw
NkNBMkU5MUUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0ZEMjQ1Mjc1QUFCMTFFMDgzM0FB
NzMwNkNBMkU5MUUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlp
ZDpDRkQyNDUyNDVBQUIxMUUwODMzQUE3MzA2Q0EyRTkxRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1w
LmRpZDpDRkQyNDUyNTVBQUIxMUUwODMzQUE3MzA2Q0EyRTkxRSIvPiA8L3JkZjpEZXNjcmlwdGlv
bj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf2
9fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769
vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWE
g4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxL
SklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMS
ERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAABJABUAAAX/oCeO3mQ1ZKqubOu+reY41ATf
eI5DtBPpwKAuI7lIGj+hcqlqQBqPB4RJrVYqDwxnS/Bsv2COgWRgbDaI0QA8IDG+i5GAcCa0lZ38
xpPv+zsAIgAFfwF7Xn0KcgF9aQIHfx0cd0B9e5F+gQSYeRwCA5kikJ0eBoyYAWOVenycgAiueYob
fQUeAH4DAoSuAZQ4liQcfYEivJ0bo8S7fQwJwbS1CxvHHQerHYciw3nFm31ddAinHYqwkQUCHuQJ
nxsEyh3qOcEj3IAiC33X0QHfHQG2RUpjwM+nUwyOpaHHyh4xgXnS3MPVRwQoPxwE9clIUZK+hsBA
IuoGsUOXfvNSfETLo6pjAg8CTnXBI3KiiJUvPdD5RUJAnzgWQw3YUIxmNmEPS/lRcEfVinoinuUJ
UMypEKgj8ZXM8yxAyhRYz/UJQEhbEKw2LZLzc+2pSA/xxn7VgTapCAPV7JLAKgpT27M19cKkNvYA
TxF8BSnwk2BmlRwCABwOYsAqixAAOw==
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/gray_west_arrow.gif

R0lGODlhCAALAJEAAKSkpP///////wAAACH5BAEHAAIALAAAAAAIAAsAAAIRlI8HkMvqYBRu0opw
Xun2UwAAOw==
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/gray_east_arrow.gif

R0lGODlhCAALAJEAAKOjo////////wAAACH5BAEHAAIALAAAAAAIAAsAAAIRlH8AaLroXospPlsV
1Jt5UwAAOw==
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/icon_more.gif

R0lGODlhKgALAIAAANl3Lv///yH5BAAHAP8ALAAAAAAqAAsAAAI/jI+pywsPo5y0RmOzzpjDACQh
Mh5T94ASxn6hq1bouL5gfJPiGtMXDHwJZb1eCqZL5Uy8jfPpg0opjar1GigAADs=
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/blog/search.gif

R0lGODlhFQAVALMAAM7OzsHBwfv7++Tk5Nzc3NfX183NzeDg4N3d3dPT0+3t7bi4uP///wAAAAAA
AAAAACH5BAAAAAAALAAAAAAVABUAAARqkMlJq704MwWWX4CiScVnLoWWeMGgKEPgJZgyC5SwLqLV
BbiKQAa4eAaYgcfIqy0tnp7FtmAiL8qqbwG0DEEXaiIo0XkOmF3rFfvQMKXT6R3ufACH3YI+mugN
fRV6CIEUBh4EhRQEiYoYEQA7
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: text/css
Content-Transfer-Encoding: quoted-printable
Content-Location: http://www.iteye.com/stylesheets/blog.css?1446798272

.stretch, .clear { clear: both; height: 1px; margin: 0px; padding: 0px; fon=
t-size: 15px; line-height: 1px; }

.clearfix::after { content: "."; display: block; height: 0px; clear: both; =
visibility: hidden; }

.clearfix { display: inline-table; }

* html .clearfix { height: 1%; }

* + html .clearfix { height: 1%; }

.clearfix { display: block; }

.replace { display: block; background-color: transparent; background-positi=
on: 0% 0%; background-repeat: no-repeat; }

.replace * { text-indent: -10000px; display: block; background-color: trans=
parent; background-position: 0% 0%; background-repeat: no-repeat; }

.replace a { text-indent: 0px; }

.replace a span { text-indent: -10000px; }

span.accesskey { text-decoration: none; }

.accessibility { position: absolute; top: -999em; left: -999em; }

body { text-align: left; font-family: Helvetica, Tahoma, Arial, sans-serif;=
 font-size: 12px; line-height: 1.5; color: black; }

img { border: 0px; }

h1 { font-size: 2em; line-height: 1.5em; margin: 0px 0px 0.5em; padding: 0p=
x; color: black; }

h2 { font-size: 1.5em; line-height: 1.5em; margin: 0px 0px 0.5em; padding: =
0px; color: black; }

h3 { font-size: 1.2em; line-height: 1.5em; margin: 0px 0px 0.5em; padding: =
0px; color: black; }

h4 { font-size: 1.15em; line-height: 1.3em; margin: 0px 0px 0.25em; padding=
: 0px; color: black; }

h5 { font-size: 1.1em; line-height: 1.3em; margin: 0px 0px 0.25em; padding:=
 0px; color: black; }

h6 { font-size: 1em; line-height: 1.3em; margin: 0px 0px 0.25em; padding: 0=
px; color: black; }

p { margin: 0px; padding: 0px; }

blockquote { border-left-width: 10px; border-left-style: solid; border-left=
-color: rgb(221, 221, 221); margin-left: 10px; }

pre { font-family: monospace; font-size: 1em; }

strong, b { font-weight: bold; }

em, i { font-style: italic; }

code { font-family: 'Courier New', Courier, monospace; font-size: 1em; whit=
e-space: pre; }

ul { margin: 0px 0px 1.5em; padding: 0px; }

ul li { margin: 0px 0px 0.25em 30px; padding: 0px; }

ol { font-size: 1em; line-height: 1.4em; margin: 0px 0px 1.5em; padding: 0p=
x; }

ol li { font-size: 1em; margin: 0px 0px 0.25em 30px; padding: 0px; }

dl { margin: 0px 0px 1.5em; padding: 0px; line-height: 1.4em; }

dl dt { margin: 0.25em 0px; padding: 0px; }

dl dd { margin: 0px 0px 0px 30px; padding: 0px; }

th { font-weight: bold; text-align: left; }

td { font-size: 1em; }

hr { height: 1px; margin: 1.5em 10px; border-bottom-color: black; border-bo=
ttom-width: thin; }

div.topic_page { color: rgb(0, 102, 153); }

form { margin: 0px; padding: 0px; clear: both; }

form div, form p { font-size: 1em; margin: 0px 0px 1em; padding: 0px; }

label { font-weight: bold; float: left; width: 25%; }

fieldset { border: 1px solid rgb(238, 238, 238); padding: 5px 10px; margin:=
 0px; }

fieldset legend { color: rgb(102, 102, 102); font-size: 1.1em; font-weight:=
 bold; margin: 0px; padding: 0px; }

* html fieldset legend { margin: 0px 0px 10px -10px; }

fieldset ul { list-style: none; margin: 0px 0px 1.5em; padding: 0px; }

fieldset ul li { list-style: none; margin: 0px 0px 0.5em; padding: 0px; }

input.text, select, textarea { margin: 0px; border: 1px solid rgb(0, 102, 1=
53); padding: 1px 3px; vertical-align: middle; }

input.text { height: 18px; font-family: Arial, sans-serif, Verdana, Tahoma,=
 Helvetica; }

input.check { border: none; width: auto; height: auto; margin: 0px; }

input.radio { border: none; width: auto; height: auto; margin: 0px; }

input.file { height: auto; width: 250px; }

input.readonly { border: none; background-color: transparent; }

input.button, input.submit { color: white; cursor: pointer; font-size: 1em;=
 height: 23px; padding: 2px 5px; border: 1px solid rgb(210, 243, 253); vert=
ical-align: middle; background: rgb(0, 102, 153); }

input.image { border: none; width: auto; height: auto; }

textarea { font-size: 1em; }

form div.submit { margin: 1em 0px; }

form div.submit input { height: 2em; width: 15em; }

div#nav div.wrapper { position: absolute; left: 0px; bottom: 0px; width: 10=
0%; font-size: 13px; padding-bottom: 6px; background: url("/images/shadow.p=
ng") 0% 100% repeat-x rgb(98, 147, 187); }

div#nav ul { width: 100%; margin: 0px; padding: 0px; }

div#nav li { float: left; display: inline; list-style: none; margin: 0px; p=
adding: 0px 10px; line-height: 1em; background-image: url("/images/line_whi=
te.gif"); background-position: 100% 50%; background-repeat: no-repeat; }

div#nav li.last { background: none; }

div#nav a, div#nav a:link, div#nav a:active, div#nav a:visited { display: b=
lock; font-weight: bold; text-decoration: none; margin: 0px; padding: 7px 1=
3px; color: white; }

div#nav .subnav a, div#nav .subnav a:link, div#nav .subnav a:active, div#na=
v .subnav a:visited { display: inline-block; padding: 7px 6px; }

div#nav a:hover, div#nav a.selected { background-color: rgb(54, 113, 165); =
}

div#content { position: relative; width: 701px; margin: 0px auto 20px; padd=
ing: 0px; text-align: left; }

div#main { float: right; width: 500px; display: inline; }

div#local { float: left; width: 200px; display: inline; }

div#sub { display: none; }

div#nav { position: absolute; top: -15px; left: 0px; width: 100%; text-alig=
n: left; }

body { margin: 0px; padding: 0px; text-align: center; background: white; }

div#page { width: 950px; margin: 0px auto; padding: 0px; text-align: center=
; background: white; }

div#header { padding: 0px; margin: 0px; color: white; background-color: whi=
te; }

div#branding { float: left; width: 200px; margin: 1px 0px; text-align: left=
; }

div#search { float: right; width: 49%; margin: 0px; padding: 16px 20px 0px =
0px; text-align: right; }

div#content { width: 100%; margin-top: 35px; }

div#footer { color: black; background-color: white; }

div#footer p { font-size: 0.8em; margin: 0px; padding: 15px; }

ul.subnav { margin: 0px; padding: 0px; font-size: 0.8em; list-style: none; =
}

ul.subnav li { margin: 0px 0px 1em; padding: 0px; list-style: none; }

ul.subnav li a, ul.subnav li a:link, ul.subnav li a:visited, ul.subnav li a=
:active { text-decoration: none; font-weight: bold; color: black; }

ul.subnav li a:hover { text-decoration: underline; }

ul.subnav li strong { padding: 0px 0px 0px 12px; background: url("/i/subnav=
-highlight.gif") 0% 0% no-repeat transparent; }

ul.subnav li strong a, ul.subnav li strong a:link, ul.subnav li strong a:vi=
sited, ul.subnav li strong a:active { color: white; background-color: black=
; }

.nav_side { margin: 0px 0px 10px; border: 1px solid rgb(202, 204, 201); bac=
kground: rgb(244, 246, 243); }

.nav_side ul { margin: 0px; }

.nav_side li { height: 37px; overflow: hidden; margin: 0px 5px; padding: 0p=
x; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-colo=
r: rgb(227, 234, 240); color: rgb(0, 102, 153); font-size: 14px; line-heigh=
t: 37px; text-indent: 38px; }

.nav_side li a { display: block; height: 37px; color: rgb(0, 102, 153); tex=
t-decoration: none; }

.nav_side li a:hover { color: rgb(255, 88, 10); text-decoration: none; }

.nav_side li.last { height: 38px; border-bottom-style: none; }

.nav_side li.select { height: 38px; margin: 0px; border-bottom-style: none;=
 background: url("/images/sidenav_select_bg.gif") 0px 0px no-repeat; }

.nav_side li.select a { height: 38px; color: rgb(255, 255, 255); font-weigh=
t: bold; }

.nav_side #mobile { background: url("/images/icon_sidenav.png") 5px 3px no-=
repeat; }

.nav_side #web { background: url("/images/icon_sidenav.png") 5px -49px no-r=
epeat; }

.nav_side #architecture { background: url("/images/icon_sidenav.png") 5px -=
102px no-repeat; }

.nav_side #language { background: url("/images/icon_sidenav.png") 5px -155p=
x no-repeat; }

.nav_side #internet { background: url("/images/icon_sidenav.png") 5px -206p=
x no-repeat; }

.nav_side #opensource { background: url("/images/icon_sidenav.png") 5px -26=
0px no-repeat; }

.nav_side #os { background: url("/images/icon_sidenav.png") 5px -310px no-r=
epeat; }

.nav_side #database { background: url("/images/icon_sidenav.png") 5px -361p=
x no-repeat; }

.nav_side #develop { background: url("/images/icon_sidenav.png") 5px -412px=
 no-repeat; }

.nav_side #industry { background: url("/images/icon_sidenav.png") 5px -466p=
x no-repeat; }

.nav_side #other { background: url("/images/icon_sidenav.png") 5px -568px n=
o-repeat; }

.nav_side #all { background: url("/images/elite_sidenav.png") 5px -260px no=
-repeat; }

.nav_side li.select #mobile { background: url("/images/icon_sidenav.png") 1=
0px 3px no-repeat; }

.nav_side li.select #web { background: url("/images/icon_sidenav.png") 10px=
 -49px no-repeat; }

.nav_side li.select #architecture { background: url("/images/icon_sidenav.p=
ng") 10px -102px no-repeat; }

.nav_side li.select #language { background: url("/images/icon_sidenav.png")=
 10px -155px no-repeat; }

.nav_side li.select #internet { background: url("/images/icon_sidenav.png")=
 10px -206px no-repeat; }

.nav_side li.select #opensource { background: url("/images/icon_sidenav.png=
") 10px -260px no-repeat; }

.nav_side li.select #os { background: url("/images/icon_sidenav.png") 10px =
-310px no-repeat; }

.nav_side li.select #database { background: url("/images/icon_sidenav.png")=
 10px -361px no-repeat; }

.nav_side li.select #develop { background: url("/images/icon_sidenav.png") =
10px -412px no-repeat; }

.nav_side li.select #industry { background: url("/images/icon_sidenav.png")=
 10px -466px no-repeat; }

.nav_side li.select #other { background: url("/images/icon_sidenav.png") 10=
px -568px no-repeat; }

.nav_side li.select #all { background: url("/images/elite_sidenav.png") 10p=
x -259px no-repeat; }

a { color: rgb(0, 102, 153); text-decoration: none; }

a:hover, a:active { color: rgb(188, 42, 77); text-decoration: underline; }

blockquote { border: 1px solid rgb(204, 204, 204); background-color: rgb(25=
0, 250, 250); }

cite { font-weight: bold; margin-left: 3px; }

div#user_nav { margin: 3px 0px 0px; padding: 2px; text-align: right; float:=
 right; }

div#user_nav a.nobg { background: none; }

div#user_nav a.welcome { color: rgb(226, 136, 34); font-weight: bold; paddi=
ng-right: 10px; }

div#user_nav a:hover.welcome { text-decoration: none; color: rgb(226, 136, =
34); background-color: transparent; }

div#user_nav a.new_reply { color: red; padding-left: 0px; }

div#user_nav a:hover.new_reply { text-decoration: none; color: red; backgro=
und-color: transparent; }

div#user_nav a { text-decoration: none; padding: 2px 6px 1px; color: gray; =
line-height: 1em; background-image: url("/images/line_gray.gif"); backgroun=
d-position: 100% 50%; background-repeat: no-repeat; }

div#user_nav a:hover { text-decoration: underline; color: white; background=
-color: gray; }

div.quick_menu { border: 1px solid rgb(221, 221, 221); text-align: left; to=
p: 30px; position: absolute; width: 70px; z-index: 9999; background-color: =
white; }

div.quick_menu a { display: block !important; padding: 3px 6px 3px 10px !im=
portant; text-decoration: none !important; line-height: 20px !important; ba=
ckground-image: none !important; }

div#location_ad { float: left; margin-top: 5px; padding-left: 12px; backgro=
und-image: url("/images/yellow_east_arrow.gif"); background-position: 0% 50=
%; background-repeat: no-repeat; }

div#site_nav ul { width: 100%; margin: 0px; padding: 0px; line-height: 1em;=
 list-style: none; }

div#site_nav li { display: inline; list-style: none; margin: 0px; padding: =
3px 10px; line-height: 1em; border-right-width: 1px; border-right-style: so=
lid; border-right-color: rgb(170, 170, 170); }

div#site_nav li.last { border-right-style: none; }

div#channel_nav { position: absolute; left: 0px; top: 0px; }

div#channel_nav ul { width: 100%; margin: 0px; padding: 0px; line-height: 1=
em; list-style: none; }

div#channel_nav li { display: inline; float: left; list-style: none; margin=
: 0px; line-height: 1em; border-width: 1px 0px 1px 1px; border-top-style: s=
olid; border-bottom-style: solid; border-left-style: solid; border-top-colo=
r: rgb(254, 221, 202); border-bottom-color: rgb(254, 221, 202); border-left=
-color: rgb(254, 221, 202); }

div#channel_nav li.last { border-right-width: 1px; border-right-style: soli=
d; border-right-color: rgb(254, 221, 202); }

div#channel_nav a { display: block; text-decoration: none; margin: 0px; pad=
ding: 4px 25px; color: green; }

div#channel_nav a:hover, div#channel_nav a.selected { background-color: rgb=
(254, 221, 202); }

div#gg { float: right; margin: 2px 0px; width: 728px; }

div#copyright { padding: 10px; }

.pagination { padding: 5px; float: right; }

.pagination a, .pagination a:link, .pagination a:visited { padding: 2px 5px=
; margin: 2px; border: 1px solid rgb(170, 170, 221); text-decoration: none;=
 color: rgb(0, 102, 153); }

.pagination a:hover, .pagination a:active { border: 1px solid rgb(0, 102, 1=
53); color: rgb(0, 0, 0); text-decoration: none; }

.pagination span.current { padding: 2px 5px; margin: 2px; border: 1px solid=
 rgb(0, 102, 153); font-weight: bold; color: rgb(255, 255, 255); background=
-color: rgb(0, 102, 153); }

.pagination span.disabled { padding: 2px 5px; margin: 2px; border: 1px soli=
d rgb(238, 238, 238); color: rgb(221, 221, 221); }

a.underline, .underline a { text-decoration: underline; }

.hilite1 { background-color: rgb(255, 255, 0); }

.hilite2 { background-color: rgb(85, 255, 85); }

.hilite3 { background-color: rgb(170, 255, 170); }

.hilite4 { background-color: rgb(0, 255, 255); }

span.arrow { font-weight: normal; font-size: 0.9em; color: rgb(153, 153, 15=
3); }

.validation-advice { margin: 0px; padding: 0px 0px 0px 3px; color: rgb(255,=
 51, 0); font-weight: bold; }

.odd { background-color: rgb(239, 250, 255); }

.highlight, .highlight a, .highlight a:link, .highlight a:active, .highligh=
t a:visited { font-weight: bold; text-decoration: none; color: rgb(226, 136=
, 34); }

.highlight a:hover { text-decoration: none; color: rgb(255, 255, 255); back=
ground-color: rgb(226, 136, 34); }

.rss { margin-right: 5px; padding-right: 50px; background-image: url("/imag=
es/rss.png"); background-position: 100% 50%; background-repeat: no-repeat; =
}

.row1 { width: 155px; font-weight: bold; background-color: rgb(239, 239, 23=
9); }

.row2 { background-color: rgb(222, 227, 231); }

.row3 { background-color: rgb(238, 238, 238); }

.crumbs a { text-decoration: underline; }

.flash_error, .flash_notice { font-weight: bold; padding: 10px 40px; margin=
: 0px 10px; background-repeat: no-repeat; }

.flash_error { color: rgb(255, 51, 0); background-image: url("/images/icon_=
error_lrg.gif"); }

.flash_notice { background-image: url("/images/icon_success_lrg.gif"); }

select.validation-failed, input.validation-failed, textarea.validation-fail=
ed { border: 3px solid rgb(255, 0, 0); }

* html select.validation-failed { background-color: rgb(255, 0, 0); }

span.field_error { display: none; }

div.quote_title { font-weight: bold; padding: 5px; margin: 5px 0px 0px 15px=
; }

div.quote_div { border: 1px solid rgb(204, 204, 204); margin: 0px 5px 5px 1=
5px; padding: 3px; background: rgb(250, 250, 250); }

div.attachments { border-top-width: 1px; border-top-style: solid; border-to=
p-color: rgb(153, 153, 153); margin-top: 10px; }

div.attachments ul, div.postauthor ul { list-style: none; }

div.attachments ul { margin: 5px; padding: 5px; border: 1px solid rgb(204, =
204, 204); }

img.magplus { cursor: url("/images/magplus.gif"), pointer; }

div.logo { float: left; padding: 2px 6px 6px 2px; background-image: url("/i=
mages/logo_bg.gif"); background-repeat: no-repeat; }

span.thumb_box { display: table-cell; vertical-align: middle; height: 95px;=
 width: 130px; text-align: center; border: 1px solid rgb(204, 204, 204); }

span.thumb_box img { vertical-align: middle; }

.right { float: right; }

.left { float: left; }

table.bbcode { border: 1px solid rgb(204, 204, 204); }

table.bbcode td { border: 1px solid rgb(204, 204, 204); padding: 3px; }

div#search_engine_box { text-align: left; position: fixed; bottom: 0px; rig=
ht: 0px; width: 240px; border: 1px solid rgb(204, 204, 204); background-col=
or: white; }

#search_engine_box h2 { padding: 5px; color: white; font-size: 12px; font-w=
eight: normal; background-color: rgb(82, 110, 166); }

#search_engine_box h2 span { color: black; }

#search_engine_box h2 a { color: white; position: absolute; right: 5px; }

#search_engine_box div { padding: 0px 5px; }

#search_engine_box li { margin-left: 15px; list-style: square; }

* html div#search_engine_box { position: absolute; right: auto; bottom: aut=
o; }

div#chat_button { text-align: right; position: fixed; bottom: 0px; right: 1=
0px; width: 80px; border: 1px solid rgb(204, 204, 204); padding: 2px; verti=
cal-align: middle; background-color: rgb(238, 238, 238); }

div#chat_input { position: fixed; bottom: 25px; right: 10px; text-align: le=
ft; }

#chat_iframe { width: 360px; background-color: transparent; }

div#chat_button img { vertical-align: middle; }

* html div#chat_button { position: absolute; right: auto; bottom: auto; }

* html div#chat_input { position: absolute; right: auto; bottom: auto; }

.tooltip { overflow: hidden; font-size: 12px; position: absolute !important=
; z-index: 10000 !important; }

.tooltip .xtop, .tooltip .xbottom { display: block; font-size: 1px; backgro=
und: transparent; }

.tooltip .xb1, .tooltip .xb2, .tooltip .xb3, .tooltip .xb4 { display: block=
; overflow: hidden; }

.tooltip .xb1, .tooltip .xb2, .tooltip .xb3 { height: 1px; }

.tooltip .xb2, .tooltip .xb3, .tooltip .xb4 { border-left-width: 1px; borde=
r-left-style: solid; border-left-color: rgb(51, 51, 51); border-right-width=
: 1px; border-right-style: solid; border-right-color: rgb(51, 51, 51); back=
ground: rgb(102, 102, 102); }

.tooltip .xbottom .xb2, .tooltip .xbottom .xb3, .tooltip .xbottom .xb4 { ba=
ckground: rgb(102, 102, 102); }

.tooltip .xb1 { margin: 0px 5px; background: rgb(51, 51, 51); }

.tooltip .xb2 { margin: 0px 3px; border-width: 0px 2px; }

.tooltip .xb3 { margin: 0px 2px; }

.tooltip .xb4 { height: 2px; margin: 0px 1px; }

.tooltip .xboxcontent { margin: 0px; color: rgb(0, 0, 0); text-shadow: rgb(=
204, 204, 204) 2px 2px 0px; word-wrap: break-word; border-style: solid; bor=
der-color: rgb(51, 51, 51); border-width: 0px 1px; padding: 0px 20px; font-=
size: 125%; text-align: center; background-color: rgb(102, 102, 102); }

div#site_nav, div#channel_nav { z-index: 1; }

div#header { z-index: 2; position: relative; }

.logo a:hover { background-color: inherit; }

input#login_button { width: 147px; height: 34px; cursor: pointer; border: 0=
px none; font-size: 0px; color: rgb(0, 86, 173); background: url("/images/l=
ogin_button.jpg") no-repeat; }

#favorite_form_container { width: 580px; height: 250px; padding: 10px; text=
-align: left; position: absolute; z-index: 777; font-size: 12px; background=
: url("/images/app/bg_new.png") no-repeat; }

#favorite_form_container .cont { width: 580px; height: 250px; background: r=
gb(255, 255, 255); }

#favorite_form_wrapper { position: relative; padding-left: 15px; }

#close_list { overflow: hidden; text-align: right; border-bottom-width: 1px=
; border-bottom-style: dashed; border-bottom-color: rgb(204, 204, 204); pad=
ding: 5px 10px; margin-bottom: 20px; width: 560px; background: rgb(238, 238=
, 238); }

#favorite_form_close { cursor: pointer; }

#favorite_form_success { text-align: center; font-size: 18px; margin-top: 7=
0px; }

#favorite_form_success img { vertical-align: bottom; margin-right: 10px; }

#current_tags_panel { margin: 10px 0px 0px; }

#current_tags_panel span { display: inline-block; margin: 0px 5px 5px 0px; =
padding: 0px 10px; color: rgb(255, 255, 255); border-radius: 30px; backgrou=
nd-color: rgb(93, 122, 155); }

#suggested_tags_panel { margin: 10px 0px 0px; }

#suggested_tags_panel a { display: inline-block; margin: 0px 5px 5px 0px; p=
adding: 0px 10px; border-radius: 30px; background-color: rgb(170, 181, 195)=
; }

#suggested_tags_panel a { color: rgb(255, 255, 255); text-decoration: none;=
 }

#suggested_tags_panel a:hover, #suggested_tags_panel a.added { background-c=
olor: rgb(248, 123, 0); }

.news_tag { clear: both; display: block; margin: 10px 0px 5px; line-height:=
 20px; }

.news_tag::after { content: "."; display: block; height: 0px; clear: both; =
visibility: hidden; }

.news_tag a { display: inline-block; margin: 0px 5px 5px 0px; padding: 0px =
10px; border-radius: 10px; color: rgb(255, 255, 255); text-decoration: none=
; background-color: rgb(170, 181, 195); }

.news_tag a:hover, #suggested_tags_panel a.added { background-color: rgb(24=
8, 123, 0); }

.news_tag span.hilite1 { background-color: transparent; }

.news_tag span.view_all { float: right; }

.news_tag span.view_all a { padding: 0px 6px; color: rgb(0, 102, 153); text=
-decoration: underline; background: none; }

.title .news_tag { text-align: center; }

.category_tags { margin-top: 10px; padding: 5px 0px; }

.category_tags a { display: inline-block; height: 20px; margin: 0px 6px 0px=
 0px; padding: 0px 0px 0px 12px; color: rgb(255, 255, 255); line-height: 20=
px; text-decoration: none; background: url("/images/tag_bg.gif") 0% 0% no-r=
epeat; }

.category_tags a span { display: inline-block; height: 20px; padding: 0px 1=
2px 0px 0px; background: url("/images/tag_bg.gif") 100% 0% no-repeat; }

.category_tags a:hover, .category_tags a.pick_on { background: url("/images=
/tag_bg_3.gif") 0% 0% no-repeat; }

.category_tags a:hover span, .category_tags a.pick_on span { background: ur=
l("/images/tag_bg_3.gif") 100% 0% no-repeat; }

#user_nav #notifications_count { margin: 0px 0px 0px -5px; border: 1px soli=
d rgb(204, 204, 204); border-radius: 3px; font-weight: bold; text-decoratio=
n: none; line-height: 24px; background: rgb(255, 255, 255); }

#user_nav a:hover#notifications_count { border: 1px solid transparent; bord=
er-radius: 3px; color: rgb(255, 255, 255); background: rgb(0, 110, 181); }

#user_nav #notifications_count.new_notice { border: 1px solid transparent; =
border-radius: 3px; color: rgb(255, 255, 255); background: rgb(0, 110, 181)=
; }

#user_nav .clicked { color: rgb(255, 255, 255); background: url("/images/sm=
s_click_bg.gif") 50% 0% no-repeat !important; }

#notifications_menu { position: absolute; top: 26px; right: 10px; color: bl=
ack; width: 380px; text-align: left; border: 1px solid rgb(221, 221, 221); =
box-shadow: rgb(136, 136, 136) 0px 1px 5px; overflow: hidden; z-index: 999;=
 background-color: white; }

#notifications_loading { padding: 0px 5px; width: 60px; position: absolute;=
 left: 150px; background-color: yellow; }

#notifications_menu .menu_title { height: 36px; overflow: hidden; padding: =
0px 10px; border-bottom-style: solid; border-bottom-width: 1px; border-bott=
om-color: rgb(221, 221, 221); line-height: 34px; }

#notifications_menu .menu_title a { color: rgb(51, 51, 51); text-decoration=
: underline; }

#notifications_menu .menu_title a:hover { background: none; }

#notifications_menu .menu_title .title { float: left; }

#notifications_menu .menu_title .all { float: right; }

#notifications_menu .notification_summary { border-bottom-width: 1px; borde=
r-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); padding: 10=
px; cursor: pointer; color: rgb(51, 51, 51); overflow: hidden; background-c=
olor: rgb(246, 250, 252); }

#notifications_menu .notification_summary .time { color: rgb(153, 153, 153)=
; }

#notifications_menu .notification_summary.unread { font-weight: bold; backg=
round-color: rgb(255, 255, 255); }

#notifications_menu .notification_summary.unread .time { color: rgb(51, 51,=
 51); font-weight: normal; }

#notifications_menu .notification_summary.current, #notifications_menu .not=
ification_summary:hover { background-color: rgb(219, 235, 244); }

#notifications_menu .show_all, #notifications_menu .return { cursor: pointe=
r; }

#notifications_menu .notification_detail { }

#notifications_menu .notification_detail_title { position: relative; margin=
: 0px 0px 5px; padding: 4px 10px; overflow: hidden; border-bottom-style: so=
lid; border-bottom-width: 1px; border-bottom-color: rgb(238, 238, 238); lin=
e-height: 26px; background: rgb(250, 250, 250); }

#notifications_menu .notification_detail_title .subject_link { display: blo=
ck; }

#notifications_menu .notification_detail_title .time { position: absolute; =
top: 4px; right: 10px; }

#notifications_menu .notification_detail_notice { margin: 5px 0px 0px; padd=
ing: 5px 10px 10px; color: rgb(153, 153, 153); background: url("/images/lin=
e_1.gif") 50% 0% repeat-x; }

#notifications_menu .notification_detail_content { padding: 0px; }

#notifications_menu .system_message { padding: 0px 10px 10px; }

#notifications_menu .notification_detail_item { padding: 7px 10px; border-b=
ottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(230,=
 230, 230); overflow: hidden; }

#notifications_menu span.time { color: gray; float: right; }

#notifications_menu span.paginate { float: right; }

#notifications_menu span.paginate .separated { width: 10px; padding: 0px 10=
px; color: rgb(102, 102, 102); }

#notifications_menu span.paginate #prev_button { text-decoration: none; }

#notifications_menu span.paginate #next_button { text-decoration: none; }

#notifications_menu span.paginate a { cursor: pointer; padding-left: 3px; }

#notifications_menu span.paginate a.disable { cursor: default; color: rgb(1=
53, 153, 153); text-decoration: none; }

div#page { width: 100%; }

div#header { height: 30px; }

div#header, div#content, div#branding { margin: 0px auto; width: 950px; pos=
ition: relative; }

div#blog_site_nav { float: left; margin-top: 3px; }

div#blog_site_nav a.homepage { padding-left: 77px; background-image: url("/=
images/logo-small.gif"); background-position: 0% 50%; background-repeat: no=
-repeat; }

div#blog_site_nav a { padding: 3px 5px; line-height: 2.2em; }

a#msna { text-decoration: none; }

div#branding { float: none; padding: 10px 0px 0px; color: white; }

div#branding h1 { margin: 0px; padding-top: 8px; font-size: 30px; }

div#branding a, div#branding a:link, div#branding a:active, div#branding a:=
visited { color: white; text-decoration: underline; }

div#branding a:hover { color: white; text-decoration: none; }

div#branding h1 a, div#branding h1 a:link, div#branding h1 a:active, div#br=
anding h1 a:visited { text-decoration: none; }

div#local { overflow: hidden; }

div#local h5 { margin-left: 10px; }

div#local li { margin-left: 25px; line-height: 2.1em; list-style: square; }

#blog_name { padding-left: 38px; float: left; }

#blog_preview { text-align: right; height: 18px; width: 200px; float: right=
; }

#blog_preview img { vertical-align: middle; }

#blog_domain { padding: 35px 20px 0px 0px; float: right; }

div#content { margin-top: 5px; }

div#local { width: 188px; border: 1px solid black; padding: 10px 3px 0px; m=
argin: 3px 3px 0px 0px; }

div#main { width: 714px; border: 1px solid; padding: 5px 12px; margin: 3px =
0px 0px 5px; overflow: hidden; }

#blog_owner { text-align: center; padding: 0px 13px; }

div#blog_owner_logo { border: 1px solid rgb(204, 204, 204); padding: 10px; =
}

div#blog_owner_logo img { width: 120px !important; }

#blog_owner_name { padding-top: 5px; font-weight: bolder; }

#user_visits { margin-bottom: 20px; }

#user_visits div.left { width: 75px; overflow: hidden; }

div.user_visit { float: left; width: 75px; height: 90px; margin: 10px 0px 0=
px 5px; overflow: hidden; }

#blog_actions { margin-bottom: 20px; }

#blog_actions ul li { list-style: none; margin-left: 10px; }

#blog_actions a.profile, #blog_actions a.message, #blog_actions a.guest_boo=
k, #blog_actions a.subscription { padding: 0px 10px 0px 20px; background-po=
sition: 0% 50%; background-repeat: no-repeat; }

#blog_actions a.profile { background-image: url("/images/blog/profile.png")=
; }

#blog_actions a.message { background-image: url("/images/blog/message.png")=
; }

#blog_actions a.guest_book { background-image: url("/images/blog/guest_book=
.png"); }

#blog_actions a.subscription { background-image: url("/images/blog/subscrip=
tion.png"); }

div#rss li { list-style: none; }

div.blog_nav { right: 20px; margin-bottom: 15px; }

div.pre_next { float: right; text-align: right; padding-top: 5px; }

div.pre_next a { padding: 0px 15px; background-repeat: no-repeat; }

div.pre_next a.next { background-image: url("/images/gray_west_arrow.gif");=
 background-position: 0% 50%; }

div.pre_next a.pre { background-image: url("/images/gray_east_arrow.gif"); =
background-position: 100% 50%; }

.blog_main { margin: auto auto 10px; width: 700px; border-bottom-width: 1px=
; border-bottom-style: dotted; padding: 10px 11px 15px; }

.blog_title { margin-bottom: 15px; }

.blog_title h3 .actions a { margin-left: 8px; background-color: transparent=
; }

.blog_bottom { padding: 15px 0px 5px; }

.blog_bottom li { list-style: none; display: inline; float: left; margin: 0=
px 10px 0px 0px; padding-right: 10px; border-right-width: 1px; border-right=
-style: solid; }

.blog_bottom li.last { border-right-style: none; }

.blog_bottom a.more { padding-right: 50px; background-image: url("/images/i=
con_more.gif"); background-position: 100% 50%; background-repeat: no-repeat=
; }

.blog_comment { margin-top: 15px; padding: 15px; border-top-width: 1px; bor=
der-top-style: solid; border-top-color: gray; width: 685px; }

.comment_title, .comment_content { padding: 3px; }

.comment_title .delete { position: absolute; right: 30px; }

.comment_content { margin-bottom: 10px; }

div.picture_thumb { float: left; width: 142px; height: 170px; margin: 0px 1=
2px; overflow: hidden; }

div.picture_thumb li { list-style: none; margin: 0px; }

div.picture_full { text-align: center; overflow: auto; border-top-width: 1p=
x; border-top-style: solid; border-top-color: gray; padding-top: 15px; widt=
h: 100%; }

div.picture_full ul { text-align: left; width: 100%; padding-bottom: 20px; =
margin: 10px 0px; }

div.picture_full li { list-style: none; margin: 0px; padding: 15px 0px 5px =
10px; }

.show_full_flag { float: right; margin-top: 10px; }

div.digg { float: right; width: 52px; padding: 0px 5px; text-align: center;=
 }

.digg h3, .digg div { padding: 7px 0px; background-image: url("/images/digg=
.jpg"); background-repeat: no-repeat; }

.digg h3.digged, .digg div.digged { background-image: url("/images/digged.j=
pg"); }

.digg h3 a, .digg h3 span, .digg div a, .digg div span { font-size: 14px; f=
ont-weight: normal; text-decoration: none; padding-left: 15px; background-p=
osition: 0% 50%; background-repeat: no-repeat; }

div.digg div.digg_admin { width: 100px; text-align: left; background: none;=
 }

div.digg div.digg_admin a { padding-left: 2px; }

.digg h3 a.digg, .digg h3 span.digg, .digg div a.digg, .digg div span.digg =
{ color: rgb(21, 47, 147); background-image: url("/images/icon_digg.gif"); =
}

.digg h3 a.bury, .digg h3 span.bury, .digg div a.bury, .digg div span.bury =
{ color: rgb(160, 58, 50); background-image: url("/images/icon_bury.gif"); =
}

div#digg_bottom { margin: 5px 0px; padding-left: 270px; display: inline-blo=
ck; }

div#digg_bottom div { width: 72px; height: 50px; float: left; text-align: c=
enter; padding-top: 9px; margin-right: 10px; font-size: 14px; line-height: =
25px; cursor: pointer; background-image: url("/images/digg_bottom.gif"); }

div#digg_bottom strong { color: white; }

#share_weibo { display: inline-block; float: right; width: 160px; height: 3=
2px; margin: 0px; padding: 27px 5px 0px 0px; color: rgb(51, 51, 51); text-a=
lign: right; cursor: auto; font-style: normal !important; font-variant: nor=
mal !important; font-weight: normal !important; font-stretch: normal !impor=
tant; font-size: 12px !important; line-height: 32px !important; font-family=
: Arial, Helvetica, sans-serif !important; background: none; }

#share_weibo img { margin: 0px 5px; }

#share_weibo a { background: transparent; }

div#digg_bottom a { color: rgb(22, 7, 209); text-decoration: none; backgrou=
nd: transparent; }

div#digg_bottom div.digged { color: rgb(241, 78, 16); cursor: auto; backgro=
und-image: url("/images/digged_bottom.gif"); }

h3.type_good, h3.type_mid, h3.type_original, h3.type_translate, h3.type_rep=
rint { padding-left: 25px; background-position: 0px 13px; background-repeat=
: no-repeat; }

h3.type_good { background-image: url("/images/blog/type_good.png"); }

h3.type_mid { background-image: url("/images/blog/type_mid.png"); }

h3.type_original { background-image: url("/images/blog/type_original.png");=
 }

h3.type_translate { background-image: url("/images/blog/type_translate.png"=
); }

h3.type_reprint { background-image: url("/images/blog/type_reprint.png"); }

#guest_book_emotes a { width: 125px; text-decoration: none; color: black; d=
isplay: block; float: left; background-color: transparent; }

#resume { width: 100%; }

#resume label.title { width: 200px; font-weight: normal; }

#resume label { width: 50px; font-weight: normal; }

div.group { height: 160px; }

div.group div.content { float: right; width: 630px; }

#blog_options li { list-style: none; margin-left: 0px; }

#blog_options label { width: 150px; }

td.row1 { width: 160px; vertical-align: top; background-color: transparent;=
 }

h3 span { padding-left: 30px; font-size: 12px; font-weight: normal; }

div.blog_title h3 { font-size: 16px; padding-top: 10px; }

div.blog_title h3 span { font-size: 12px; margin-left: 5px; font-weight: no=
rmal; }

div.blog_title h3 span a { margin-left: 8px; }

table.admin { width: 100%; margin-bottom: 20px; }

table.admin thead { font-weight: bold; font-size: 13px; }

table.admin tbody td { padding: 5px 0px; border-top-width: 1px; border-top-=
style: dashed; border-top-color: rgb(221, 221, 221); }

div#favorite_tag_list { padding-bottom: 20px; border-bottom-width: 1px; bor=
der-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; margin-bo=
ttom: 20px; }

div#favorite_tag_list li { list-style: none; width: 120px; overflow: hidden=
; float: left; margin: 5px; }

div#favorite_tag_list input.text { width: 100px; }

#main_nav { border-bottom-width: 1px; border-bottom-style: solid; border-bo=
ttom-color: rgb(51, 102, 170); height: 25px; margin: 10px 0px 12px; }

#main_nav li { margin: 0px 12px; list-style: none; float: left; }

#main_nav a { display: block; color: black; text-decoration: none; padding:=
 0.25em 1em; border-top-width: 1px; border-right-width: 1px; border-left-wi=
dth: 1px; border-style: solid solid none; border-top-color: rgb(51, 102, 17=
0); border-right-color: rgb(51, 102, 170); border-left-color: rgb(51, 102, =
170); background: rgb(221, 221, 221); }

#main_nav li.activetab a, ul#main_nav a:hover { border-bottom-width: 1px; b=
order-bottom-style: solid; border-bottom-color: white; background: rgb(255,=
 255, 255); }

#main_nav li.nonetab { padding-left: 30px; }

#main_nav li.nonetab a { width: 200px; display: inline; border: none; paddi=
ng: 0px; background: transparent; }

div.activity { border-bottom-width: 1px; border-bottom-style: solid; border=
-bottom-color: rgb(216, 223, 234); padding: 7px 10px; margin-bottom: 10px; =
}

div.new_reply { background-color: rgb(238, 238, 238); }

.activity_content { float: left; width: 500px; padding-left: 22px; backgrou=
nd-repeat: no-repeat; }

.Topic .activity_content { background-image: url("/images/subscription/topi=
c.gif"); }

.Blog .activity_content { background-image: url("/images/subscription/blog.=
gif"); }

.BlogComment .activity_content { background-image: url("/images/subscriptio=
n/blog_comment.gif"); }

.Post .activity_content { background-image: url("/images/subscription/post.=
gif"); }

.News .activity_content { background-image: url("/images/subscription/news.=
gif"); }

.NewsComment .activity_content { background-image: url("/images/subscriptio=
n/news_comment.gif"); }

.Essence .activity_content { background-image: url("/images/subscription/es=
sence.gif"); }

.EssenceComment .activity_content { background-image: url("/images/subscrip=
tion/essence_comment.gif"); }

.ArticleComment .activity_content { background-image: url("/images/subscrip=
tion/post.gif"); }

.Picture .activity_content { background-image: url("/images/subscription/pi=
cture.gif"); }

.PictureComment .activity_content { background-image: url("/images/subscrip=
tion/picture_comment.gif"); }

.Problem .activity_content { background-image: url("/images/subscription/pr=
oblem.gif"); }

.Solution .activity_content { background-image: url("/images/subscription/s=
olution.gif"); }

.GroupTopic .activity_content { background-image: url("/images/subscription=
/group_topic.gif"); }

.GroupPost .activity_content { background-image: url("/images/subscription/=
group_post.gif"); }

.Page .activity_content, .Card .activity_content { background-image: url("/=
images/subscription/page.gif"); }

.PageComment .activity_content { background-image: url("/images/subscriptio=
n/page_comment.gif"); }

.GuestBook .activity_content { background-image: url("/images/subscription/=
guest_book.gif"); }

.UserFavorite .activity_content { background-image: url("/images/subscripti=
on/user_favorite.gif"); }

.Twitter .activity_content { background-image: url("/images/subscription/tw=
itter.gif"); }

.Subscription .activity_content { background-image: url("/images/subscripti=
on/subscription.gif"); }

div.activity_summary { padding: 5px 5px 5px 0px; }

div.activity_summary img.thumb { border: 1px solid rgb(238, 238, 238); padd=
ing: 2px; }

div.activity_time { float: right; }

div#twitter_decorate { margin: 5px 13px 0px; background-image: url("/images=
/blog/twitter_decorate.gif"); background-position: 50% 100%; background-rep=
eat: no-repeat; }

div#twitter { margin: 0px 13px 5px; padding: 5px; border-right-width: 1px; =
border-bottom-width: 1px; border-left-width: 1px; border-style: none solid =
solid; border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204=
, 204, 204); border-left-color: rgb(204, 204, 204); }

div.twitter { padding-bottom: 10px; }

div.twitter em { color: rgb(153, 153, 153); font-size: 11px; }

div.twitter em a { color: rgb(153, 153, 153); text-decoration: none; }

div.twitter em a:hover { text-decoration: underline; background-color: tran=
sparent; }

div.single_twitter { font-size: 18px; }

div.twitter div.content { padding: 10px 10px 0px 20px; float: left; width: =
667px; height: 80px; margin-left: 2px; position: relative; background-image=
: url("/images/app/twitter_sbg.png"); background-repeat: no-repeat; }

div.twitter div.action { position: absolute; right: 10px; bottom: 5px; }

div.twitter div.action a:hover { background-color: transparent; }

ul.blog_categories { list-style-type: none; margin: 0px; }

ul.blog_categories li { list-style-type: none; display: inline; padding: 0p=
x; margin: 0px 5px 0px 0px; }

div#blog_content { font-size: 14px; line-height: 1.8em; }

#blog_navbar { margin: 0px auto; width: 950px; }

#blog_navbar li { padding: 0px; margin: 0px; }

#blog_navbar ul { margin-left: 210px; }

.blog_navbar_for { border-radius: 10px 10px 0px 0px; border: 0px; margin-to=
p: 10px; font-weight: bold; }

#blog_navbar li { line-height: 30px; height: 30px; float: left; list-style:=
 none; color: rgb(255, 255, 255); font-size: 15px; margin-top: 5px; padding=
: 0px 27px; }

#blog_navbar li a:visited { color: rgb(255, 255, 255); text-decoration: non=
e; }

#blog_navbar .search { float: left; border-radius: 2px; width: 200px; margi=
n: 5px; background: rgb(255, 255, 255); }

#blog_navbar input.button, input.submit_search { border: 0px !important; }

.submit_search { border: 0px none; height: 22px; width: 22px; background: u=
rl("/images/blog/search.gif") no-repeat !important; }

input.search_text { border: 0px; width: 150px !important; height: 22px !imp=
ortant; }

#fd { clear: both; }

.blog_main_title { border-bottom-width: 1px; border-bottom-style: dotted; p=
adding: 10px 11px 5px; margin-bottom: 10px; }

.blog_main_title span { font-size: 14px; }

#guest_books li { padding: 12px 0px 5px; border-bottom-width: 1px; border-b=
ottom-color: rgb(204, 204, 204); border-bottom-style: dotted; margin-left: =
10px !important; list-style: none !important; }

#local a:hover a:active a:link a:visited { text-decoration: none !important=
; }

iframe #tweetList { height: auto !important; }

.notes { width: 85%; border: 1px solid rgb(204, 204, 204); margin: 0px auto=
 10px; padding: 5px 10px; color: rgb(153, 153, 153); }

.picture_upload { padding: 10px 20px; min-height: 400px; }

.picture_upload_notes { border: 1px solid rgb(204, 204, 204); padding: 3px;=
 margin: 15px auto; background: rgb(247, 247, 247); }

.picture_photo { border: 1px solid rgb(204, 204, 204); padding: 3px; width:=
 150px; height: 100px; background: rgb(255, 255, 255); }

.picture_photo img { width: 150px; height: 94px; }

.picture_photo_input1 { width: 100%; height: 50px; padding: 3px; border: 1p=
x solid rgb(204, 204, 204); background: rgb(255, 255, 255); }

.picture_photo_input2 { width: 100px; padding: 3px; border: 1px solid rgb(2=
04, 204, 204); background: rgb(255, 255, 255); }

.picture_info { }

.picture_info_img { text-align: center; }

.picture_info_notes { padding: 20px; }

.picture_info_notes span { color: rgb(153, 153, 153); }

.picture_info_text { margin-top: 10px; }

.picture_info_notes p span { color: black; line-height: 24px; }

.default { padding: 20px 20px 10px; min-height: 400px; text-align: center; =
font-size: 14px; color: rgb(153, 153, 153); }

.about_bar { margin: 10px 0px; padding: 5px 15px; font-weight: bold; }

.about_bar span { margin-left: 20px; }

.weight { font-weight: 100; }

.series { display: block; margin: 0px; padding: 5px 0px 10px; }

.series dt { display: inline-block; float: left; margin: 0px 10px; }

.series dt img { width: 48px; height: 48px; border: 1px solid rgb(204, 204,=
 204); padding: 1px; }

.series dd { float: left; margin: 0px; width: 90px; }

.series dd a { line-height: 18px; height: 36px; }

.series::after { clear: both; content: "."; display: block; height: 0px; vi=
sibility: hidden; }

.ico_img { }

.ico_img img { margin-right: 3px; vertical-align: middle; }

span.gold { padding-left: 12px; background-image: url("/images/ask/medal-go=
ld.gif"); background-position: 0% 50%; background-repeat: no-repeat; }

span.bronze { padding-left: 12px; background-image: url("/images/ask/medal-=
bronze.gif"); background-position: 0% 50%; background-repeat: no-repeat; }

span.silver { padding-left: 12px; background-image: url("/images/ask/medal-=
silver.gif"); background-position: 0% 50%; background-repeat: no-repeat; }

.material_classify_bottom { padding-bottom: 10px; border-bottom-width: 1px;=
 border-bottom-color: rgb(221, 221, 221); border-bottom-style: dashed; }

.material_classify_top { padding-top: 10px; }

.medal_bg { margin-right: 10px; vertical-align: top; display: block; backgr=
ound: url("/images/ask/medal_bg.gif") 100% 3px no-repeat; }

.medal_bg::after { content: "."; display: block; height: 0px; clear: both; =
visibility: hidden; }

.medal_bg img { float: left; margin: 0px !important; }

.medal_s_list { display: block; margin: 0px; }

.medal_s_list::after { content: "."; display: block; height: 0px; clear: bo=
th; visibility: hidden; }

.medal_s_list li { float: left; margin: 0px 10px 0px 0px; list-style: none;=
 }

.medal_number { float: left; padding: 1px 1px 1px 0px; color: rgb(255, 255,=
 255); }

.my_medal { margin: 20px 0px; display: block; }

.my_medal::after { content: "."; display: block; height: 0px; clear: both; =
visibility: hidden; }

.my_medal dt { float: left; margin-right: 20px; }

.my_medal dd { line-height: 24px; padding: 5px; }

.my_medal dd span { font-size: 16px; font-weight: bold; }

.medal_user_list { display: block; padding: 10px 0px; }

.medal_user_list::after { content: "."; display: block; height: 0px; clear:=
 both; visibility: hidden; }

span.open { display: block; padding-left: 20px; background: url("/images/as=
k/ask.gif") 0% 50% no-repeat; }

span.close { display: block; padding-left: 20px; background: url("/images/a=
sk/greenright.gif") 0% 50% no-repeat; }

span.score { padding-left: 12px; margin-left: 10px; color: rgb(23, 163, 0);=
 background-image: url("/images/ask/score.gif"); background-position: 0% 50=
%; background-repeat: no-repeat; }

.user_info { width: 160px; color: rgb(153, 153, 153); line-height: 17px; pa=
dding-top: 4px; }

.user_info img { float: left; }

.user_info span { margin-left: 10px; }

.user_info_border { float: left; border: 1px solid rgb(204, 204, 204); padd=
ing: 10px; margin: 0px 30px 20px 0px; }

#medal_top_list { display: block; padding-top: 10px; }

#medal_top_list::after { content: "."; display: block; height: 0px; clear: =
both; visibility: hidden; }

#medal_top_material { display: block; padding: 15px 0px 10px 12px; margin: =
10px 0px 15px; border: 1px solid rgb(194, 213, 227); background: rgb(250, 2=
50, 250); }

#medal_top_material::after { content: "."; display: block; height: 0px; cle=
ar: both; visibility: hidden; }

.medal_top_son { float: left; width: 165px; padding: 14px 0px 0px 5px; heig=
ht: 65px; overflow: hidden; margin: 5px 8px 9px 6px; border: 1px solid rgb(=
216, 230, 240); border-image-source: initial; border-image-slice: initial; =
border-image-width: initial; border-image-outset: initial; border-image-rep=
eat: initial; color: rgb(153, 153, 153); line-height: 17px; background: whi=
te; }

.medal_top_son::after { }

.medal_top_son:hover { width: 165px; height: 68px; overflow: hidden; margin=
: 0px 9px 7px 1px; padding: 20px 0px 0px 11px; border: none; cursor: pointe=
r; background: url("../images/medal_list_bg.png") 0px 0px no-repeat; }

.medal_top_son:hover a { color: rgb(188, 42, 77); }

.medal_top_son p { float: left; font-size: 18px; width: 20px; text-align: c=
enter; font-family: Arial; line-height: 50px; margin: 0px 10px; color: rgb(=
54, 113, 165); }

.medal_top_son h6 { }

.medal_top_son img { float: left; }

.medal_top_son span { margin-left: 10px; }

.medal_tag { margin: 10px; font-size: 14px; }

.medal_name { font-size: 12px; margin-bottom: 10px; }

.medal { border: 1px solid rgb(51, 51, 51); margin: 0px 8px 3px 0px; font-s=
ize: 14px; padding: 0px 10px; display: inline-block; text-decoration: none;=
 white-space: nowrap; line-height: 24px; border-radius: 6px; border-image-s=
ource: initial; border-image-slice: initial; border-image-width: initial; b=
order-image-outset: initial; border-image-repeat: initial; background-color=
: rgb(51, 51, 51); }

.medal:hover { border: 1px solid rgb(68, 68, 68); background-color: rgb(68,=
 68, 68); }

.medal_gold { color: rgb(255, 204, 51); }

.medal_silver { color: rgb(255, 255, 255); }

.medal_bronze { color: rgb(255, 153, 102); }

.medal_multiplier { font-size: 14px; font-weight: bold; margin-right: 4px; =
color: rgb(68, 68, 68); }

.medal_list { padding: 10px 40px; font-size: 14px; }

.medal_list dl { display: block; }

.medal_list dl::after { content: "."; display: block; height: 0px; clear: b=
oth; visibility: hidden; }

.medal_list dt { float: left; height: 30px; width: 150px; margin: 0.25em 0p=
x; }

.medal_list dd { float: left; height: 30px; width: 650px; margin: 0.25em 0p=
x; }

.medal_list_title { font-size: 16px; padding: 5px 0px; border-bottom-style:=
 solid; border-bottom-width: 1px; border-bottom-color: rgb(194, 213, 227); =
margin-bottom: 10px; }

p.medal_tag a:hover { background-color: rgb(255, 255, 255); }
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: text/css
Content-Transfer-Encoding: quoted-printable
Content-Location: http://www.iteye.com/stylesheets/themes/blog/blue.css?1326191326

div.topic_page, a { color: rgb(16, 138, 198); text-decoration: underline; }

a:hover { color: white; }

div.app_nav, div#page, .comment_title, tr.mouse_over { background-color: rg=
b(239, 250, 255); }

div#local, div#main, .blog_main, .pagination a:hover, .pagination a:active =
{ border-color: rgb(16, 138, 198); background-color: white; }

div.nav, div#app_list div.decorate, a:hover, div#branding, input.button, in=
put.submit, td.buttons a, .pagination span.current { background-color: rgb(=
16, 138, 198); }

.blog_bottom li { border-right-color: rgb(16, 138, 198); color: rgb(16, 138=
, 198); }

table.admin thead, .pagination a, .pagination a:visited { color: rgb(16, 13=
8, 198); }

div.app_nav, .pagination span.current { border-color: rgb(16, 138, 198); }

.blog_comment, div.picture_full { border-top-color: rgb(16, 138, 198); }

.white { color: rgb(255, 255, 255) !important; }

#blog_navbar { background-color: rgb(16, 138, 198); }

.blog_navbar_for { color: rgb(16, 138, 198); background-color: rgb(239, 250=
, 255); }

#blog_navbar .blog_navbar_for a:visited { color: rgb(16, 138, 198); backgro=
und-color: rgb(239, 250, 255); }

#blog_navbar .blog_navbar_for a:link { color: rgb(16, 138, 198); background=
-color: rgb(239, 250, 255); }

.blog_main_title { color: rgb(0, 0, 0); }

.about_bar { color: rgb(16, 138, 198); background: rgb(204, 204, 204); }

.view a:hover { color: rgb(16, 138, 198); }

.list_current { }

.list_current a { color: rgb(255, 102, 0); font-weight: bold; }

.list_current a:hover { color: rgb(255, 255, 255); background: rgb(255, 102=
, 0); }

#my_resume .editing a.del:hover, #my_resume .editing a.add:hover { color: r=
gb(16, 138, 198); }
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: text/css
Content-Transfer-Encoding: quoted-printable
Content-Location: http://www.iteye.com/javascripts/syntaxhighlighter/SyntaxHighlighter.css?1348819953

.dp-highlighter { font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera =
Sans Mono', Consolas, 'Courier New', monospace; font-size: 12px; width: 97%=
; overflow: auto; margin-left: 9px; padding: 1px; word-break: break-all; wo=
rd-wrap: break-word; background-color: transparent; }

.dp-highlighter ol { border: 1px solid rgb(209, 215, 220); list-style: deci=
mal; margin: 0px 0px 1px; padding: 2px 0px; color: rgb(43, 145, 175); backg=
round-color: rgb(255, 255, 255); }

.dp-highlighter ol li, .dp-highlighter .columns div { border-left-width: 1p=
x; border-left-style: solid; border-left-color: rgb(209, 215, 220); padding=
-left: 10px; line-height: 18px; margin: 0px 0px 0px 38px; background-color:=
 rgb(250, 250, 250); }

.dp-highlighter .columns { color: gray; overflow: hidden; width: 100%; }

.dp-highlighter .columns div { padding-bottom: 5px; }

.dp-highlighter ol li span { color: black; }

.dp-highlighter .tools { padding: 3px; text-align: left; margin: 0px; color=
: black; font-weight: bold; }

.dp-about { margin: 0px; padding: 0px; background-color: rgb(255, 255, 255)=
; }

.dp-about table { width: 100%; height: 100%; font-size: 11px; font-family: =
Tahoma, Verdana, Arial, sans-serif !important; }

.dp-about td { padding: 10px; vertical-align: top; }

.dp-about .copy { border-bottom-width: 1px; border-bottom-style: solid; bor=
der-bottom-color: rgb(172, 168, 153); height: 95%; }

.dp-about .title { color: red; font-weight: bold; }

.dp-about .para { margin: 0px 0px 4px; }

.dp-about .footer { border-top-width: 1px; border-top-style: solid; border-=
top-color: rgb(255, 255, 255); text-align: right; background-color: rgb(236=
, 234, 219); }

.dp-about .close { font-size: 11px; width: 60px; height: 22px; font-family:=
 Tahoma, Verdana, Arial, sans-serif !important; background-color: rgb(236, =
234, 219); }

.dp-highlighter .comment, .dp-highlighter .comments { color: rgb(0, 130, 0)=
; padding: 0px; margin: 0px; width: auto; border: 0px; }

.dp-highlighter .string { color: blue; }

.dp-highlighter .keyword { color: rgb(127, 0, 85); font-weight: bold; }

.dp-highlighter .preprocessor { color: gray; }
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/png
Content-Transfer-Encoding: base64
Content-Location: http://andylin02.iteye.com/images/icon_star.png

iVBORw0KGgoAAAANSUhEUgAAAA8AAAAOCAYAAADwikbvAAAACXBIWXMAAC4jAAAuIwF4pT92AAAK
T2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AU
kSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXX
Pues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgAB
eNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAt
AGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3
AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dX
Lh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+
5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk
5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd
0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA
4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzA
BhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/ph
CJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5
h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+
Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhM
WE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQ
AkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+Io
UspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdp
r+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZ
D5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61Mb
U2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY
/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllir
SKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79u
p+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6Vh
lWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1
mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lO
k06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7Ry
FDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3I
veRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+B
Z7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/
0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5p
DoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5q
PNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIs
OpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5
hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQ
rAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9
rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1d
T1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aX
Dm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7
vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3S
PVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKa
RptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO
32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21
e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfV
P1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i
/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8
IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADq
YAAAOpgAABdvkl/FRgAAAelJREFUeNqM0clqImEQwPF/dycuEaQRBT20ksWLKCIKggdBUMEnUO95
kHmUkBeI5uDBQJ5AhXZvFTcEhYBCm76IyxyGcZBkIHWq+vh+FFUlbDabE99ErVajWq0Si8XIZrPf
fUHkP6GqKqIo0mq10HX953i5XLJarcjlcgiCQL/f/zlWVRW73U44HOb29hZVVb/FV4vFgl6vx36/
Pz/W63Xi8TgAPp+PRqNBqVTCarVyPB4RBAGfz4fkdDp/jcdjLBYLhmGw3W6RZZloNIosy5jNZnRd
5/PzE8Mw2O12DIdDNE3jSlEUut0u9/f3xONxRPFyEofDQbFYPNeapjGdTvF4PAibzebUaDR4fX1F
lmXy+Twej+fLfLquUyqVGAwGJJNJUqnUHwwwHo95e3tju93y+PiILMtneDqdeHp64uPjg0wmQyQS
udz23d0dDw8PSJLEzc3NRVdBELDZbLhcrjO8wLvdjna7TTAYxGQyMRqNeH5+pl6vA+D3+5nP56xW
q3+n+pvMZjPW6zVer5dms0m5XOb6+prJZMJ6vSYQCCBJEp1OB7fbfYm73S6iKPL+/s5yuSSdTpNI
JOj1ery8vKBpGhaLhclk8rWzoiiMRiMOhwOFQoFAIABAKBTC5XJRqVQwDANFUc749wDhgMn/nJ9+
yAAAAABJRU5ErkJggg==
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://andylin02.iteye.com/images/spinner.gif

R0lGODlhEAAQAPYAAP///x5Hm9jf7aCx1HKMwFZ1s1l3tX+Wxay72uDl8K692j1gqUFjqkhprU1t
sFRzs3uTxMLN4zZbpYKZx+7x9u/y98nS5peq0GSAunCKv8XP5dXc7FFwsTFWo5mr0bPB3W+Jvoug
y+Xp85SnzypRoHmRw6e313eQwr7K4Vt5tiZOnrnF36Kz1TNYpCNLneru9fX2+oedyZKmzvb4+pCk
zbLA3Pr7/Pz8/cfR5dDY6fj5+9rh7rfE3vHz+Nfe7Ofr8+Hm8dPb68zV6MPO5OPo8tzi7/P1+d7k
74meyrzI4brH4GF9uGaCum2HvnSNwVh2tFJyssrU54acyEprruzv9kNlq5ut0muGvURmrDhcpqu6
2WJ/uS1TopWo0HaPwUtsr87X6NHZ6ujs9MDL4o2hzJ6w06m42GmEvJyu0198t116tztfqLC+2yxS
oShPn7XC3iFJnKW11z9iqS9Vok9vsISayEZorCVMnoCXxjpep2iDu32UxY6jzAAAAAAAAAAAACH/
C05FVFNDQVBFMi4wAwEAAAAh/h1CdWlsdCB3aXRoIEdJRiBNb3ZpZSBHZWFyIDQuMAAh/hVNYWRl
IGJ5IEFqYXhMb2FkLmluZm8AIfkECQoAAAAsAAAAABAAEAAAB42AAIKDhIWFGyMpLYaFCBwkKi6C
Njo3hQoLHSUrL4I3MD02gwIGEh6GNhQUlgADCxOMAD0/PYIEDBGxM0A/ggUNFLEAO0WCBg4VsTdB
PoIHDxaxFEI7gggGF7E+Q0SCCRAYH4Y7KxZGgxEZICYbMDMJOAg83YQaIScHMTQeLDwJjCJQsJDh
oUaOYMISBgIAIfkECQoAAAAsAAAAABAAEAAAB4yAAIKDhIWFOwNXWAxbXRuGADwYVQtZLVwkXyaF
Sk9TSBEUVEpeKlyERwRQm4UyhQoGI5CCN4NIS1GzADo2ggRMPbpGRoInTcSzFBWCF05BszpiywBJ
EAizVEDBAD8XUhqGLwJEvYI5MjRJCTo6L0VgG9ODQSZWLFofSkNhVJBUOUlqrBCSAIaugwACAQAh
+QQJCgAAACwAAAAAEAAQAAAHiYAAgoOEhYUJChNpBl4sAoYAQwdLBg8ODQxqbIU4XmdoURUVQ1Jr
DAiDImROPIZoLVAbgmMQZpAAEG1dgiwTPrdKbmqCMkgwt1QuLYIeNDO3hTUXR9CEYGVDtzY6gxQf
Zr+FOj3Pg0c1H0FUNzcwFC8VNoVAQyhDQkE7QC/chkYJG3L4IBKvWrVAACH5BAkKAAAALAAAAAAQ
ABAAAAePgACCg4SFhT8oHhBOIWxHhgA5FwcnGWdbak5KhUEjSGwbRj1CXQ9PPINUJjI4hmZfTDuC
OVYokABIDAOCSiwJtxFrV4JsZjq3FBJVgm9sx5BUHXKCFjxit0ptS4JHKD63TiojgkZgOCKQcA1B
gy9gOSIwgjf0AHGFFEUCCSJUPTM2bumgIEYMBRgBbykcFAgAIfkECQoAAAAsAAAAABAAEAAAB4yA
AIKDhIWFFGFvZR4mET+GAAkrcWUXNEgTMhaFRDwKFkAzMwIKJRAag0Y4PDuGSiATQIJAYxuQAGVb
bII+OFS3Qmp1gmFCN7cVD0u8QceQFQ4GswIwt0N2XoIVCb+QdXIDgjZiP9WFHlkpAoMzVBQzgysn
cwsKhTZGMDqCLm50CLduODMwwtatg4ICAQAh+QQJCgAAACwAAAAAEAAQAAAHiYAAgoOEhYUwQDko
KxFBFIYAVEE4Y0ofCHEKPoUVG2BHVDY6IhpWVkGDNkA+L4ZCNGVigj0JrZBvUhGCVEQzkAA+B2i7
sr9GXgeCFY/GTSeCMEY3v0JMZII2M9OQXWpsgzfbhSYPTkeGBCtUVGMxU09KhnZ3blwtWXIYPJBB
I2kLDM6U2fGr4KBAACH5BAkKAAAALAAAAAAQABAAAAeIgACCg4SFhTc9Pzs+OyIwhgA6VEQJAkFC
OFEihTYVLxUzADcVOyhJQIQwPTqGRx9KFYI3M6yQUWZBsjaQgkQsPLyFMx5lwYQzNB6CBi7AkAIx
JoIyKl68WgcRghsOXBeGPE58m4Jaay14YxQVFlZ6XjiFCE95cnYOD2p7Q89lGQ8GDiBIYMxYIAAh
+QQJCgAAACwAAAAAEAAQAAAHi4AAgoOEhYY3OkYVFUY2hoM2M0YUYkREPYUmhjoURTsUg0ENLo9U
QT4zgiMqTo8ACRZEgkskK64UQzmCC1xUrjZKY4IMLb6POh+2AGdZKK5EWhGCZQt1rhEsQYICS1hx
hhYXCMYAb1B0MlE9RkFsIRcbhSsgT2pMTV4HHmGPRwgxGU5cQPHDlcFBgQAAOwAAAAAAAAAAAA==
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/jpeg
Content-Transfer-Encoding: base64
Content-Location: http://andylin02.iteye.com/images/sina.jpg

/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+4ADkFkb2JlAGTAAAAAAf/b
AIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgIC
AwMDAwMDAwMDAwEBAQEBAQECAQECAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD
AwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgAEAAQAwERAAIRAQMRAf/EAGsAAAMBAAAAAAAAAAAAAAAA
AAMHCAkBAAIDAQAAAAAAAAAAAAAAAAUHAgMICRAAAQUBAQADAQAAAAAAAAAABQIDBAYHAQgAERIT
EQACAgICAgMBAQAAAAAAAAACAwEEEQUSBhMHACEiIxT/2gAMAwEAAhEDEQA/ANifKXk096OzU3v2
v28NSaVOjE265ZbIMqDxzQbSw1KjSCs2w2xpLDAhk8x1l6VJW49NebeQnrf4698zz17rNzfVG7ra
WIRRmSgCLhyYcZjMkf1AwUYmZzJTExGMZ+de/b3uzrnqvf0PWvR9SW07OIIKylM2PFTQUAXAU18k
TiUXMVhAioSApg+Xj+Gv1Kr/AJewxUbZ6/UxeiWYbZrfkmu5HX2is8FZooV+TUoPdJrsYcEZjLPA
uj5cLqH3GuFGp0OT9MSOJlYqx13VCvcwEXm8jS9McpEoj8R5RwOOQ8SGYnHODAvyXyjU7xnuDvjb
nrhlg+sUfFW2Ws2TIULUSzFlkUXSbucKdD1OggEprHWsJ/qqZlfHfb2TgCOM91o6Hpdq88ZI1hRf
Et0p2gP00TaaxcWpxLRKYQpON7vyHYbmDidGH4xCuCy7KuuoilWkdbdbD67tOvU+sWyIVPpVv88o
sLZK4MWZlq5WixgmDHBkEoDj7gWRGJhh9v8AR/a72s3aenKbd1XZtxG2Daam3SG2xDqnjCjaC1tN
RJJquLz0zTdsViiAJ1M5ggJA6F7JrDOBWzx7gC7BrBTfNlj3+5HR9OKVWjAp0g2Lngc0wShElyra
qA6XHRf6EZ7I2S820mOiDzi+rSEs9jSGnPq+mhlg7lyGsKFkCxnkMiquucnjMRkigZmI4wH3n4yd
H6d2Fn2FV93exyqahHXevHRqJK2qzccPhYtt7b3F8a/OFsZxQkngJFLSsZHjP//Z
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/jpeg
Content-Transfer-Encoding: base64
Content-Location: http://andylin02.iteye.com/images/tec.jpg

/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+4ADkFkb2JlAGTAAAAAAf/b
AIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgIC
AwMDAwMDAwMDAwEBAQEBAQECAQECAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD
AwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgAEAAQAwERAAIRAQMRAf/EAG0AAAMBAAAAAAAAAAAAAAAA
AAUHCAkBAAIDAQAAAAAAAAAAAAAAAAQHBQYICRAAAQUBAAIBBQAAAAAAAAAABQIDBAYHAQARCCES
IhMVEQACAwACAgMBAQAAAAAAAAACAwEEBREGABIhEwcUIv/aAAwDAQACEQMRAD8A32zNAErT6Hdr
hU06retjs8+rZ1T1rGDlWEiESLZslkt9pkQ1k1p4TMMtNI5IYUtXHHHXkoT9NXaapXZfnUWBRzc+
qDbL5GTkIZBStal8+vMiElMyJcfAiMzPnMzrrxfn097ZQ7Z3t3SdVz6cMFUNJJALn2bHHvxBtABG
DCZmDM2QMeH9GFCRQ/U2hGfsYpsuJAoVxNVwXOHmxk6rzJA2Kix1ewoakFhJcRIPwXvXJz7bkdf4
qS6lSPA86RYNRjXjpde0iNS2kuVmDhEy+tgfAkJQs459BmCj5iRmJ8k95RIZporUWdf7z18E2X1g
dD0tqmxQS5Dp9mLYuXqLj7jEll/mRYMj5BuP/IMnk2HHJWnf3ID9E1IhnGbR4AQZy/5nZLgHjydY
soNZnsGTCPC6/X2Iw5LjzbUElOXK6lT7TH2Hdqv0tr9eqfm/U/5m7drrE7Fz7WmNZ1VFmKtFTZWJ
8g2yxks4AiNKfSOBI5lKdL7jpdP/ADW7udwG4tOf2JmdnwpATdo2Lavt0rCZb6SLl10gCOTEUvcT
piWAv1X9t+WQU4CtWd40O1i63jbZgUNfdP1YhHO6VbB8QhDeEUmthgjxRAuCRKQ4q5K1Tp0uX+lt
j2lpPE+MHF6VurYvX7uzGp5+cthVqef7/wAyiICg3tc4EyZCJFADCVgHMn8lPlO1v1qhar2et9Ar
79/e33oXd0dMoZesLBgEuqhSpbCgNgLlky5zG+gr5gIiPP/Z
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/png
Content-Transfer-Encoding: base64
Content-Location: http://andylin02.iteye.com/images/login_icon.png

iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAK
TWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQ
WaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec
5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28A
AgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0
ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaO
WJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHi
wmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryM
AgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0l
YqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHi
NLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYA
QH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6c
wR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBie
whi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1c
QPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqO
Y4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hM
WEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgoh
JZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSU
Eko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/p
dLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Y
b1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7O
UndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsb
di97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W
7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83
MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxr
PGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW
2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1
U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd
8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H0
8PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+H
vqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsG
Lww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjg
R2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4
qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWY
EpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1Ir
eZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/Pb
FWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYj
i1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVk
Ve9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0Ibw
Da0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vz
DoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+y
CW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawt
o22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtd
UV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3r
O9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0
/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv95
63Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+
UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAA
ADqYAAAXb5JfxUYAAAJjSURBVHjavJbBS1RRFMZ/584bGSEwJoLATQshaFWoRWpIRf9AJS7aFAy0
SWdcCC3aBu3GoVCCosCVZAUStGiliGU2IUSGi6BFZVAaE5I1Nve06GHPp867T9MD3+Zxvvud7553
7z2iqkSF9BRPA+eARuAQkABmgFlgGBjSfGOl6hrVhEzPy4PAbeBYRC2zwCWbbxqNLWRyU+3AE6AW
tygDGdvXPOgslMhNNgCTQJp4UQaOV/qOvlhT+LrqaL+gaUEJYEbQLkGbfGQEfRbKqRH0rpd7noh0
lMxOHPHdBGME6FgutJTDCySzEzeAy6HPHcuFluGqjgS9EKpyUdCL64n4+TnfbZDTGbl1gm0TLAGM
lAutCxs2pdBaEexgiHMyWkj1gKgSwOvIc6Y6HuKkU91j6Q2FUt2ju0BrQAmgFP2zaSnEAXTv6p3K
TbGV0HyTU55hh0Ikt3K22oFe/y6r3+K6i0ARGLT55jt/hbKTAFmgb5vMDAHnPUHbtlEEoBOY9gR7
ZQda1OuJalscxv49KWqThreff8ShpT3B1rlmZ1r20d/ZAMCt8Tm67r9zVjKiFlfkTtSvEt2dMs5c
T7DOVdUm5d+bZYS6lOH7khvfM2o33WGjFld+LEfr3PS48j1xmIKq3Nq48nfOUZweWbu6+l/l3849
MqGXsSoeT8+tEMdm55lf/OnM9SSGo6sP3vDq/TdSyQQPi5+Iw/UEuxBnfntU/BDoEXFuhjXv/Xbg
oxHsdcFW4vRqE7hm/GkzI+hSaDb7X7j5deDMgEEVVO+hehjVIVRL/retoILqU1RPfRk42wXwZwAN
Ts5Uo85DgAAAAABJRU5ErkJggg==
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/user-logo.gif?1324994303

R0lGODlhZABkAMQAAOrq6vHx8fj4+Ojo6P39/efn5/T09OXl5e7u7vr6+uzs7O/v7/v7+/b29vPz
8////+Pj4wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C1hN
UCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtj
OWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUg
WE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAi
PiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5
bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6
Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29t
L3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NU
eXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdp
bmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkY5Q0NEODA1QUFDMTFFMDk3RDlFOTgy
NkZGMjJDQUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkY5Q0NEODE1QUFDMTFFMDk3RDlF
OTgyNkZGMjJDQUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlp
ZDpGRjlDQ0Q3RTVBQUMxMUUwOTdEOUU5ODI2RkYyMkNBQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1w
LmRpZDpGRjlDQ0Q3RjVBQUMxMUUwOTdEOUU5ODI2RkYyMkNBQyIvPiA8L3JkZjpEZXNjcmlwdGlv
bj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf2
9fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769
vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWE
g4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxL
SklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMS
ERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAABkAGQAAAX/ICSOZGmeaKqubOu+cCzPdG3f
eK7vfO//wKBwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum8/otHrNbrt3CMQ7Nkg8EvPX
gPBgyPMsBXwGAAIOgCsCDw17DwaIKQMPBIIPcQOQJw4PDgYPAZuHmSUKDnsEkg0Ho5EADQUBD7IP
AhAAs7i5srUmBQgBwAuYJIUCxgKPJsXHySMHCsDACqs3sbO1t7ravCMKdroMASTfswom5LLmIgUG
fLoGBTbWu7ba286K9rIJw9mzDNRELMjFDYE7feJozKNVTx8uXgfQ6UMlwhOuhBAOHJQVD8JCh81i
LMTm8GFGiQ4p/0GohKujxVkJEZTMhRHGyIwAcgIYiGuBTkwfZ/L6SBIXgVUsZ84CIONmCX+ymI4o
oM2AggEAHGyMKoJBLm+5/rz8hyAnApTcXjgllkuqQF1/CgAo0AhXAxFQ72XcaoBaTghjOYo0+bQt
iXyzFoiYFyDvgxENHA5TkAsghAFe7xxALEuxTcJscbmFkIuACEktJQ5LmkuUx1yeI8+ymitki7Uj
8o4miLftR7dBJwX8LYJzLd6frykzPAI56lkD5OoEEBBCZlx/FjOXLevRdADD1ILOzVxE6REvbZ/I
m/Y19tPuGHSUN7636MOwR2ANv+IrqcrO5FRdDbjZtxQJPM1CwMJoL5QnwgHv/FBgQwdOVRVTAwTg
WX/3lRDYHQgc8ExfOEyoWwmbpDTgCQ6uM1NNCtVHIVckRFSSeia0+FZJ88WoXGEdklCXPgzmGKSH
Jd1F34+hVVjCZg7hoYKOIyRoT5HJ0QOkkyYgcJ1RMBrJZS8f7sKfDABEE0B2U6kZQI8nZOgAMo3d
piacJxzwSwMNrIknK4AGKuighBZq6KGIJqrooow26uijkEYq6aSUVmrppZhmqummnHbq6aeghirq
qDaEAAA7
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/icon_minigender_1.gif?1324994303

R0lGODlhCwALALMAADFjdCt4kTKOrjikyGWarFexz2vQ8YGXnoKcpZKxu7S5u4m0wqC9xp/O3sDA
wAAAACH5BAEAAA4ALAAAAAALAAsAAAQ80EnZamWTml1WdgyzCcTnNItAno1RLcQSEFVRbGUiIE0B
EIOBIGMIKE6FAHHg6SknjMGNADh8FsKANRMBADs=
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://andylin02.iteye.com/images/status/offline.gif

R0lGODlhWQAaAMQAAGZmZu/v76WlpZmZmcXFxXx8fP///7W1td3d3ff394yMjK2trb29vczMzIWF
hZmZmeXl5dbW1v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEH
ABIALAAAAABZABoAAAX/oCSOZGmeaKqubOu+cCzPdG3fIyIMRID/wFFjNygeIAFdcclsOp/QqFQq
aKgEhQLzEOgmENOweEzOLkwIhQJhaAd4iIa8MRAk2vi8fs/v+/9+DWo+Iw52eWACB4sLAg4DAYCS
k5SUbwpCDnsBRAI7DoZ3laOkowkOCCILA3wEq00NfgAGs7N8ALi4e7Z/vHq8tXoNDiJFfAkMDAQE
DAcMu7ltttPRwNK52NXZ2XjWtHnDIp57CXQCyTsCPbfSu93fvu19wcHv09d44RKeCf39EAc8EQFV
ZwEEf9uy9QOAMAFDhv4cLozYUKJFiw9zUdTHzx+EZgtCehqgRkDIgxEh/0JEqPHhxYsrU0p0uRBX
RZv9ONrxR+BAyJ+eFDhQ4PMAxYwTk858uTImS4U3sW0ktm9nuSILfAoUINTQDgJPl1Zc2jSjVIov
J+JUGVGnP5IDgI7sWkeNQ5ppY+LdizbhWr1p3faD+xMoyQIKFtiNmlQj2bFOMapN2VSp4KtbCx8e
wEBABMpskTaGObahQpVlxZaj6qlLlwhbnS0LaPIAAte5XHfBpZv3bt8B/ALYrft3ceDBh3fRt6o4
AgZZCURAEIGZstvFs2vfzr279+36hmlH4ErggQZIvqtfz947A1QjFHhGQL++/fv48+vfz7+//+dF
kBCAGgskY+CBCCao4CeCDDbo4IOKKUAICQdkoQAZGGao4RMKZHGACgg0suGIJIaxQColhAAAOw==
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/jpeg
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/upload/logo/user/984106/d4c1a0b9-18aa-319a-b458-331c30ecc7bb-thumb.jpg?1403577966

/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAICAgICAQICAgIDAgIDAwYEAwMDAwcFBQQGCAcJCAgH
CAgJCg0LCQoMCggICw8LDA0ODg8OCQsQERAOEQ0ODg7/2wBDAQIDAwMDAwcEBAcOCQgJDg4ODg4O
Dg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg7/wAARCAAwADADASIA
AhEBAxEB/8QAGgAAAwEAAwAAAAAAAAAAAAAABggJBwMFCv/EADIQAAEDAwQCAQIFAgcBAAAAAAEC
AwQFBhEABxIhCDETFCIJFTJBYRZRJTRCQ1JxkaL/xAAZAQEBAAMBAAAAAAAAAAAAAAAGBQABBAP/
xAApEQABAwMDAgUFAAAAAAAAAAABAgMRACExBAVREyISFUFhkaHB0eHw/9oADAMBAAIRAxEAPwCq
kBu4Pzyq16j/AFc2mTVsiJMgOKWl1hppLaFZQeyQCT17V11jUQ/xD7l3F3j8/Ye1MeRUKhAtiktP
QKR2nDziA6++oYBJwppIKsno41yb5eWvkNsl50Xxb9tXxJtyy2XoyqJTXoCTT2I6ozR4IKklBIVz
CiD2vl6PQHtjt+E3n+IXdW/+66Y1zVpVJhwDHpS2I/1PBPEvYWriAlDSAojOSR61R1DpSyYAkfNV
0DqBKVxHIzSw0fxi3bqMZuS1acsRC4Eh0oB5E9eiQSR/Gf5xoprNCq+zVrMpq9Idj1VaiC8ppaU/
IgnsZ9dgg5HRH76vDt/5z+O95xF26447QJqCUNxKtTWw28QDkIWgqbWev2I0G3tvl4f79WXVrBbp
026q6/DlGM9Btp976dwt8Q4HQnHHITgg/wCn+NFxq3lOEKFac0rJAsQOZmpkeGt50G4/I0Ui8pyo
tEqDyEqabkFl6TJW4hLLKCCBhfNYVgggIURq9MW5JbVuUoFxTERUdCmW1Q1IbIUOXSgexggDodAa
87lm7TVDZXz5shl2sJr9LbjR7mRNpqT8TzbUd1ZYST/uIeUy0pPsF1ORqwtFvmnN2rR0NVGe7Gag
tsoamTVyi0QgDHJwc/2xg+v2AGluhQ253gZrNKwQ4QfSmC2moibe8B4TN1WomDLWy9Nk0+sRGnXF
rdPMrcbPIBSs5IPf9wNSWs2nWOjyD3Ok1azaLJjVd1DioiIiIzSAlauJSG04TgnsAYVnv0NVW3K3
WocTa6qMOTfmkOxnPjjsjm65gd4H8ZGSTgZz61AufvTJpfkO9ORSUsW4yv8AxR5aipSYzns9YTzS
oH7Ry7QRnvUDUPJJUmb/AJrn25l114OqT23/AH8VSKyPHvZm6d0LRt28rGt237MlfU1ByN9UIj1V
cLa0slH6FFDa1Ld+32viT0Ma0+0tg7CoV4UeVMsGjXPUqVETEauNp9QZqIGEpk82sgcglJWEnAUF
DWbUCkXffn9MVGu2lQ74tumY/JyadKefip/4q+BQ5JJGe+jjBxnToVWsXFbW1yqrd0WiRqLFg/JD
p1PgqiCMUAq4Dmo9EAZSBhOCcnRdT5Snwq9DS95gBYWIgiIn7VIzfmFYVJ/EUn2NTotPCGKPGdq8
qOktKRVXZUia+oce28odiggHIAbz+k6O6XHjw22lsTJCI4TkBqqSVYx/dKnMD/wf9D1pPfJKh3TQ
/LG4NxK7CWaJdNS+u/NwStliQ82FiK8SB8TgQBxSoDkgBScg67G1Nz3HKRHglUKS22MB2E+626AO
j+hzH/zp9tjzKmQQqa5uittMxBn++lN25udYl5XjMsuny7gtxtC0LlS3qI1VGkojxi4X08Hm1DkH
Q3niSUe8nvSkUzZL+tqjf0ifflt3Y7VaPxpy7ekuupjOvc3EhxoNhaF54EhXSeRyRrdY98OW7B3P
k3hbNuXfCodEFOopuOjLYeZM10D4mZaASUpSeHFX6SBg+tAVxU3a6dtBZL9uQNydu7pqNcclxHIl
wprNNbW1JaQyp6O2rk4kEcfuGQknGderu0tIQVNNmbCZm2TfIoexur6oBXAMmIi5EYxR1sdem6dP
tqm0226lOp1fjrEGp09psPtl9ACSsJII+4AKBHRznT8biSZlkbF0IbtXkuXfd4S2ojQkqaQzS4YW
hTgQhSkIClqDbROcqLnFOT0Uq2M8uqTtH5cbjUe9bepNUiSKY+xb0+HS3qeKlJhJWpmMC+MpfcU4
pAUogYCUjOEDQpu3uXbu5ldu+vbuvy954z02DGp1uolf0/TKOStHJKeZ+aSUFTrYV03lK1YKjy0d
d2Vx98pSDB9r3xOKo+aFLaZyM344zRxWRRo/lRVLde3As2axWGYqarblejy2YKEvp+JYS84kt/Ml
bBx9qSAoj0VaHNlLe2nunxgr0iJalPcuVmW/TC6uAzylOIB/y0hskNHkrCnFpSSMLQM96xbdncTb
KiuUWdQLDr0SuKtuHHaki/VSUsyC9JdQr7XFOOcQtOR7AT6zpg7EqLUbZxiAIcRFXTAYjMswoP0i
HeylpXH2kgIUpRV92c57OrI2hlLaCtJBAA4mMWGbc1L1G8ahpKg0odxPvE5ziv/Z
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/images/user-logo-thumb.gif?1324994303

R0lGODlhMAAwAMQAAOXl5eTk5Pv7++np6efn5/Pz8+bm5vz8/PHx8evr6+jo6PLy8vj4+O/v7/r6
+vn5+e3t7f39/fT09P7+/vf39/X19fb29uzs7PDw8O7u7urq6v///+Pj4wAAAAAAAAAAACH/C1hN
UCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtj
OWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUg
WE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAi
PiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5
bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6
Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29t
L3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NU
eXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdp
bmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkIzMkFGRUQ1QUFEMTFFMDk2MEJERjMw
QTkyQzUyNDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkIzMkFGRUU1QUFEMTFFMDk2MEJE
RjMwQTkyQzUyNDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlp
ZDoyQjMyQUZFQjVBQUQxMUUwOTYwQkRGMzBBOTJDNTI0NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1w
LmRpZDoyQjMyQUZFQzVBQUQxMUUwOTYwQkRGMzBBOTJDNTI0NiIvPiA8L3JkZjpEZXNjcmlwdGlv
bj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf2
9fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769
vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWE
g4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxL
SklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMS
ERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAAAwADAAAAX/ICeOZGmeaKqubOu+cCzPdG3f
eK7vfO//wKBwSCwafQSL4lgiPBgZJknCYBQCUtEFUZAkEgTCd5xYigAEgygwGJg5gIFGDQ+vAobD
BoHY+P8FHAQSBxERDAkcDBsRZhR+CgAFhREPECoAAhsYGH9/CAaanhsQCn4UHBB+CwEPo3spmXtx
qhsLCgaPGwIFuhMGC34NDhsHAQV+BwUWE34aKLILIqYbUdQPBg0LFX4IAXp/EAERxQQQBcgbFdCa
0hwDwql+EATdDhESHBl/DO/dAX4KMIiA6kQ0EfA2NOBwQVgrBwMAGAAgYtGEAf42BLIgIAEeigbb
IYxHoNkBjHSmZ2xwcEZPhEQpY4nMuJADtw0THgi4UELCSiwc+vh54ADDCgB63CWsCWDRnwMgRXAT
ADSABU8TCGCy4KCmAqI81zRgIOBBgahBHVQAKgICBQFqtWaZS7eu3bt48+rdy7ev37+AAwuWEQIA
Ow==
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: image/png
Content-Transfer-Encoding: base64
Content-Location: http://www.iteye.com/upload/logo/user/1092727/a2443046-66eb-3e05-b5c9-321e7c8af9f5-thumb.png?1433568197

/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEP
ERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4e
Hh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAAwADADAREA
AhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAABwUGCAQD/8QANBAAAQMCBAMHAgQHAAAAAAAAAQID
BAURAAYSIQcTQQgUIjFRYYEycRZikZIXI1KhssHh/8QAGgEAAgMBAQAAAAAAAAAAAAAABAUBAgMA
Bv/EACYRAAIBBAEDBAMBAAAAAAAAAAECAAMEESESMUFRBRMiYUKBobH/2gAMAwEAAhEDEQA/AOTs
+xtfDeNUFJIXJ/SydtvkHEU0xmUc5Mn80T4NGpz9SqTwZjMi6lWuSfIADqT6Y0JCjMoBk4EMV8S3
51UdFPbgRaa1sHJDv85ZtfdPkBe42vjB6p/GE06I/KTqOI9KLMdQaYNwA7pf0qJ/KlXn+uKpWYn5
SalBcZWXakS4VWgImwHkvMr2uPNJ6gjoR6YIyCMwUgiey2yDbHTpWOzM8ZHB6EgkHkS5DI9hr1D/
ACxIkt1h5x9rT1azK5leKSownEoSyncreWkbn9wA+cC13w2+ghVtTyPuWeu9nt+JlqK5Q5b709DI
56HXBZblgTo9Be4t9sLBdMTkjUZC3TGM7gVmjLFcozjpnxpLDjR2uCLH2wbSuEY4EFq27rLl2cM3
yo2eW6FLcUuNVU8rfezyQShX3IBSfuPTByjBgD73NKPNWVi+JnDfslurVw6qkRwKSpiqKOlQsQFN
p/2DiZZ5FZTo8CV2qMzPz2VPN09kzWgpJNnNLQBt1tqNvjCz1Bjw1D7EfLcdadnal1CrN0FiLPRM
UkEKXo0297KJF7HYjocLSnFQTDgcsfqUPiNmGHzZEdqmOykIcDTyi4hIS4b7WV12NvW2Ip0i5yJo
9bgMGC9XYg03iLk3MUJhUQyKgjvCUIA+lafFYbX0qINvO2GtpVPEhu0W3VMFhx7zTcpkAnDGLRCX
sw5jrlbi19iuTHJbjKmnGVrteylOFfkBfxEn5xVHDdJpUUiKFKyxSU58/FYRypzkQwZQCvDIQVJK
VEf1J0kXHTz8sKvUQykeDv8AcY2RUr9j/JaH2aNFkpdTFjsyEAIbcNhpHQffbYYXscjEPUEbhLGc
ZdrdQbCOc0p1xwrbVsoA7g+hF/m2I2AJtgEyNhZQj5mzdS5KRpjUqQp7Rp8KkkWsfcW+cG2oZiVH
eA3TKg5HqOkXJbfUDboMO8aiSEXA1rM+XFs5aqjyTS3oy347ZQhSQ6NJXy3BuR4jqQqxFwbb4Hpl
lfiZvU4lciJxd0SUOAjwqvjWtTFWmU8zKm/Bw3idM1ypLiSBDeYQ04TqDgVrsR0t5+mPNLrIM9Iu
DgmFFXk1RmquSJkhvk8zdLLRClf32xcBTJfRyOkR+GKIqKA4G1pMpbmuS2PNskeBJ9tI8/W/ph3Z
IFpA+YivXLVSPEnZadsFwWDjGcMo5FhRIFezKmq1KOzzFIiHvC21qCgGypPhukFSTcg2UgdMDUgy
jD9ZvWKsxKDUPs1ccq3UpHdctwGqW24rQh56zr25sDb6U/ofvjfn4mQXE1BWYr1LZUwXAl3kBbZW
LpdQAB+4HY/F9iMJb639mqWxoxrZ1/dpgdxD2q5aq0l8VCqqTEiI8QSkWv6n/pwRa2Bccn0P6Zjd
eocPimz/AAQR/jBUKHxNmV2htofpXLRC7m4opQ+w3fSq43CtRUoK3+re4JGGXfUBUEj5dY75E4t5
Qzpyo8eUadU12HcZhCVqP5FfSv439sTntKlSJ//Z
------=_NextPart_000_1F57_C38508DB.8A6136C5
Content-Type: text/html
Content-Transfer-Encoding: quoted-printable
Content-Location: http://andylin02.iteye.com/iframe_ggbd/187

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html; charset=
=3DUTF-8"></head>
        <body style=3D"margin:0" data-en_id=3D"81418823"><!--AdForward Begi=
n:-->
<div id=3D"32631838_0" style=3D"padding:0;margin:0;border:0;">
<!-- Iteye=E5=8D=9A=E5=AE=A2=E5=86=85=E9=A1=B5=E4=B8=8B=E6=96=B9banner475*6=
0 -->
<ins class=3D"adsbygoogle" style=3D"display:inline-block;width:468px;height=
:60px" data-ad-client=3D"ca-pub-1076724771190722" data-ad-slot=3D"228274264=
1" data-adsbygoogle-status=3D"done"><ins id=3D"aswift_0_expand" style=3D"di=
splay:inline-table;border:none;height:60px;margin:0;padding:0;position:rela=
tive;visibility:visible;width:468px;background-color:transparent"><ins id=
=3D"aswift_0_anchor" style=3D"display:block;border:none;height:60px;margin:=
0;padding:0;position:relative;visibility:visible;width:468px;background-col=
or:transparent"><iframe width=3D"468" height=3D"60" frameborder=3D"0" margi=
nwidth=3D"0" marginheight=3D"0" vspace=3D"0" hspace=3D"0" allowtransparency=
=3D"true" scrolling=3D"no" allowfullscreen=3D"true" onload=3D"var i=3Dthis.=
id,s=3Dwindow.google_iframe_oncopy,H=3Ds&amp;&amp;s.handlers,h=3DH&amp;&amp=
;H[i],w=3Dthis.contentWindow,d;try{d=3Dw.document}catch(e){}if(h&amp;&amp;d=
&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if=
(h.match){try{h=3Ds.upd(h,i)}catch(e){}w.location.replace(h)}}" id=3D"aswif=
t_0" name=3D"aswift_0" style=3D"left:0;position:absolute;top:0;"></iframe><=
/ins></ins></ins>
</div>
<!--AdForward End-->
       =20
</body></html>
------=_NextPart_000_1F57_C38508DB.8A6136C5--
